(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a83ab264"],{2532:function(e,t,n){"use strict";var a=n("23e7"),i=n("5a34"),r=n("1d80"),o=n("ab13");a({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(r(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},"390b":function(e,t,n){},"5a34":function(e,t,n){var a=n("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},6464:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("5c96");function i(e,t){a["Notification"].error({title:e,message:t,duration:2e3,position:"bottom-right",showClose:!0})}},"6e28":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("header-buttons",{attrs:{showRefresh:!0,cssType:"1"},on:{buttonClickEvent:e.buttonClickEvent}})],1),n("header-search",{attrs:{"show-primary-search":!0,cssType:"1"},on:{refreshTableData:e.refreshTableData}}),n("el-main",{staticClass:"view eq",staticStyle:{"overflow-y":"visible !important"}},[n("div",{staticClass:"searchDiv"},[n("span",[e._v("时间范围")]),n("el-date-picker",{staticClass:"dateTime",attrs:{clearable:!1,type:"datetimerange",align:"left",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":e.BTN_TEXT.TO,"start-placeholder":e.BTN_TEXT.STARTTIME,"end-placeholder":e.BTN_TEXT.ENDTIME,"default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},model:{value:e.dateTime,callback:function(t){e.dateTime=t},expression:"dateTime"}}),n("span",[e._v("班次范围")]),n("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.shiftData,callback:function(t){e.shiftData=t},expression:"shiftData"}},e._l(e.shiftOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"default",size:"mini"},on:{click:function(t){return e.reset()}}},[e._v("查询")])],1),n("el-row",{staticClass:"tableShow"},[n("el-col",{attrs:{span:24}},[n("VXETable",{ref:"xGrid",attrs:{tableName:"",height:e.$options.filters.getTableHeight(230),tableLoading:e.mainPage.tableLoading,tableDatas:e.mainPage.data,tableColumns:e.mainPage.columns,highlightCurrentRow:!0,tablePage:e.mainPage.page},on:{sortChange:e.sortChange,onTablePageChange:e.handleMainPageChange}})],1)],1)],1)],1)},i=[],r=(n("d81d"),n("b680"),n("ac1f"),n("1276"),n("5530")),o=n("2909"),c=(n("96cf"),n("1da1")),s=n("f82c"),l=n("cf46"),u=n("582a"),h=n("3fa5"),d=n("e9bc"),f=n("6464"),g={name:"EquipmentStatus",components:{VXETable:l["a"]},inject:["reload"],data:function(){var e=this;return{VARIABLE:u["P"],MAINTAINTASK_STATUS:u["G"],EQUIPMENT_DATA:u["s"],BTN_TEXT:u["c"],PAGE_TITLE:u["I"],ENERGY:u["q"],TITLE:u["N"],MSG:u["H"],maxHeight:document.body.clientHeight-250,activeTab:0,titleName:"",mainPage:{show:!0,page:{total:0,currentPage:1,pageSize:10,align:"right",pageSizes:[10,20,50,100,200,500],layouts:["Sizes","PrevPage","Number","NextPage","Total"],perfect:!0},data:[],columns:[{field:"groupName",title:u["u"].WORKSHOP_NAME,width:"auto",align:"center"},{field:"deviceName",title:u["u"].DEVICE_NAME,width:"auto",align:"center",sortable:!0},{field:"devicePriCode",title:"设备编号",width:"auto",align:"center",sortable:!0},{field:"typeName",title:u["u"].DEVICE_TYPE,width:"auto",align:"center",sortable:!0},{field:"idleTimeSum",title:"总空闲时间(分钟)",width:"auto",align:"center"},{field:"idleProductAvgTime",title:"平均生产单件空闲时间(秒)",width:"auto",align:"center"},{field:"productionValue",title:"时间段"+this.$store.state.pageInfo.pageConfigInfo.yieldKey,width:"auto",align:"center"}],tableLoading:!1},isSearchBoxShow:!1,orderByData:{},searchList:[],specialSearchList:[],searchData:{conditionJson1:[]},pickerOptions:{disabledDate:function(t){return t.getTime()>e.moment("".concat(e.moment(Date.now()).format("YYYY-MM-DD")," 23:59:59")).format("x")}},dateTime:[],dateTime2:[new Date(2016,9,10,0,0),new Date(2016,9,10,23,59)],savedSearchCondition:[],shiftOptions:[],shiftData:null}},watch:{activeTab:function(){this.getQueryParameter(),this.searchData={conditionJson1:[]},this.findList()}},methods:{buttonClickEvent:function(e){this["".concat(e)]()},showSearchCard:function(){this.isSearchBoxShow=!this.isSearchBoxShow},reset:function(){this.mainPage.currentPage=1,this.mainPage.pageSize=10,this.findList()},handleMainPageChange:function(e,t){this.mainPage.page.currentPage=e,this.mainPage.page.pageSize=t,this.findList()},refresh:function(){this.findList()},findList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.mainPage.tableLoading=!0,n={conditionJson1:[],operatorGroup:1,conditionJson2:[],size:e.mainPage.page.pageSize,current:e.mainPage.page.currentPage},e.savedSearchCondition.length>0&&(n=s["l"].apply(void 0,Object(o["a"])(e.savedSearchCondition))),a={startTime:"",endTime:"",shiftStart:"",shiftEnd:""},e.dateTime&&(a.startTime=e.dateTime[0],a.endTime=e.dateTime[1]),console.log(e.shiftData,e.shiftOptions,e.shiftOptions[e.shiftData]),null!==e.shiftData&&(a.shiftStart=e.shiftOptions[e.shiftData].shiftStart,a.shiftEnd=e.shiftOptions[e.shiftData].shiftEnd),console.log(e.dateTime,e.dateTime2),t.next=11,Object(d["h"])(a,n);case 11:i=t.sent,i.code===u["M"].OPERATION_SUCCESS?(e.mainPage.data=i.rows,e.mainPage.page.total=i.total):Object(h["c"])(i.message),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),Object(f["a"])(u["N"].NOTIFY,t.t0);case 18:return t.prev=18,e.mainPage.tableLoading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,15,18,21]])})))()},sortChange:function(e,t){this.orderByData={},this.orderByData[e]=t,this.handleMainPageChange(1,this.mainPage.page.pageSize)},propertyFormat:function(e){var t=e.cellValue;return t+"%"},hourFormat:function(e){var t=e.cellValue;return(t/60).toFixed(2)},exportTable:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.mainPage.tableLoading=!0,n={conditionJson1:[],operatorGroup:1,conditionJson2:[],size:99999999,current:e.mainPage.page.currentPage},e.savedSearchCondition.length>0&&(n=s["l"].apply(void 0,Object(o["a"])(e.savedSearchCondition))),a={startTime:"",endTime:"",shiftStart:"",shiftEnd:""},e.dateTime&&(a.startTime=e.dateTime[0],a.endTime=e.dateTime[1]),console.log(e.shiftData,e.shiftOptions,e.shiftOptions[e.shiftData]),null!==e.shiftData&&(a.shiftStart=e.shiftOptions[e.shiftData].shiftStart,a.shiftEnd=e.shiftOptions[e.shiftData].shiftEnd),console.log(e.dateTime,e.dateTime2),t.next=11,Object(d["h"])(a,n);case 11:i=t.sent,i.code===u["M"].OPERATION_SUCCESS?(c=[],c=i.rows.map((function(e){return Object(r["a"])(Object(r["a"])({},e),e.deviceLiveReportVo)})),e.$refs.xGrid.exportData("设备空闲报表",c)):Object(h["c"])(i.message),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),Object(f["a"])(u["N"].NOTIFY,t.t0);case 18:return t.prev=18,e.mainPage.tableLoading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,15,18,21]])})))()},refreshTableData:function(e){e&&(this.savedSearchCondition=Object(o["a"])(e),this.mainPage.page.currentPage=1),this.findList()},getSystemShift:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,i,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d["g"])({configurationTypeEnum:"SHIFT_TIME"},{});case 3:if(n=t.sent,n.code===u["M"].OPERATION_SUCCESS){if(console.log(n),n.rows.processConfiguration)for(r in a=JSON.parse(n.rows.processConfiguration),e.shiftOptions=[],e.shiftData=null,i=0,a)o={value:i,label:r+" "+a[r],shiftStart:a[r].split("-")[0],shiftEnd:a[r].split("-")[1]},++i,e.shiftOptions.push(o)}else Object(h["c"])(n.message);t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:return t.prev=9,t.finish(9);case 11:case"end":return t.stop()}}),t,null,[[0,7,9,11]])})))()}},created:function(){this.getSystemShift(),this.dateTime=["".concat(this.moment(new Date).format("YYYY-MM-DD")," 00:00:00"),"".concat(this.moment(new Date).format("YYYY-MM-DD")," 23:59:59")],this.findList()}},p=g,b=(n("acb2"),n("2877")),m=Object(b["a"])(p,a,i,!1,null,"60ab2f56",null);t["default"]=m.exports},ab13:function(e,t,n){var a=n("b622"),i=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(a){}}return!1}},acb2:function(e,t,n){"use strict";var a=n("cbb4"),i=n.n(a);i.a},bf39:function(e,t,n){"use strict";var a=n("390b"),i=n.n(a);i.a},caad:function(e,t,n){"use strict";var a=n("23e7"),i=n("4d64").includes,r=n("44d2"),o=n("ae40"),c=o("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!c},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},cbb4:function(e,t,n){},cf46:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vxe-grid",{ref:e.tableName+"Table",staticClass:"vxe-table-element",attrs:{"row-style":e.rowStyle,"header-row-style":e.headerStyle,resizable:e.resizable,border:e.border,"show-header":e.showHeader,"auto-resize":e.autoResize,"header-align":e.headerAlign,"show-footer":e.showFooter,"show-footer-overflow":e.showFooterOverflow,"show-overflow":e.showOverflow,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"remote-sort":!0,"highlight-hover-row":e.highlightHoverRow,"highlight-current-row":e.highlightCurrentRow,loading:e.tableLoading,"tooltip-config":e.tooltipConfig,"keep-source":e.keepSource,"edit-config":e.editConfig,columns:e.tableColumns,data:e.tableDatas,"checkbox-config":e.checkboxConfig,"radio-config":{trigger:"row"},"seq-config":{startIndex:(e.tablePage.currentPage-1)*e.tablePage.pageSize},"pager-config":e.tablePage,"span-method":e.mergeRowMethod,"export-config":{cellRender:e.handleCellRender}},on:{"cell-click":e.cellClickEvent,"cell-dblclick":e.cellDBLClickEvent,"page-change":e.handlePageChange,"sort-change":e.sortChange,"checkbox-change":e.checkboxChangeEvent,"checkbox-all":e.checkboxChangeEvent,"current-change":e.currentChangeEvent},scopedSlots:e._u([{key:"pager_left",fn:function(){return[n("div",{staticClass:"page-left"},[n("div",[e._t("tableOperation")],2)])]},proxy:!0}],null,!0)})],1)},i=[],r=(n("4de4"),n("caad"),n("a9e3"),n("2532"),{props:{rowStyle:{type:Function},headerStyle:{type:Function},resizable:{type:Boolean,default:!0},tableName:{type:String,required:!0},showHeader:{type:Boolean,default:!0},border:{type:[Boolean,String],default:!0},autoResize:{type:Boolean,default:!0},headerAlign:{type:String,default:"center"},showFooter:{type:Boolean,default:!1},showFooterOverflow:{type:[Boolean,String],default:"tooltip"},showOverflow:{type:[Boolean,String],default:"tooltip"},stripe:{type:Boolean,default:!0},maxHeight:{type:[Number,String],default:""},height:{type:[Number,String],default:"500px"},size:{type:String,default:"small"},highlightHoverRow:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!1},tableLoading:{type:Boolean,default:!1},tooltipConfig:{type:Object,default:function(){return{theme:"light",enterable:!0}}},checkboxConfig:{type:Object,default:function(){return{}}},exportConfig:{type:Object,default:function(){return{}}},keepSource:{type:Boolean,default:!1},editConfig:{type:[Boolean,Object],default:!1},tableDatas:{type:Array,required:!0},tableColumns:{type:Array,required:!0},tablePage:{type:Object,required:!0},checkRecords:{type:Array,default:function(){return[]}}},data:function(){return{isAllChecked:!1,isIndeterminate:!1,selectRecords:[],mergeArr:[]}},watch:{checkRecords:function(e,t){0===e.length&&this.checkboxChangeEvent([])}},methods:{handleCellRender:function(e){var t=e.row,n=e.column,a=e.cellValue;return console.log(666,t,n,a),{style:"color: red;"}},handlePageChange:function(e){var t=e.currentPage,n=e.pageSize;this.isAllChecked=!1,this.selectRecords=[],this.$emit("onTablePageChange",t,n)},sortChange:function(e){e.column;var t=e.property,n=e.order;console.log(666),this.isAllChecked=!1,this.selectRecords=[],this.$emit("sortChange",t,n)},checkboxChangeEvent:function(e){var t=e.records;this.isAllChecked=this.$refs[this.tableName+"Table"].isAllCheckboxChecked(),this.isIndeterminate=this.$refs[this.tableName+"Table"].isCheckboxIndeterminate(),t?this.selectRecords=t:(this.selectRecords=[],this.isIndeterminate=!1),0===this.selectRecords.length&&(this.isAllChecked=!1),this.$emit("chooseCheck",t)},changeAllEvent:function(){this.$refs[this.tableName+"Table"].setAllCheckboxRow(this.isAllChecked),this.selectRecords=this.$refs[this.tableName+"Table"].getCheckboxRecords(),0===this.selectRecords.length&&(this.isAllChecked=!1),this.$emit("chooseCheck",this.selectRecords)},exportData:function(e,t,n){console.log(n);var a={isColgroup:!0,filename:e,useStyle:!0,type:"xlsx",columns:n.filter((function(e){return console.log(e),""!==e.field})),data:t};this.$refs[this.tableName+"Table"].exportData(a)},exportDatax:function(e,t,n){console.log(n);var a={isColgroup:!0,filename:e,useStyle:!0,type:"csv",data:t};n&&(a.columnFilterMethod=function(e){return n.includes(e.property)}),this.$refs[this.tableName+"Table"].exportData(a)},cellClickEvent:function(e){var t=e.row;this.$emit("clickRows",t)},cellDBLClickEvent:function(e){var t=e.row;this.$emit("dbclickRows",t)},currentChangeEvent:function(e){var t=e.row,n=this.$refs[this.tableName+"Table"].$getRowIndex(t);this.$emit("currentChangeEvent",t,n)},setCurrentRow:function(e){this.$refs[this.tableName+"Table"].setCurrentRow(this.tableDatas[e])},clearCurrentRow:function(){this.$refs[this.tableName+"Table"].clearCurrentRow()},toggleCheckboxRow:function(e){this.$refs[this.tableName+"Table"].toggleCheckboxRow(e)},clearCheckboxRow:function(){this.$refs[this.tableName+"Table"].clearCheckboxRow()},getCheckboxRecords:function(){return this.$refs[this.tableName+"Table"].getCheckboxRecords()},getRadioRecord:function(){return this.$refs[this.tableName+"Table"].getRadioRecord()},setCheckboxRow:function(e,t){return this.$refs[this.tableName+"Table"].setCheckboxRow(e,t)},mergeRowMethod:function(e){var t=e.row,n=e.$rowIndex,a=e.column,i=e.data,r=this.mergeArr;if(this.mergeArr.length>0){var o=t[a.property];if(o&&r.includes(a.property)){var c=t[r[0]],s=i[n-1],l=i[n+1];if(s&&s[a.property]===o&&s[r[0]]===c)return{rowspan:0,colspan:0};var u=1;while(l&&l[a.property]===o&&l[r[0]]===c)l=i[++u+n];if(u>1)return{rowspan:u,colspan:1}}}}}}),o=r,c=(n("bf39"),n("2877")),s=Object(c["a"])(o,a,i,!1,null,"00902082",null);t["a"]=s.exports},e9bc:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return h})),n.d(t,"g",(function(){return d}));var a=n("b775"),i=function(e,t){return Object(a["k"])("webReportStatistics/getDeviceStateReportStatistics.action?",e,t)},r=function(e,t){return Object(a["k"])("existFunctionUpdate/getDeviceStateReportStatistics.action?",e,t)},o=function(e,t){return Object(a["k"])("webReportStatistics/getDeviceHoursEffTrend.action?",e,t)},c=function(e,t){return Object(a["k"])("webReportStatistics/getDeviceHoursProductCycleTrend.action?",e,t)},s=function(e,t){return Object(a["k"])("deviceLive/getOneDayDetailStateClock.action?",e,t)},l=function(e,t){return Object(a["k"])("webReportStatistics/deviceGanttChart.action?",e,t)},u=function(e,t){return Object(a["k"])("deviceIdle/getIdleProductReport.action?",e,t)},h=function(e,t){return Object(a["k"])("webProductionStatistics/getProductionCycleStatistics.action?",e,t)},d=function(e,t){return Object(a["k"])("configuration/getConfigurationByEnum.action?",e,t)}},f82c:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"m",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"l",(function(){return g})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return v}));n("7db0"),n("a15b"),n("d81d"),n("b0c0"),n("d3b7");var a=n("b85c"),i=n("53ca"),r=n("b775");function o(){return new Promise((function(e,t){r["i"].post("deviceGroup/getAllGroupAndDevice.action").then((function(t){for(var n=0;n<t.data.rows.length;n++)t.data.rows[n].code&&(t.data.rows[n].id=t.data.rows[n].code);t.data.rows=h(t.data.rows),e(t.data)})).catch((function(e){t(e.data)}))}))}function c(){return new Promise((function(e,t){r["i"].post("deviceWorkshopType/getTree.action").then((function(t){t.data.rows=h(t.data.rows),e(t.data)})).catch((function(e){t(e.data)}))}))}function s(){return new Promise((function(e,t){r["i"].post("deviceGroup/getListGroupAndProductionLine.action").then((function(t){t.data.rows=h(t.data.rows),e(t.data)})).catch((function(e){t(e.data)}))}))}function l(){return new Promise((function(e,t){r["i"].post("deviceGroup/getTree.action?").then((function(t){t.data.rows=h(t.data.rows),e(t.data)})).catch((function(e){t(e.data)}))}))}function u(){return new Promise((function(e,t){r["i"].post("materialsType/getTree.action?").then((function(t){t.data.rows?t.data.rows=h(t.data.rows):t.data.rows=[],e(t.data)})).catch((function(e){t(e.data)}))}))}function h(e){var t=e;for(var n in t)t[n].value=t[n].id,t[n].label=t[n].name;for(var a=[],i={},r=0,o=t.length;r<o;r++)i[t[r].id]=t[r];for(r=0,o=t.length;r<o;r++){var c=i[t[r].pId];c?(c.children||(c.children=[]),c.children.push(t[r])):a.push(t[r])}return a}function d(e){var t=Array.isArray(e)?[]:{};if(e&&"object"===Object(i["a"])(e))for(var n in e)e.hasOwnProperty(n)&&(e[n]&&"object"===Object(i["a"])(e[n])?t[n]=this.deepClone(e[n]):t[n]=e[n]);return t}function f(e,t){var n=[];if(Array.isArray(e)&&Array.isArray(t)){if(e.length>0){var i,r=Object(a["a"])(e);try{var o=function(){var e=i.value,a=t.find((function(t){return t.field===e.field}));if(a){var r=Object.assign({},a,{minWidth:e.width,visible:e.visible,required:e.required});n.push(r)}};for(r.s();!(i=r.n()).done;)o()}catch(h){r.e(h)}finally{r.f()}t[1].type&&"checkbox"===t[1].type&&n.unshift(t[1]),t[0].type&&"radio"===t[0].type&&n.unshift(t[0]),t[0].type&&"checkbox"===t[0].type&&n.unshift(t[0]),console.log("7788",e,t,n);for(var c=0;c<t.length;c++)if(t[c].eType){for(var s=0,l=0;l<e.length;l++)t[c].field===e[l].field&&(s+=1);0===s&&n.push(t[c])}var u=t.length;return t[u-1].title&&"操作"===t[u-1].title&&n.push(t[u-1]),console.log("9999",n),n}return t}return[]}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={conditionJson1:e,operatorGroup:t,conditionJson2:n};return a}function p(e,t){return t.map((function(t,n){return e.map((function(e){return null==t[e]||""===t[e]?"-":t[e]}))}))}function b(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return a=a<10?"0"+a:a,i=i<10?"0"+i:i,[n,a,i].join("-")}function m(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return a=a<10?"0"+a:a,i=i<10?"0"+i:i,[n,a,i].join("-")+" 00:00:00"}function v(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return a=a<10?"0"+a:a,i=i<10?"0"+i:i,[n,a,i].join("-")+" 23:59:59"}}}]);
//# sourceMappingURL=chunk-a83ab264.920245fd.js.map