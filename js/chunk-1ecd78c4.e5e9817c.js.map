{"version":3,"sources":["webpack:///./src/views/kanban_hx/singleEfficency.vue?68cf","webpack:///src/views/kanban_hx/singleEfficency.vue","webpack:///./src/views/kanban_hx/singleEfficency.vue?6bd2","webpack:///./src/views/kanban_hx/singleEfficency.vue?a9b2","webpack:///./src/views/kanban_hx/singleEfficency.vue?4e61"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","searchData","searchOptions","on","search","loadData","$event","exportEchart","ref","staticStyle","exportTable","key","timers","_l","prop","index","style","width","_v","_s","title","colIndex","staticRenderFns","name","components","CardModule","searchBar","Header","data","yieldDeviceName","groupId","time","dataTime","tableHeight","groupValue","date","timeKeyEnum","pageConfig","total","currentPage","pageSize","align","pageSizes","layouts","perfect","tableData","tableColumns","actualTableData","OKTableData","NGTableData","yieldTableData","kanbanConfig","yieldXData","yieldData","planYield","coatingData","barChartInfo","current","size","maintainAnalyse","timer","yiledKey","mounted","document","documentElement","fontSize","window","onresize","setInterval","created","that","getGroupLineDevice","destroyed","clearInterval","methods","multiHeader","header","filename","merges","clientWidth","num","showLogo","logo","getUrlKeyMain","drawYieldChart","tooltip","trigger","axisPointer","type","formatter","relVal","params","i","l","length","legend","show","top","textStyle","color","grid","left","right","bottom","containLabel","xAxis","yAxis","series","YieldChart","setOption","option","addEventListener","resize","getYieldChartData","getYieldConfig","component"],"mappings":"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","file":"js/chunk-1ecd78c4.e5e9817c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"kanban\"},[_c('Header',{attrs:{\"titleName\":\"设备产能能效统计\"}}),_c('search-bar',{attrs:{\"searchData\":_vm.searchData,\"searchOptions\":_vm.searchOptions},on:{\"search\":_vm.search,\"getGroupSucceed\":_vm.loadData}}),_c('div',{staticClass:\"kanbanContent\"},[_c('div',{staticClass:\"top_content\"},[_c('card-module',{attrs:{\"title\":\"稼动率\",\"isExport\":false,\"cardBg\":\"cardBg_large\",\"titleBg\":\"cardTitle_large\",\"width\":\"100%\",\"height\":\"100%\",\"titleWidth\":\"70%\"},on:{\"exportExcel\":function($event){return _vm.exportEchart()}}},[_c('div',{ref:\"yieldChart\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"}})])],1),_c('div',{staticClass:\"bottom_content\"},[_c('card-module',{attrs:{\"title\":\"产能统计\",\"isExport\":false,\"cardBg\":\"cardBg_large\",\"titleBg\":\"cardTitle_large\",\"width\":\"100%\",\"height\":\"100%\",\"titleWidth\":\"70%\"},on:{\"exportExcel\":_vm.exportTable}},[_c('div',{staticClass:\"warn_list\"},[_c('div',{ref:\"warnContent\",staticClass:\"warn_content\"},[_c('table',{key:_vm.timers,staticClass:\"tableHead\",attrs:{\"cellpadding\":\"0\",\"cellspacing\":\"0\",\"width\":\"100%\"}},[_c('thead',[_c('tr',_vm._l((_vm.tableColumns),function(prop,index){return _c('td',{key:index,style:({ width: prop.width + 'px' })},[_vm._v(_vm._s(prop.title))])}),0)]),_c('tbody',[_c('tr',_vm._l((_vm.actualTableData),function(prop,colIndex){return _c('td',{key:colIndex,staticClass:\"active\",style:({ width: prop.width + 'px' })},[_vm._v(_vm._s(prop.title))])}),0),_c('tr',_vm._l((_vm.OKTableData),function(prop,colIndex){return _c('td',{key:colIndex,staticClass:\"active\",style:({ width: prop.width + 'px' })},[_vm._v(_vm._s(prop.title))])}),0)])])])])])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"kanban\">\n    <Header titleName=\"设备产能能效统计\"></Header>\n    <search-bar @search=\"search\" :searchData=\"searchData\"\n      :searchOptions=\"searchOptions\" @getGroupSucceed=\"loadData\"></search-bar>\n    <div class=\"kanbanContent\">\n      <div class=\"top_content\">\n        <card-module title=\"稼动率\" :isExport=\"false\" cardBg=\"cardBg_large\" titleBg=\"cardTitle_large\" width=\"100%\" height=\"100%\"\n          titleWidth=\"70%\" @exportExcel=\"exportEchart()\">\n          <div style=\"width: 100%; height: 100%\" ref=\"yieldChart\"></div>\n        </card-module>\n      </div>\n      <div class=\"bottom_content\">\n        <card-module title=\"产能统计\" :isExport=\"false\" cardBg=\"cardBg_large\" titleBg=\"cardTitle_large\" width=\"100%\" height=\"100%\"\n          titleWidth=\"70%\" @exportExcel=\"exportTable\">\n          <!-- <VXETable id=\"myTable\" :height=\"200\" tableName=\"\" :tableDatas=\"tableData\" :tableColumns=\"tableColumns\"\n        :tablePage=\"pageConfig\" ref=\"xGrid\"></VXETable> -->\n          <div class=\"warn_list\">\n            <div class=\"warn_content\" ref=\"warnContent\">\n              <table :key=\"timers\" cellpadding=\"0\" cellspacing=\"0\" class=\"tableHead\" width=\"100%\">\n                <thead>\n                  <tr>\n                    <td v-for=\"(prop, index) in tableColumns\" :key=\"index\" :style=\"{ width: prop.width + 'px' }\">{{\n                      prop.title }}</td>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr>\n                    <td v-for=\"(prop, colIndex) in actualTableData\" :key=\"colIndex\" :style=\"{ width: prop.width + 'px' }\"\n                      class=\"active\">{{ prop.title }}</td>\n                  </tr>\n                  <tr>\n                    <td v-for=\"(prop, colIndex) in OKTableData\" :key=\"colIndex\" :style=\"{ width: prop.width + 'px' }\"\n                      class=\"active\">{{ prop.title }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </card-module>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import $ from 'jquery';\nimport { fontSize } from '@/utils/common';\nimport { KANBAN_CONFIG } from '@/utils/ajaxConfigure';\n// import VXETable from '@/components/common/Table.vue';\nimport CardModule from '@/components/common/kanban/CardModule';\nimport searchBar from './components/searchBar.vue';\nimport Header from '@/components/common/kanban/Header';\nimport { exportJson2Excel } from '@/utils/exportExcel';\nimport { STATUS_CODE } from '@/utils/constantsFile';\nimport { dataFormatter } from '@/utils/publicFunction';\nimport { getSearchToday } from '@/utils/publicFunction2';\n// import { prodChartYield } from '@/api/xwReport';\nimport { getDeviceTimeFluctuationRate, getDeviceTimeCapacityAndEnergyEfficiency, getConfigurationByEnum, getAllGroupAndDeviceOpenApi } from '@/api/kanban';\nexport default {\n  name: 'kanban_xw_DTplato',\n  components: {\n    // vueSeamlessScroll,\n    // VXETable,\n    CardModule,\n    searchBar,\n    Header\n  },\n  data() {\n    return {\n      timers: '',\n      yieldDeviceName: '裁切检测包装机25305-1',\n      title: '',\n      groupId: 0,\n      time: '',\n      dataTime: '',\n      tableHeight: 180,\n      searchData: {\n        groupValue: [1, 6, 7, '00000165_00000001'],\n        // date: [],\n        date: [getSearchToday(15) + ' 00:00:00', getSearchToday(0) + ' 23:59:59'],\n        timeKeyEnum: 'DAY'\n      },\n      pageConfig: {\n        total: 0,\n        currentPage: 1,\n        pageSize: 20,\n        align: 'right',\n        pageSizes: [10, 20, 50, 100, 200, 500],\n        layouts: ['Sizes', 'PrevPage', 'Number', 'NextPage', 'Total'],\n        perfect: true\n      },\n      searchOptions: [\n        {\n          type: 'cascader',\n          key: 'groupValue',\n          options: []\n        },\n        {\n          type: 'daterange',\n          key: 'date',\n          options: [\n            {\n              label: '日',\n              value: 'DAY'\n            },\n            {\n              label: '周',\n              value: 'WEEK'\n            },\n            {\n              label: '月',\n              value: 'MONTH'\n            }\n          ]\n        }\n      ],\n      tableData: [],\n      tableColumns: [],\n      actualTableData: [],\n      OKTableData: [],\n      NGTableData: [],\n      yieldTableData: [],\n      kanbanConfig: { title: '', key: '', time: 15000 },\n      yieldXData: [],\n      yieldData: [],\n      planYield: [],\n      coatingData: {},\n      barChartInfo: {\n        current: 1,\n        size: 4\n      },\n      maintainAnalyse: {\n        current: 1,\n        size: 4\n      },\n      timer: null,\n      yiledKey: '产量'\n    };\n  },\n  mounted() {\n    document.documentElement.style.fontSize = this.fontSize() + 'px';\n    window.onresize = () => {\n      document.documentElement.style.fontSize = this.fontSize() + 'px';\n    };\n    // this.tableHeight = this.$refs.warnContent.clientHeight - 20;\n    this.loadData();\n    this.timer = setInterval(() => {\n      this.loadData();\n    }, 1000 * 60 * 60);\n  },\n  created() {\n    var that = this;\n    if (KANBAN_CONFIG[this.getUrlKeyMain('cid', window.location.href)]) {\n      that.kanbanConfig =\n        KANBAN_CONFIG[this.getUrlKeyMain('cid', window.location.href)];\n    }\n    this.getGroupLineDevice();\n  },\n  destroyed() {\n    this.timer && clearInterval(this.timer);\n  },\n  methods: {\n    exportEchart() {\n      const multiHeader = [];\n      exportJson2Excel({\n        multiHeader,\n        header: ['', ...this.yieldXData],\n        data: [['良品率', ...this.yieldData], ['计划良率', ...this.planYield]],\n        filename: this.yieldDeviceName + '-' + '良率推移图报表',\n        merges: []\n      });\n    },\n    exportTable() {\n      const multiHeader = [];\n      const header = [...this.tableColumns.map(item => item.title)];\n      // const filterVal = this.tableColumns.map(item => item.title);\n      const data = [\n        [...this.actualTableData.map(item => item.title)], [...this.OKTableData.map(item => item.title)], [...this.NGTableData.map(item => item.title)], [...this.yieldTableData.map(item => item.title + '%')]\n      ];\n      exportJson2Excel({\n        multiHeader,\n        header,\n        data,\n        filename: this.yieldDeviceName + '-' + '良率报表',\n        merges: []\n      });\n    },\n    // 获取 车间 —— 产线 —— 设备\n    async getGroupLineDevice() {\n      try {\n        var param = {\n          isProductionDevice: 1\n        };\n        const res = await getAllGroupAndDeviceOpenApi(param, { secretKey: this.kanbanConfig.key });\n        for (var i = 0; i < res.rows.length; i++) {\n          if (res.rows[i].code) {\n            res.rows[i].id = res.rows[i].code;\n          }\n        }\n        res.rows = dataFormatter(res.rows);\n        this.searchOptions[0].options = res.rows;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    fontSize(num = 10) {\n      const clientWidth =\n        window.innerWidth ||\n        document.documentElement.clientWidth ||\n        document.body.clientWidth;\n      if (!clientWidth) return;\n      const fontSize = clientWidth / 1920;\n      return num * fontSize;\n    },\n    showLogo() {\n      return 'logo_' + this.kanbanConfig.logo;\n    },\n    getUrlKeyMain(name, url) {\n      // eslint-disable-next-line no-sparse-arrays\n      return (\n        decodeURIComponent(\n          (new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(\n            url\n          ) || ['', ''])[1].replace(/\\+/g, '%20')\n        ) || null\n      );\n    },\n    // 获取稼动率统计\n    async getYieldChartData() {\n      // console.log(this.yieldDeviceName);\n      try {\n        const { timeKeyEnum, date, groupValue } = this.searchData;\n        const param = {\n          queryDateTypeEnum: timeKeyEnum,\n          startTime: date[0],\n          endTime: date[1]\n        };\n        if (groupValue) {\n          var str = groupValue[groupValue.length - 1];\n          param.deviceCode = str;\n        }\n        const res = await getDeviceTimeFluctuationRate(param, { secretKey: this.kanbanConfig.key });\n        if (res.code === STATUS_CODE.OPERATION_SUCCESS) {\n          const xData = [];\n          const data = [];\n          res.rows.forEach(item => {\n            xData.push(item.time.substr(5, 5));\n            data.push(item.value);\n          });\n          this.drawYieldChart(xData, data);\n        } else {\n          this.drawYieldChart([], []);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    // 获取产能统计\n    async getProductivityChartData() {\n      try {\n        const { timeKeyEnum, date, groupValue } = this.searchData;\n        const param = {\n          queryDateTypeEnum: timeKeyEnum,\n          startTime: date[0],\n          endTime: date[1]\n        };\n        if (groupValue) {\n          var str = groupValue[groupValue.length - 1];\n          param.deviceCode = str;\n        }\n        const res = await getDeviceTimeCapacityAndEnergyEfficiency(param, { secretKey: this.kanbanConfig.key });\n        if (res.code === STATUS_CODE.OPERATION_SUCCESS) {\n          // value 加工次数、 value2 用电量\n          const date = [];\n          const value = [];\n          const value2 = [];\n          res.rows.forEach(item => {\n            date.push({\n              title: item.time.substr(5, 5),\n              width: 80\n            });\n            value.push({\n              title: item.value,\n              width: 80\n            });\n            value2.push({\n              title: item.value2,\n              width: 80\n            });\n          });\n          this.tableColumns = [{\n            title: '日期',\n            width: 120\n          }, ...date];\n          this.actualTableData = [{\n            title: this.yiledKey,\n            width: 120\n          }, ...value];\n          this.OKTableData = [{\n            title: '用电量(KW.h)',\n            width: 120\n          }, ...value2];\n\n          // const date = [];\n          // const value = [];\n          // const value2 = [];\n          // res.rows.forEach(item => {\n          //   date.push({\n          //     title: item.time.substr(5, 5),\n          //     // width: 80,\n          //     field: item.time.substr(5, 5),\n          //     align: 'center'\n          //   });\n          //   value.push({\n          //     title: item.value,\n          //     width: 80\n          //   });\n          //   value2.push({\n          //     title: item.value2,\n          //     width: 80\n          //   });\n          // });\n          // this.tableColumns = [{\n          //   field: 'date',\n          //   title: '日期',\n          //   align: 'center'\n          // }, ...date];\n          // this.actualTableData = [{\n          //   title: this.yiledKey,\n          //   width: 120\n          // }, ...value];\n          // this.OKTableData = [{\n          //   title: '用电量(KW.h)',\n          //   width: 120\n          // }, ...value2];\n        } else {}\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    // 稼动率\n    drawYieldChart(xData, seriesData) {\n      const YieldChart = this.$echarts.init(this.$refs.yieldChart);\n      const option = {\n        // color: EQUIPMENT_STATUS_REPORT.COLOR,\n        // title: {\n        //   text: '',\n        //   textStyle: {\n        //     color: '#fff',\n        //     fontSize: 10\n        //   },\n        //   x: 'center',\n        //   padding: [1, 0],\n        //   left: '80%'\n        // },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            // 坐标轴指示器，坐标轴触发有效\n            type: 'line' // 默认为直线，可选为：'line' | 'shadow'\n          },\n          formatter(params) {\n            var relVal = params[0].name;\n            for (var i = 0, l = params.length; i < l; i++) {\n              // 遍历出来的值一般是字符串，需要转换成数字，再进项toFixed四舍五入\n              relVal +=\n                '<br/>' +\n                params[i].marker +\n                params[i].seriesName +\n                ' : ' +\n                Number(params[i].value).toFixed(2) +\n                '%';\n            }\n            return relVal;\n          }\n        },\n        legend: {\n          show: true,\n          top: '0%',\n          textStyle: {\n            color: '#ffffff',\n            fontSize: fontSize(16)\n          }\n        },\n        // barMaxWidth: '60%',\n        grid: {\n          top: '10%',\n          left: '3%',\n          right: '5%',\n          bottom: '15%',\n          containLabel: true\n        },\n        xAxis: [\n          {\n            type: 'category',\n            name: '日期',\n            data: xData,\n            axisTick: {\n              alignWithLabel: true\n            },\n            axisLine: {\n              lineStyle: {\n                color: '#929EE6'\n              }\n            },\n            axisLabel: {\n              fontSize: fontSize(18),\n              color: '#D8D8D8'\n            },\n            nameTextStyle: {\n              fontSize: fontSize(18)\n            }\n            // nameGap: '5'\n          }\n        ],\n        yAxis: [\n          {\n            type: 'value',\n            name: '稼动率',\n            // min: 95,\n            // minInterval: 1,\n            // splitNumber: 0.2,\n            axisLine: {\n              lineStyle: {\n                color: '#929EE6'\n              }\n            },\n            axisLabel: {\n              formatter: '{value}%',\n              fontSize: fontSize(18),\n              color: '#ffffff'\n            },\n            nameTextStyle: {\n              fontSize: fontSize(18)\n            },\n            splitLine: {\n              show: true,\n              lineStyle: {\n                type: 'dashed',\n                color: '#24ffff',\n                opacity: 0.5\n              }\n            }\n          }\n        ],\n        series: [\n          {\n            name: '稼动率',\n            type: 'line',\n            // yAxisIndex: 1,\n            // smooth: true,\n            showAllSymbol: true,\n            symbol: 'circle',\n            symbolSize: 10,\n            itemStyle: {\n              color: '#058cff'\n            },\n            lineStyle: {\n              color: '#058cff'\n            },\n            areaStyle: {\n              color: 'rgba(5,140,255, 0.2)'\n            },\n            label: {\n              normal: {\n                show: true,\n                formatter: function(params) {\n                  // 标签内容\n                  return params.value + '%';\n                },\n                position: 'top',\n                fontSize: fontSize(18),\n                color: '#ffffff'\n              }\n            },\n            data: seriesData\n          }\n        ]\n      };\n      YieldChart.setOption(option, true);\n      window.addEventListener('resize', () => {\n        YieldChart.resize();\n      });\n    },\n    // 获取生产配置\n    async getYieldConfig() {\n      try {\n        const condtion = {};\n        if (this.getUrlKeyMain('cid', window.location.href)) {\n          condtion.secretKey = this.kanbanConfig.key;\n        }\n        const data = await getConfigurationByEnum(\n          {\n            configurationTypeEnum: 'PRODUCTION_CONFIGURATION'\n          },\n          condtion\n        );\n        if (data.code === '0000') {\n          this.yiledKey = data.rows?.processConfiguration || '产量';\n        }\n      } catch (error) {\n        // showErrorNotify(TITLE.NOTIFY, error);\n      } finally {\n        this.getProductivityChartData();\n      }\n    },\n    search() {\n      this.loadData();\n    },\n    loadData() {\n      this.getYieldChartData();\n      this.getYieldConfig();\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ * {\n  box-sizing: border-box;\n}\n\n::-webkit-scrollbar {\n  width: 0px;\n}\n\n/* 这是针对缺省样式 (必须的) */\n::-webkit-scrollbar {\n  width: 0px;\n}\n\n/* 这是针对缺省样式 (必须的) */\n@font-face {\n  font-family: Vox-Regular2;\n  src: url('~@/assets/font/VOX_WIDE_BOLD.woff');\n}\n\n@font-face {\n  font-family: JLinXin;\n  src: url('~@/assets/font/JLinXin.woff');\n}\n\np {\n  margin: 0 0 0px;\n}\n\n.kanban {\n  height: 100%;\n  background: url('~@/assets/img/kanban/background.png') no-repeat;\n  background-size: 100% 100%;\n  overflow-y: hidden;\n  color: #fff;\n}\n\n.kanbanContent {\n  height: calc(100% - 15rem);\n  width: 100%;\n  padding: 0.5rem 1rem;\n\n  .top_content {\n    height: 60%;\n  }\n\n  .bottom_content {\n    display: flex;\n    justify-content: space-between;\n    height: 40%;\n\n    .warn_list {\n      height: 100%;\n      padding: 0 1rem;\n      overflow: hidden;\n\n      .warn_content {\n        height: 100%;\n        overflow: auto;\n\n        tr {\n          white-space: nowrap;\n        }\n        td {\n          display: inline-block;\n        }\n\n        // overflow: auto;\n        .tableHead {\n          width: 100%;\n          // height: 5rem;\n\n          thead tr {\n            height: 5rem;\n\n            td {\n              color: #24ffff;\n              font-size: 2rem;\n            }\n          }\n        }\n\n        table {\n          width: 100%;\n\n          tr {\n            height: 5rem;\n            padding-left: 2rem;\n\n            td {\n              // border: 1px solid rgb(22, 92, 177);\n              font-size: 2rem;\n              padding: 0 0.5rem;\n              text-align: center;\n            }\n          }\n\n          // tr:nth-child(even) .active {\n          //   background: rgba(14, 85, 244, 0.2);\n          // }\n          .lamp {\n            width: 5rem;\n          }\n        }\n      }\n    }\n  }\n}\n\n.logo {\n  position: absolute;\n  left: 0.5rem;\n  top: 0.5rem;\n  width: 12rem;\n  height: 3rem;\n  // background-image: url('~@/assets/img/kanban/logo.png');\n  background-size: 100% 100%;\n  background-repeat: no-repeat;\n}\n\n@media screen and (max-width: 1440px) {\n  html {\n    font-size: 9;\n  }\n}\n\n@media screen and (max-width: 1024px) {}\n\n@media screen and (max-width: 1000px) {}\n\n/deep/ .vxe-table--render-default.border--full .vxe-table--header-wrapper {\n  background-color: transparent;\n}\n\n/deep/ .vxe-header--row {\n  height: 46px !important;\n  background-color: transparent !important;\n}\n\n/deep/ .vxe-cell--title {\n  // color: #5faeff;\n  color: #ffffff;\n}\n\n/deep/ .vxe-cell--label {\n  color: #5faeff;\n}\n\n/deep/ .vxe-table--render-default .vxe-body--row.row--stripe {\n  // background-color: #011346 !important;\n  background-color: transparent !important;\n}\n\n/deep/ .vxe-table--render-default .vxe-body--row {\n  // background-color: #011346 !important;\n  background-color: transparent !important;\n\n  // .vxe-cell--label {\n  //   color: #ffffff;\n  // }\n}\n\n/deep/ .vxe-table--render-default .vxe-table--body-wrapper {\n  // background-color: #011346 !important;\n  background-color: transparent !important;\n}\n\n/deep/ .vxe-pager {\n  color: #409eff;\n}\n\n/deep/ .vxe-pager.is--perfect {\n  // border: none;\n  border-color: #0871dc;\n  // background-color: #011346;\n  background-color: transparent;\n}\n\n/deep/ .vxe-pager.is--perfect .vxe-pager--num-btn:not(.is--disabled).is--active {\n  color: #fff;\n  background-color: #0871dc;\n  border-color: #0871dc;\n}\n\n/deep/ .vxe-pager.is--perfect .vxe-pager--num-btn {\n  background-color: #011346;\n}\n\n/deep/ .vxe-pager.is--perfect:not(.is--background) .vxe-pager--num-btn {\n  border-color: #0871dc;\n}\n\n/deep/ .vxe-pager.is--perfect:not(.is--background) .vxe-pager--next-btn {\n  border-color: #0871dc !important;\n}\n\n/deep/ .vxe-pager.is--perfect .vxe-pager--next-btn {\n  background-color: #011346 !important;\n}\n\n/deep/ .vxe-pager.is--perfect:not(.is--background) .vxe-pager--prev-btn {\n  border-color: #0871dc !important;\n}\n\n/deep/ .vxe-pager.is--perfect .vxe-pager--prev-btn {\n  background-color: #011346 !important;\n}\n\n/deep/ .vxe-input--inner {\n  color: #409eff;\n  border: 1px solid #409eff;\n  background-color: #011346;\n}\n\n/deep/ .vxe-table.border--full .vxe-body--column {\n  background-image: linear-gradient(#409eff, #5faeff),\n    linear-gradient(#409eff, #409eff) !important;\n}\n\n/deep/ .vxe-table--render-default.border--full .vxe-header--column {\n  background-image: linear-gradient(#409eff, #5faeff),\n    linear-gradient(#409eff, #409eff) !important;\n}\n\n/deep/ .vxe-table--render-default .vxe-table--border-line {\n  border: 1px solid #409eff;\n}\n\n/deep/ .vxe-table .vxe-table--header-wrapper .vxe-table--header-border-line {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  height: 0;\n  border-bottom: 1px solid #409eff;\n}\n// 隐藏页码\n/deep/ .vxe-grid--pager-wrapper {\n  display: none;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleEfficency.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleEfficency.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./singleEfficency.vue?vue&type=template&id=9063db74&scoped=true&\"\nimport script from \"./singleEfficency.vue?vue&type=script&lang=js&\"\nexport * from \"./singleEfficency.vue?vue&type=script&lang=js&\"\nimport style0 from \"./singleEfficency.vue?vue&type=style&index=0&id=9063db74&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9063db74\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleEfficency.vue?vue&type=style&index=0&id=9063db74&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleEfficency.vue?vue&type=style&index=0&id=9063db74&lang=less&scoped=true&\""],"sourceRoot":""}