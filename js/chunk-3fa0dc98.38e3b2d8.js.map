{"version":3,"sources":["webpack:///./src/api/report.js","webpack:///./src/utils/notify.js","webpack:///./src/views/report/MaintenanceYear/index.vue?4114","webpack:///src/views/report/MaintenanceYear/index.vue","webpack:///./src/views/report/MaintenanceYear/index.vue?9bdc","webpack:///./src/views/report/MaintenanceYear/index.vue?9719","webpack:///./src/views/report/MaintenanceYear/index.vue?8c91","webpack:///./src/utils/publicFunction.js"],"names":["deviceRepairReportGetRepairTaskReport","param","jsonData","postAplicationJSON","deviceMaintainReportGetMaintainTaskReport","getDeviceMaintainTaskFinishReport","getMaintainTaskPlanReport","showErrorNotify","title","msg","Notification","error","message","duration","position","showClose","render","_vm","this","_h","$createElement","_c","_self","attrs","on","buttonClickEvent","refreshTableData","staticClass","_v","BTN_TEXT","TO","STARTTIME","ENDTIME","model","value","callback","$$v","dateTime","expression","staticStyle","$event","reset","ref","current","pageSize","total","pageChange","tableColumn","length","tableData","_e","staticRenderFns","name","components","inject","data","TITLE","searchList","searchData","conditionJson1","pickerOptions","disabledDate","getTime","savedSearchCondition","methods","console","log","type","findList","params","currentPage","refresh","draw","myChart","setOption","color","tooltip","trigger","toolbox","show","feature","saveAsImage","pixelRatio","grid","containLabel","top","bottom","left","right","legend","orient","itemGap","dataZoom","xAxis","axisLabel","formatter","index","arr","push","slice","maxLength","join","yAxis","splitLine","min","max","series","data1","showSymbol","lineStyle","width","data2","yAxisIndex","data3","data4","hourFormat","cellValue","toFixed","created","mounted","component","deviceWorkshopLineDeviceGetTreeFunc","Promise","resolve","reject","instance","post","then","res","i","rows","code","id","dataFormatter","catch","err","deviceWorkshopTypeGetTreeFunc","workshopAndLineGetTreeFunc","deviceGroupGetTreeFunc","materialTypeGetTreeFunc","treeArray","x","label","r","tmpMap","l","key","pId","children","deepClone","obj","objClone","Array","isArray","hasOwnProperty","mixDefaultAndCustomColumns","customSetting","defaultColumns","mixedColumns","item","defaultColumn","find","column","field","mixedColumn","Object","assign","minWidth","visible","required","unshift","eType","flag","j","searchCondetionFunc","conditionArr1","groupOperator","conditionArr2","conditionJson","operatorGroup","conditionJson2","formatJson","filterKeys","map","getTimeFunc","date","Date","y","getFullYear","m","getMonth","d","getDate","getTodayFirstDay","getTodayLastDay"],"mappings":"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","file":"js/chunk-3fa0dc98.38e3b2d8.js","sourcesContent":["/*\r\n * @Descripttion: api接口\r\n * @version:\r\n * @Author: ZJM\r\n * @Date: 2020-04-28 21:50:07\r\n * @LastEditors: y-takeon 1756513062@qq.com\r\n * @LastEditTime: 2022-10-07 18:16:22\r\n */\r\nimport { postAplicationJSON } from '@/utils/request';\r\n\r\nexport const deviceRepairReportGetRepairTaskReport = (param, jsonData) => postAplicationJSON('deviceRepairReport/getRepairTaskReport.action?', param, jsonData);\r\n\r\nexport const deviceMaintainReportGetMaintainTaskReport = (param, jsonData) => postAplicationJSON('deviceMaintainReport/getMaintainTaskReport.action?', param, jsonData);\r\n\r\n// 保养年度统计报表\r\nexport const getDeviceMaintainTaskFinishReport = (param, jsonData) => postAplicationJSON('deviceMaintainReport/getDeviceMaintainTaskFinishReport.action?', param, jsonData);\r\n\r\n// 保养计划报表\r\nexport const getMaintainTaskPlanReport = (param, jsonData) => postAplicationJSON('deviceMaintainReport/getMaintainTaskPlanReport.action?', param, jsonData);\r\n","/*\r\n * @Description: 消息通知的方法，包括提示成功信息、警告信息和错误信息\r\n * @Version: 1.0\r\n * @Author: ZJM\r\n * @LastEditors: ZJM\r\n * @LastEditTime: 2020-05-20 10:15:27\r\n */\r\nimport { Notification } from 'element-ui';\r\n\r\n/**\r\n * @description: 提示成功通知\r\n * @param {string} title 通知标题\r\n * @param {string} msg 通知内容\r\n * @return: void\r\n */\r\nexport function showSuccessNotify(title, msg) {\r\n  Notification.success({\r\n    title: title,\r\n    message: msg,\r\n    duration: 2000,\r\n    position: 'bottom-right',\r\n    showClose: true\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 提示消息通知\r\n * @param {string} title 通知标题\r\n * @param {string} msg 通知内容\r\n * @return: void\r\n */\r\nexport function showInfoNotify(title, msg) {\r\n  Notification.info({\r\n    title: title,\r\n    message: msg,\r\n    duration: 2000,\r\n    position: 'bottom-right',\r\n    showClose: true\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 提示警告通知\r\n * @param {string} title 通知标题\r\n * @param {string} msg 通知内容\r\n * @return: void\r\n */\r\nexport function showWarningNotify(title, msg) {\r\n  Notification.warning({\r\n    title: title,\r\n    message: msg,\r\n    duration: 2000,\r\n    position: 'bottom-right',\r\n    showClose: true\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 提示错误通知\r\n * @param {string} title 通知标题\r\n * @param {string} msg 通知内容\r\n * @return: void\r\n */\r\nexport function showErrorNotify(title, msg) {\r\n  Notification.error({\r\n    title: title,\r\n    message: msg,\r\n    duration: 2000,\r\n    position: 'bottom-right',\r\n    showClose: true\r\n  });\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-header',[_c('header-buttons',{attrs:{\"showRefresh\":true,\"cssType\":\"1\"},on:{\"buttonClickEvent\":_vm.buttonClickEvent}})],1),_c('header-search',{attrs:{\"show-primary-search\":true,\"cssType\":\"1\"},on:{\"refreshTableData\":_vm.refreshTableData}}),_c('el-main',{staticClass:\"view eq\"},[_c('div',{staticClass:\"searchDiv\"},[_c('span',[_vm._v(\"时间范围\")]),_c('el-date-picker',{staticClass:\"dateTime\",attrs:{\"clearable\":false,\"type\":\"datetimerange\",\"align\":\"left\",\"size\":\"mini\",\"unlink-panels\":\"\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"range-separator\":_vm.BTN_TEXT.TO,\"start-placeholder\":_vm.BTN_TEXT.STARTTIME,\"end-placeholder\":_vm.BTN_TEXT.ENDTIME,\"default-time\":['00:00:00', '23:59:59']},model:{value:(_vm.dateTime),callback:function ($$v) {_vm.dateTime=$$v},expression:\"dateTime\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"type\":\"default\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.reset()}}},[_vm._v(\"查询\")])],1),_c('el-row',{staticClass:\"tableShow yearStatistics\"},[_c('el-col',{staticClass:\"echartsWra\",attrs:{\"span\":24}},[_c('div',{ref:\"statisticalEchart\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"}})]),_c('el-col',{attrs:{\"span\":24}},[_c('vxe-pager',{attrs:{\"align\":\"right\",\"current-page\":_vm.current,\"page-size\":_vm.pageSize,\"total\":_vm.total,\"layouts\":[\n              'Sizes',\n              'PrevJump',\n              'PrevPage',\n              'Number',\n              'NextPage',\n              'NextJump',\n              'FullJump',\n              'Total'\n            ],\"page-sizes\":[5,10,25,100],\"border\":\"\",\"perfect\":\"\"},on:{\"update:currentPage\":function($event){_vm.current=$event},\"update:current-page\":function($event){_vm.current=$event},\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event},\"page-change\":_vm.pageChange}})],1),(_vm.tableColumn.length > 1)?_c('el-col',{attrs:{\"span\":24}},[_c('vxe-grid',{ref:\"xGrid\",staticClass:\"reverse-table\",attrs:{\"border\":\"\",\"show-overflow\":\"\",\"show-header-overflow\":\"tooltip\",\"highlight-hover-row\":\"\",\"show-header\":true,\"columns\":_vm.tableColumn,\"data\":_vm.tableData,\"cell-class-name\":\"grid-cell\"}})],1):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n * @Author: zhxy\n * @Date: 2021-08-12 09:06:16\n * @LastEditors: y-takeon 1756513062@qq.com\n * @LastEditTime: 2022-10-11 17:34:17\n * @Description: file content\n-->\n<template>\n  <el-container>\n    <el-header>\n       <header-buttons :showRefresh=\"true\"  @buttonClickEvent=\"buttonClickEvent\" cssType=\"1\"></header-buttons>\n    </el-header>\n    <header-search\n        :show-primary-search=\"true\"\n        @refreshTableData=\"refreshTableData\"\n        cssType=\"1\"\n      >\n    </header-search>\n    <el-main class=\"view eq\">\n      <div class=\"searchDiv\" >\n        <span>时间范围</span>\n        <el-date-picker\n            :clearable=\"false\"\n            class=\"dateTime\"\n            v-model=\"dateTime\"\n            type=\"datetimerange\"\n            align=\"left\"\n            size=\"mini\"\n            unlink-panels\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\n            :range-separator=\"BTN_TEXT.TO\"\n            :start-placeholder=\"BTN_TEXT.STARTTIME\"\n            :end-placeholder=\"BTN_TEXT.ENDTIME\"\n            :default-time=\"['00:00:00', '23:59:59']\"\n          ></el-date-picker>\n          <el-button type=\"default\" style=\"margin-left:5px;\"  size=\"mini\" @click=\"reset()\" >查询</el-button>\n      </div>\n      <!-- main table -->\n      <el-row class=\"tableShow yearStatistics\">\n        <el-col :span=\"24\" class=\"echartsWra\">\n          <div style=\"width: 100%; height: 100%\" ref=\"statisticalEchart\"></div>\n        </el-col>\n        <el-col :span=\"24\">\n          <vxe-pager\n            align=\"right\"\n            :current-page.sync=\"current\"\n            :page-size.sync='pageSize'\n            :total=\"total\"\n            :layouts=\"[\n                'Sizes',\n                'PrevJump',\n                'PrevPage',\n                'Number',\n                'NextPage',\n                'NextJump',\n                'FullJump',\n                'Total'\n              ]\"\n            :page-sizes=\"[5,10,25,100]\"\n            border\n            @page-change=\"pageChange\"\n            perfect\n            >\n          </vxe-pager>\n        </el-col>\n        <el-col :span=\"24\" v-if=\"tableColumn.length > 1\">\n          <vxe-grid\n            border\n            show-overflow\n            show-header-overflow=\"tooltip\"\n            highlight-hover-row\n            class=\"reverse-table\"\n            :show-header=\"true\"\n            :columns=\"tableColumn\"\n            ref=\"xGrid\"\n            :data=\"tableData\"\n            cell-class-name='grid-cell'\n          ></vxe-grid>\n        </el-col>\n      </el-row>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\n/*\n * @Author: zhxy\n * @Date: 2021-08-12 09:05:28\n * @LastEditors: ZJM\n * @LastEditTime: 2022-05-22 14:28:53\n * @Description: file content\n */\n// import { CommonService } from '@/services/common.service';\n// 引入通用接口\nimport { searchCondetionFunc } from '@/utils/publicFunction';\n// 引入table组件\n// import VXETable from '@/components/common/Table';\nimport {\n  BTN_TEXT,\n  // EQUIPMENT_MANAGEMENT_REPORT,\n  // EQUIPMENT_STATUS_REPORT,\n  STATUS_CODE,\n  TITLE\n} from '@/utils/constantsFile';\n// message service\nimport { showWarningMessage } from '@/utils/message';\nimport { getDeviceMaintainTaskFinishReport } from '@/api/report.js';\n// 提示信息\nimport { showErrorNotify } from '@/utils/notify';\nimport { accMul } from '@/utils/common.js';\nexport default {\n  name: 'EquipmentStatus',\n  components: {\n  },\n  inject: ['reload'],\n  data() {\n    return {\n      BTN_TEXT: BTN_TEXT,\n      TITLE: TITLE,\n      total: 0,\n      pageSize: 10,\n      current: 1,\n      tableColumn: [],\n      tableData: [],\n      searchList: [],\n      searchData: {\n        conditionJson1: []\n      },\n      pickerOptions: {\n        disabledDate: (current) => {\n          return current.getTime() > this.moment(`${this.moment(Date.now()).format('YYYY-MM-DD')} 23:59:59`).format('x');\n        }\n      },\n      dateTime: [],\n      // 保存搜索内输入的搜索条件，防止翻页时变回无条件查询\n      savedSearchCondition: []\n    };\n  },\n  methods: {\n    // 按钮触发事件\n    buttonClickEvent(type) {\n      console.log(type);\n      this[`${type}`]();\n    },\n    reset() {\n      this.findList();\n    },\n    pageChange(params) {\n      if (params.type === 'size') {\n        this.current = params.currentPage;\n        this.pageSize = params.pageSize;\n      }\n      this.findList();\n    },\n    refresh() {\n      this.findList();\n    },\n    async findList() {\n      try {\n        var conditionJson = {\n          conditionJson1: [],\n          operatorGroup: 1,\n          conditionJson2: [],\n          current: this.current,\n          size: this.pageSize\n        };\n        if (this.savedSearchCondition.length > 0) {\n          conditionJson = {\n            ...searchCondetionFunc(...this.savedSearchCondition),\n            current: this.current,\n            size: this.pageSize\n          };\n        }\n\n        var param = {\n          startTime: '',\n          endTime: ''\n        };\n\n        if (this.dateTime) {\n          param.startTime = this.dateTime[0];\n          param.endTime = this.dateTime[1];\n        }\n\n        const data = await getDeviceMaintainTaskFinishReport(param, conditionJson);\n\n        if (data.code === STATUS_CODE.OPERATION_SUCCESS) {\n          console.log(data);\n          this.total = data.total;\n          const result = data.rows || [];\n          const echartData = {\n            xAxis: [],\n            data1: [],\n            data2: [],\n            data3: [],\n            data4: []\n          };\n          result.forEach(item => {\n            echartData.xAxis.push(item.deviceName);\n            echartData.data1.push(item.planCount);\n            echartData.data2.push(item.finishCount);\n            echartData.data3.push(accMul(item.achievementRate, 100));\n            echartData.data4.push(accMul(item.avgAchievementRate, 100));\n          });\n          this.draw(echartData);\n          const clumns = result.map(item => ({\n            field: String(item.deviceId),\n            title: item.deviceName,\n            width: '150',\n            align: 'center'\n          })) || [];\n          const baseColumn = [{\n            field: 'mode',\n            title: '',\n            width: '160',\n            align: 'center',\n            fixed: 'left'\n          }];\n          this.tableColumn = [...baseColumn, ...clumns];\n          const tableData = [{\n            mode: '预计计划保养次数'\n          },\n          {\n            mode: '实际累计保养次数'\n          },\n          {\n            mode: '实际保养完成率'\n          },\n          {\n            mode: '平均保养完成率'\n          }];\n          result.forEach(v => {\n            tableData[0][String(v.deviceId)] = v.planCount;\n            tableData[1][String(v.deviceId)] = v.finishCount;\n            tableData[2][String(v.deviceId)] = accMul(v.achievementRate, 100) + '%';\n            tableData[3][String(v.deviceId)] = accMul(v.avgAchievementRate, 100) + '%';\n          });\n          this.tableData = tableData;\n          console.log(tableData);\n        } else {\n          this.total = 0;\n          showWarningMessage(data.message);\n        }\n      } catch (error) {\n        showErrorNotify(TITLE.NOTIFY, error);\n      } finally {\n      }\n    },\n    draw(data) {\n      const myChart = this.$echarts.init(this.$refs.statisticalEchart);\n\n      myChart.setOption({\n        color: ['#55a2f0', '#0b4e92', '#3d5064', '#8e8b8b'],\n        tooltip: {\n          trigger: 'axis'\n          // axisPointer: {\n          //   type: 'cross',\n          //   crossStyle: {\n          //     color: '#999'\n          //   }\n          // }\n          // formatter: '{b0}<br/> {a0}: {c0}次 <br/>{a1}: {c1}次 <br/> {a2}: {c2}% <br/> {a3}: {c3}%'\n        },\n        toolbox: {\n          show: true,\n          feature: {\n            saveAsImage: {\n              show: true,\n              name: '保养年度统计',\n              title: '导出',\n              pixelRatio: 1,\n              type: 'png'\n            }\n          }\n        },\n        grid: {\n          containLabel: true,\n          top: '8%',\n          bottom: '12%',\n          left: '15%',\n          right: '2%'\n        },\n        legend: {\n          orient: 'vertical',\n          itemGap: 20,\n          top: '40%',\n          left: '3%'\n        },\n        dataZoom: [\n          {\n            type: 'slider',\n            // filterMode: 'weakFilter',\n            top: 'bottom'\n            // startValue: 0,\n            // endValue: 4\n          }\n        ],\n        xAxis: {\n          data: data.xAxis,\n          axisLabel: {\n            formatter: function(value) {\n              const maxLength = 9;\n              const arr = [];\n              let index = 0;\n              while (index < value.length) {\n                arr.push(value.slice(index, index += maxLength));\n              }\n              return arr.join('\\n');\n            }\n          }\n        },\n        yAxis: [{\n          type: 'value',\n          name: '',\n          splitLine: {\n            show: false\n          }\n        },\n        {\n          type: 'value',\n          name: '',\n          min: 0,\n          max: 100,\n          axisLabel: {\n            formatter: '{value}%'\n          },\n          splitLine: {\n            show: false\n          }\n        }],\n        series: [{\n          name: '预计计划保养次数',\n          type: 'bar',\n          // barWidth: '50%',\n          data: data.data1\n        },\n        {\n          name: '实际累计保养次数',\n          type: 'line',\n          showSymbol: false,\n          lineStyle: {\n            width: 4\n          },\n          data: data.data2\n        },\n        {\n          name: '实际保养完成率(%)',\n          type: 'line',\n          showSymbol: false,\n          yAxisIndex: 1,\n          lineStyle: {\n            width: 4\n          },\n          data: data.data3\n        },\n        {\n          name: '平均保养完成率(%)',\n          type: 'line',\n          showSymbol: false,\n          yAxisIndex: 1,\n          lineStyle: {\n            width: 4\n          },\n          data: data.data4\n        }]\n      });\n    },\n    hourFormat({ cellValue }) {\n      return (cellValue / 60).toFixed(2);\n    },\n    async exportTable() {\n      this.$refs.xGrid.exportData({\n        filename: '保养年度统计报表'\n      });\n    },\n    /**\n     * @description: 刷新表格数据\n     * @param 无\n     * @return void\n     * @author: cyb\n     */\n    refreshTableData(savedSearchCondition) {\n      if (savedSearchCondition) {\n        this.savedSearchCondition = [...savedSearchCondition];\n      }\n      this.findList();\n    }\n  },\n  created() {\n    const year = new Date().getFullYear();\n    this.dateTime = [\n    `${this.moment(new Date(year, 0, 1)).format('YYYY-MM-DD')} 00:00:00`,\n    `${this.moment(new Date()).format('YYYY-MM-DD')} 23:59:59`\n    ];\n    this.findList();\n  },\n  mounted() {\n  }\n};\n\n</script>\n<style lang=\"less\" scoped>\n.view {\n    line-height: normal;\n    background-color: white;\n    overflow: auto !important;\n  }\n  .tableShow{\n    height: calc(100% - 40px);\n    // margin-left:10px;\n    padding: 0 10px;\n\n    .echartsWra {\n      width: 100%;\n      height: calc(100% - 270px);\n      text-align: left;\n    }\n  }\n  .el-container{\n    height: calc(100vh - 90px) !important;\n    /deep/ .run{\n      color:#027df9;\n    }\n    /deep/ .free{\n      color:#fecf11;\n    }\n    /deep/ .offline{\n      color:#5a6167;\n    }\n    /deep/ .warn{\n      color:#c74746\n    }\n  }\n\n  .yearStatistics {\n    /deep/ .vxe-table .vxe-body--column.col--ellipsis {\n      height: 34px;\n    }\n    /deep/ .vxe-table .vxe-header--column:not(.col--ellipsis) {\n      padding: 6px 0;\n    }\n  }\n  .el-header {\n    height: 41px !important;\n    line-height: 40px;\n    width: 100%;\n    border-bottom: 1px solid #ddd;\n}\n.search-fixed{\n  text-align: center;\n  display: grid;\n  grid-template-columns: 1fr 80px 1fr;\n  grid-template-rows: repeat(1, 44px);\n  column-gap: 20px;\n  &>div>span{\n      display: inline-block;\n      min-width: 80px;\n      margin-right:20px;\n  }\n  .width-special{\n      display: inline-block;\n      text-align: left;\n  }\n}\n// 以下宽度用于让日期范围选择同search-box中的下拉框对齐\n@media screen and (min-width: 1440px) {\n  .width-special {\n    width: 370px;\n  }\n\n}\n@media screen and (min-width: 1680px) and (max-width: 1920px) {\n  .width-special {\n      width: 430px;\n    }\n}\n@media screen and (min-width: 1920px) {\n  .width-special {\n      width: 510px;\n    }\n}\n.searchDiv{\n  text-align: left;\n  padding: 5px;\n  span{\n    margin: 5px;\n  }\n}\n\n.vxe-pager.is--perfect{\n    border:none;\n    background-color: #fff;\n    /deep/ .vxe-input{\n        line-height: 30px;\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5ff679a5&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5ff679a5&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ff679a5\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5ff679a5&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5ff679a5&lang=less&scoped=true&\"","/*\r\n * @Descripttion: 多页面可用的封装通用接口\r\n * @version:\r\n * @Author: ZJM\r\n * @Date: 2020-04-28 15:05:45\r\n * @LastEditors: ZJM\r\n * @LastEditTime: 2022-07-26 10:33:39\r\n */\r\n// 导入数据序列化\r\n\r\nimport { instance } from '@/utils/request';\r\n\r\n/**\r\n * @description: 车间-产线-设备树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function deviceWorkshopLineDeviceGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('deviceGroup/getAllGroupAndDevice.action')\r\n      .then(res => {\r\n        // var resData = { ...res.data.rows };\r\n        for (var i = 0; i < res.data.rows.length; i++) {\r\n          if (res.data.rows[i].code) {\r\n            res.data.rows[i].id = res.data.rows[i].code;\r\n          }\r\n        }\r\n        // setTimeout(() => {\r\n        // console.log('666', res.data.rows);\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n        // }, 300);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 车间-产线-设备树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function deviceWorkshopLineDeviceGetTreeFuncOpenApi() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('open-api/TvBoard/device/getAllGroupAndDevice.action')\r\n      .then(res => {\r\n        // var resData = { ...res.data.rows };\r\n        for (var i = 0; i < res.data.rows.length; i++) {\r\n          if (res.data.rows[i].code) {\r\n            res.data.rows[i].id = res.data.rows[i].code;\r\n          }\r\n        }\r\n        // setTimeout(() => {\r\n        // console.log('666', res.data.rows);\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n        // }, 300);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 车间分组树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function deviceWorkshopTypeGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('deviceWorkshopType/getTree.action')\r\n      .then(res => {\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 车间-产线分组树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function workshopAndLineGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('deviceGroup/getListGroupAndProductionLine.action')\r\n      .then(res => {\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 设备类型树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function deviceGroupGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('deviceGroup/getTree.action?')\r\n      .then(res => {\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 物料类型树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function materialTypeGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('materialsType/getTree.action?')\r\n      .then(res => {\r\n        if (res.data.rows) {\r\n          res.data.rows = dataFormatter(res.data.rows);\r\n        } else {\r\n          res.data.rows = [];\r\n        }\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 返回数据格式化\r\n * @param data rows数据\r\n * @return: 格式化后数据\r\n * @author: ZJM\r\n */\r\nexport function dataFormatter(data) {\r\n  var treeArray = data;\r\n  for (var x in treeArray) {\r\n    treeArray[x].value = treeArray[x].id;\r\n    treeArray[x].label = treeArray[x].name;\r\n  }\r\n  var r = [];\r\n  var tmpMap = {};\r\n  for (var i = 0, l = treeArray.length; i < l; i++) {\r\n    tmpMap[treeArray[i].id] = treeArray[i];\r\n  }\r\n  for (i = 0, l = treeArray.length; i < l; i++) {\r\n    var key = tmpMap[treeArray[i].pId];\r\n    if (key) {\r\n      if (!key.children) {\r\n        key.children = [];\r\n        key.children.push(treeArray[i]);\r\n      } else {\r\n        key.children.push(treeArray[i]);\r\n      }\r\n    } else {\r\n      r.push(treeArray[i]);\r\n    }\r\n  }\r\n  return r;\r\n};\r\n\r\nexport function tableHeightFunc() {\r\n  return document.documentElement.clientHeight;\r\n};\r\n\r\n// 数据克隆\r\nexport function deepClone(obj) {\r\n  const objClone = Array.isArray(obj) ? [] : {};\r\n  if (obj && typeof obj === 'object') {\r\n    for (var key in obj) {\r\n      // eslint-disable-next-line no-prototype-builtins\r\n      if (obj.hasOwnProperty(key)) {\r\n        // 判断ojb子元素是否为对象，如果是，递归复制\r\n        if (obj[key] && typeof obj[key] === 'object') {\r\n          objClone[key] = this.deepClone(obj[key]);\r\n        } else {\r\n          // 如果不是，简单复制\r\n          objClone[key] = obj[key];\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return objClone;\r\n};\r\n\r\n/**\r\n * @description: 将自定义配置混入默认表头设置\r\n * @param {array} customSetting 后端返回的自定义列配置\r\n * @param {array} defaultColumns 前端写的默认列配置\r\n * @return {type} array\r\n * @author: cyb\r\n */\r\nexport function mixDefaultAndCustomColumns(customSetting, defaultColumns) {\r\n  const mixedColumns = [];\r\n  if (Array.isArray(customSetting) && Array.isArray(defaultColumns)) {\r\n    // 当自定义配置存在时\r\n    if (customSetting.length > 0) {\r\n      for (const item of customSetting) {\r\n        // 找到默认的列\r\n        const defaultColumn = defaultColumns.find(\r\n          column => column.field === item.field\r\n        );\r\n\r\n        if (defaultColumn) {\r\n          // 在默认列中混入自定义配置\r\n          const mixedColumn = Object.assign({}, defaultColumn, {\r\n            minWidth: item.width,\r\n            visible: item.visible,\r\n            required: item.required\r\n          });\r\n\r\n          mixedColumns.push(mixedColumn);\r\n        }\r\n      }\r\n\r\n      // 如果第一列是checkbox，则加入\r\n      if (defaultColumns[1].type && defaultColumns[1].type === 'checkbox') {\r\n        mixedColumns.unshift(defaultColumns[1]);\r\n      }\r\n      // 如果第一列是checkbox，则加入\r\n      if (defaultColumns[0].type && defaultColumns[0].type === 'radio') {\r\n        mixedColumns.unshift(defaultColumns[0]);\r\n      }\r\n      // 如果第一列是checkbox，则加入\r\n      if (defaultColumns[0].type && defaultColumns[0].type === 'checkbox') {\r\n        mixedColumns.unshift(defaultColumns[0]);\r\n      }\r\n\r\n      console.log('7788', customSetting, defaultColumns, mixedColumns);\r\n      for (var i = 0; i < defaultColumns.length; i++) {\r\n        if (defaultColumns[i].eType) {\r\n          var flag = 0;\r\n          for (var j = 0; j < customSetting.length; j++) {\r\n            if (defaultColumns[i].field === customSetting[j].field) {\r\n              flag += 1;\r\n            }\r\n          }\r\n          if (flag === 0) {\r\n            mixedColumns.push(defaultColumns[i]);\r\n          }\r\n        }\r\n      }\r\n\r\n      const length = defaultColumns.length;\r\n      // 如果最后一列是操作，则加入\r\n      if (\r\n        defaultColumns[length - 1].title &&\r\n        defaultColumns[length - 1].title === '操作'\r\n      ) {\r\n        mixedColumns.push(defaultColumns[length - 1]);\r\n      }\r\n      console.log('9999', mixedColumns);\r\n      return mixedColumns;\r\n    } else {\r\n      return defaultColumns;\r\n    }\r\n  } else {\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * 复杂查询通用方法\r\n */\r\nexport function searchCondetionFunc(conditionArr1 = [], groupOperator = 1, conditionArr2 = []) {\r\n  const conditionJson = {\r\n    conditionJson1: conditionArr1,\r\n    operatorGroup: groupOperator,\r\n    conditionJson2: conditionArr2\r\n  };\r\n  return conditionJson;\r\n}\r\n\r\n/**\r\n * xlsx 导出所需的数据\r\n * @param { Array } filterKeys\r\n * @param { Array } jsonData\r\n */\r\n\r\n// Format and filter json data using filterKeys array\r\nexport function formatJson(filterKeys, jsonData) {\r\n  return jsonData.map((data, index) => filterKeys.map(key => {\r\n    if (data[key] == null || data[key] === '') {\r\n      return '-';\r\n    } else {\r\n      return data[key];\r\n    }\r\n  }));\r\n}\r\n\r\n// 格式转换\r\nexport function getTimeFunc(param) {\r\n  var date = new Date(param);\r\n  var y = date.getFullYear(); // 获取年份\r\n  var m = date.getMonth() + 1; // 获取月份\r\n  var d = date.getDate(); // 获取当月最后一日\r\n  m = m < 10 ? '0' + m : m; // 月份补 0\r\n  d = d < 10 ? '0' + d : d; // 日数补 0\r\n\r\n  return [y, m, d].join('-');\r\n}\r\n\r\nexport function getTodayFirstDay(param) {\r\n  var date = new Date(param);\r\n  var y = date.getFullYear(); // 获取年份\r\n  var m = date.getMonth() + 1; // 获取月份\r\n  var d = date.getDate(); // 获取当月最后一日\r\n  m = m < 10 ? '0' + m : m; // 月份补 0\r\n  d = d < 10 ? '0' + d : d; // 日数补 0\r\n\r\n  return [y, m, d].join('-') + ' 00:00:00';\r\n}\r\n\r\n// 当日最晚时间\r\nexport function getTodayLastDay(param) {\r\n  var date = new Date(param);\r\n  var y = date.getFullYear(); // 获取年份\r\n  var m = date.getMonth() + 1; // 获取月份\r\n  var d = date.getDate(); // 获取当月最后一日\r\n  m = m < 10 ? '0' + m : m; // 月份补 0\r\n  d = d < 10 ? '0' + d : d; // 日数补 0\r\n\r\n  return [y, m, d].join('-') + ' 23:59:59';\r\n}\r\n"],"sourceRoot":""}