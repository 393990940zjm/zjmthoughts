(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dd5b574"],{"07ac":function(e,t,n){var a=n("23e7"),r=n("6f53").values;a({target:"Object",stat:!0},{values:function(e){return r(e)}})},"13d5":function(e,t,n){"use strict";var a=n("23e7"),r=n("d58f").left,i=n("a640"),o=n("ae40"),c=i("reduce"),u=o("reduce",{1:0});a({target:"Array",proto:!0,forced:!c||!u},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"276d":function(e,t,n){"use strict";var a=n("bc21"),r=n.n(a);r.a},"3aeb":function(e,t,n){"use strict";var a=n("452b"),r=n.n(a);r.a},"452b":function(e,t,n){},"5da9":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stateLabel"},[n("div",{staticClass:"itemState"},[n("span",{staticClass:"run",style:{backgroundColor:e.colors[0]}}),n("span",{staticClass:"name"},[e._v("运行")])]),n("div",{staticClass:"itemState"},[n("span",{staticClass:"free",style:{backgroundColor:e.colors[1]}}),n("span",{staticClass:"name"},[e._v("空闲")])]),n("div",{staticClass:"itemState"},[n("span",{staticClass:"offLine",style:{backgroundColor:e.colors[2]}}),n("span",{staticClass:"name"},[e._v("离线")])]),n("div",{staticClass:"itemState"},[n("span",{staticClass:"warn",style:{backgroundColor:e.colors[3]}}),n("span",{staticClass:"name"},[e._v("告警")])])])},r=[],i={name:"StateLabel",props:{colors:{type:Array,default:function(){return["#09dba0","#e2cd16","#a0a0a0","#f1464e"]}}}},o=i,c=(n("276d"),n("2877")),u=Object(c["a"])(o,a,r,!1,null,"413176d5",null);t["a"]=u.exports},"6f53":function(e,t,n){var a=n("83ab"),r=n("df75"),i=n("fc6a"),o=n("d1e7").f,c=function(e){return function(t){var n,c=i(t),u=r(c),s=u.length,d=0,l=[];while(s>d)n=u[d++],a&&!o.call(c,n)||l.push(e?[n,c[n]]:c[n]);return l}};e.exports={entries:c(!0),values:c(!1)}},7598:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"s",(function(){return v})),n.d(t,"y",(function(){return p})),n.d(t,"x",(function(){return f})),n.d(t,"w",(function(){return g})),n.d(t,"H",(function(){return m})),n.d(t,"I",(function(){return b})),n.d(t,"j",(function(){return y})),n.d(t,"m",(function(){return h})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return C})),n.d(t,"o",(function(){return T})),n.d(t,"J",(function(){return O})),n.d(t,"t",(function(){return w})),n.d(t,"E",(function(){return j})),n.d(t,"A",(function(){return R})),n.d(t,"F",(function(){return D})),n.d(t,"z",(function(){return _})),n.d(t,"p",(function(){return S})),n.d(t,"n",(function(){return B})),n.d(t,"v",(function(){return L})),n.d(t,"u",(function(){return E})),n.d(t,"a",(function(){return x})),n.d(t,"C",(function(){return M})),n.d(t,"r",(function(){return N})),n.d(t,"q",(function(){return A})),n.d(t,"G",(function(){return I})),n.d(t,"D",(function(){return F})),n.d(t,"B",(function(){return U}));var a=n("b775"),r=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getDeviceRealState.action?",e,t)},i=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getDeviceStateReportStatistics.action?",e,t)},o=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceManager/getCheckCount.action?",e,t)},c=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceManager/getRepairTaskCount.action?",e,t)},u=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceManager/getMaintainTaskCount.action?",e,t)},s=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceReport/getDeviceDayUtilization.action?",e,t)},d=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceEarlyWarning/getDeviceWarnRecord.action?",e,t)},l=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getPageByDevice.action?",e,t)},v=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getDeviceMonitorReport.action?",e,t)},p=function(e,t){return Object(a["k"])("open-api/TvBoard/energyReport/getGasHoursUseReportBoard.action?",e,t)},f=function(e,t){return Object(a["k"])("open-api/TvBoard/energyReport/getEnergyTodayUse.action?",e,t)},g=function(e,t){return Object(a["k"])("open-api/TvBoard/energyReport/getEnergyTodayAndWeek.action?",e,t)},m=function(e,t){return Object(a["k"])("open-api/TvBoard/energyReport/getTodayAndYesterdayElectricityRecord.action?",e,t)},b=function(e,t){return Object(a["k"])("open-api/TvBoard/energyReport/getTopTenElectricityDevices.action?",e,t)},y=function(e,t){return Object(a["k"])("open-api/TvBoard/energyReport/getElectricityEnergyReport.action?",e,t)},h=function(e,t){return Object(a["k"])("open-api/TvBoard/energyReport/getWaterEnergyReport.action?",e,t)},k=function(e,t){return Object(a["k"])("open-api/TvBoard/energyReport/getGasEnergyReport.action?",e,t)},C=function(e,t){return Object(a["k"])("open-api/TvBoard/energyReport/getRecentDayEnergyRecord.action?",e,t)},T=function(e,t){return Object(a["k"])("realUserWork/getAndonKanbanOfRiSheng.action?",e,t)},O=function(e,t,n){return Object(a["k"])("existFunctionUpdate/listDeviceExceptionCount.action",e,t,n)},w=function(e,t,n){return Object(a["k"])("open-api/TvBoard/deviceReport/getDeviceStateReportStatistics.action?",e,t,n)},j=function(e,t,n){return Object(a["k"])("open-api/TvBoard/deviceManager/getRepairTask.action?",e,t,n)},R=function(e,t,n){return Object(a["k"])("open-api/TvBoard/deviceManager/getMaintainTask.action?",e,t,n)},D=function(e,t,n){return Object(a["d"])("open-api/getTime.action?",e,t,n)},_=function(e,t,n){return Object(a["k"])("open-api/getGroupTree.action?",e,t,n)},S=function(e,t,n){return Object(a["k"])("open-api/TvBoard/deviceManager/getConfigurationByEnum.action?",e,t,n)},B=function(e,t,n){return Object(a["k"])("open-api/TvBoard/device/getAllGroupAndDevice.action?",e,t,n)},L=function(e,t,n){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getDeviceTimeFluctuationRate.action?",e,t,n)},E=function(e,t,n){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getDeviceTimeCapacityAndEnergyEfficiency.action?",e,t,n)},x=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getOneDayDetailStateClockInfo.action?",e,t)},M=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceReport/getOneDayDetailStateClock.action?",e,t)},N=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getDeviceInfo.action?",e,t)},A=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getDeviceHoursEffTrend.action?",e,t)},I=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getTimeDayTypeProduction.action?",e,t)},F=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceReport/getQueryDeviceStateTimeUtilization.action?",e,t)},U=function(e,t){return Object(a["k"])("open-api/TvBoard/deviceRealLive/getManyDeviceTimeFluctuationRate.action?",e,t)}},"81d5":function(e,t,n){"use strict";var a=n("7b0b"),r=n("23cb"),i=n("50c4");e.exports=function(e){var t=a(this),n=i(t.length),o=arguments.length,c=r(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,s=void 0===u?n:r(u,n);while(s>c)t[c++]=e;return t}},bc21:function(e,t,n){},cb29:function(e,t,n){var a=n("23e7"),r=n("81d5"),i=n("44d2");a({target:"Array",proto:!0},{fill:r}),i("fill")},d58f:function(e,t,n){var a=n("1c0b"),r=n("7b0b"),i=n("44ad"),o=n("50c4"),c=function(e){return function(t,n,c,u){a(n);var s=r(t),d=i(s),l=o(s.length),v=e?l-1:0,p=e?-1:1;if(c<2)while(1){if(v in d){u=d[v],v+=p;break}if(v+=p,e?v<0:l<=v)throw TypeError("Reduce of empty array with no initial value")}for(;e?v>=0:l>v;v+=p)v in d&&(u=n(u,d[v],v,s));return u}};e.exports={left:c(!1),right:c(!0)}},ddd6:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"kanban_page"},[n("div",{staticClass:"title"},[e._v("设备分布")]),n("div",{staticClass:"distribute_con"},[n("div",{staticStyle:{height:"4%"}},[n("div",{staticStyle:{float:"left"}},[n("span",{staticStyle:{color:"aqua","font-weight":"bold","margin-right":"10px","font-size":"18px"}},[e._v("实时状态")]),n("span",[e._v("运行数:")]),n("span",{staticClass:"devcard xystyle"},[e._v(e._s(e.devState.runCount))]),n("span",[e._v("空闲数:")]),n("span",{staticClass:"devcard kxstyle"},[e._v(e._s(e.devState.idleCount))]),n("span",[e._v("离线数:")]),n("span",{staticClass:"devcard lxstyle"},[e._v(e._s(e.devState.offLineCount))]),n("span",[e._v("告警数:")]),n("span",{staticClass:"devcard gjstyle"},[e._v(e._s(e.devState.warnCount))])]),n("state-label",{staticClass:"state_label",attrs:{colors:["#4A9AE9","#EEAC41","#777777","#E24131"]}})],1),n("div",{staticClass:"device_wra"},[n("vue-seamless-scroll",{staticClass:"seamless-warp",attrs:{data:e.deviceList,"class-option":e.optionHover}},[n("ul",{ref:"lineWra",staticClass:"lineWra"},e._l(e.deviceList,(function(t){return n("li",{key:t[0][0].deviceId,staticClass:"itemLine"},[n("p",{staticClass:"lineName"},[e._v(e._s(t[0][0].lineName))]),e._l(t,(function(t){return n("div",{key:t[0].deviceId,staticClass:"lineCon"},e._l(t,(function(t){return n("div",{key:t.deviceId,staticClass:"itemDevice",style:{width:"calc(100% /"+e.rowDeviceNum+")"}},["{}"!==JSON.stringify(t)?[n("div",{class:["innerState","state"+(t.deviceRealState||3)]},[n("p",{staticClass:"deviceName"},[e._v(e._s(t.deviceName))]),n("div",[n("span",{staticStyle:{"font-size":"1.8rem"}},[e._v("当前"+e._s(e.stateFunc(t.deviceRealState))+"持续时间："+e._s(e.timeLongFunc(t)))])]),n("div",[n("span",{staticStyle:{"font-size":"1.8rem"}},[e._v("实时产能："+e._s(t.todayValue))])]),e._l(t.parameter||[],(function(t,a){return n("div",{key:a,staticClass:"parameter"},[" "!==t.parameterValue&&""!==t.parameterValue?n("span",{staticClass:"parameterName"},[e._v(e._s(t.parameterName)+":")]):e._e()," "!==t.parameterValue&&""!==t.parameterValue?n("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.unitFunc(t)))]):e._e()])}))],2)]:e._e()],2)})),0)}))],2)})),0)]),n("div",{staticClass:"light"})],1)])])},r=[],i=(n("99af"),n("cb29"),n("4160"),n("a15b"),n("13d5"),n("fb6a"),n("07ac"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("159b"),n("2909")),o=n("5530"),c=(n("96cf"),n("1da1")),u=n("a939"),s=n.n(u),d=n("5da9"),l=n("cf45"),v=n("99f6"),p=n("582a"),f=n("7598"),g={name:"distribute",components:{StateLabel:d["a"],vueSeamlessScroll:s.a},data:function(){return{kanbanConfig:{},rowDeviceNum:5,deviceList:[],timer:null,currentTime:0,devState:{runCount:0,idleCount:0,offLineCount:0,warnCount:0},dataTime:0}},computed:{optionHover:function(){return{step:1,limitMoveNum:this.limitMoveNum(),hoverStop:!0,direction:1,openWatch:!0,singleHeight:0,singleWidth:0,waitTime:1e3}}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:document.documentElement.style.fontSize=Object(l["b"])()+"px",window.onresize=function(){document.documentElement.style.fontSize=Object(l["b"])()+"px"},v["m"][e.getUrlKeyMain("cid",window.location.href)]&&(e.kanbanConfig=v["m"][e.getUrlKeyMain("cid",window.location.href)]),e.getDataTime(),e.getDeviceData(),e.showDevRealState(),e.timer=setInterval((function(){e.getDeviceData(),e.showDevRealState()}),(null===(n=e.kanbanConfig)||void 0===n?void 0:n.time)||15e3),setInterval((function(){e.getDataTime()}),3e4);case 8:case"end":return t.stop()}}),t)})))()},destroyed:function(){this.timer&&clearInterval(this.timer)},methods:{stateFunc:function(e){return 1===e?"运行":2===e?"空闲":3===e?"离线":4===e?"告警":void 0},timeLongFunc:function(e){var t=(this.dataTime-e.stateStartTime)/1e3/60;return t<1?"1分钟":t>10080?"始终":t>1?this.toHoursAndMinutes(t):void 0},toHoursAndMinutes:function(e){var t=Math.floor(e/60),n=Math.floor(e%60);return t?"".concat(t,"小时").concat(n>0?" ".concat(n,"分"):""):"".concat(n>0?" ".concat(n,"分"):"")},unitFunc:function(e){if(e.extend01){var t=JSON.parse(e.extend01);return t[e.parameterValue]}return e.parameterValue+" "+e.showUnit},showDevRealState:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},e.getUrlKeyMain("cid",window.location.href)&&(n.secretKey=e.kanbanConfig.key),e.groupId>0&&(n.conditionJson1=[{column:"groupId",operator:1,ptype:"int",type:"eq",value:e.groupId},{column:"groupId",operator:1,ptype:"int",type:"eq",value:e.groupId}]),t.prev=3,t.next=6,Object(f["f"])({},n);case 6:a=t.sent,a.code===p["M"].OPERATION_SUCCESS&&(e.devState={runCount:a.rows.runCount,idleCount:a.rows.idleCount,offLineCount:a.rows.offLineCount,warnCount:a.rows.warnCount}),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](3);case 12:return t.prev=12,t.finish(12);case 14:case"end":return t.stop()}}),t,null,[[3,10,12,14]])})))()},getTodayFirstDay:function(){var e=new Date(this.currentTime),t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return n=n<10?"0"+n:n,a=a<10?"0"+a:a,[t,n,a].join("-")+" 00:00:00"},getTodayLastDay:function(){var e=new Date(this.currentTime),t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return n=n<10?"0"+n:n,a=a<10?"0"+a:a,[t,n,a].join("-")+" 23:59:59"},limitMoveNum:function(){var e=0;return this.deviceList.forEach((function(t){e+=t.length})),e>3?1:4},getDeviceData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(f["h"])({startTime:e.getTodayFirstDay(),endTime:e.getTodayLastDay()},{secretKey:e.kanbanConfig.key,conditionJson1:[{column:"isProductionDevice",operator:1,ptype:"int",type:"eq",value:1}],current:1,size:99999999});case 3:n=t.sent,n.code===p["M"].OPERATION_SUCCESS&&(a=n.rows||[],console.log(n),a.length>0&&(r=a.reduce((function(t,n){var a=e.getLineName(n);return t[a]?t[a].push(Object(o["a"])(Object(o["a"])({},n),{},{lineName:a})):t[a]=[Object(o["a"])(Object(o["a"])({},n),{},{lineName:a})],t}),{}),i=[],c=Object.values(r),c.forEach((function(t){i.push(e.dataDeal(t))})),e.deviceList=i,console.log(i))),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getUrlKeyMain:function(e,t){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||["",""])[1].replace(/\+/g,"%20"))||null},getLineName:function(e){var t="";return t=e.productionLine?e.productionLine:e.workshop?e.workshop:e.factory?e.factory:"其他",t},dataDeal:function(e){var t=[];if(e.length<=this.rowDeviceNum){var n=this.rowDeviceNum-e.length;t=[[].concat(Object(i["a"])(e),Object(i["a"])(new Array(n).fill({})))]}else t=this.group(e,this.rowDeviceNum);return t},group:function(e,t){var n=0,a=[];while(n<e.length){var r=e.slice(n,n+=t);if(r.length===t)a.push(r);else{var o=t-r.length;a.push([].concat(Object(i["a"])(r),Object(i["a"])(new Array(o).fill({}))))}}return a},getDataTime:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(f["F"])({},{});case 3:n=t.sent,e.dataTime=n.rows,console.log(n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},m=g,b=(n("3aeb"),n("2877")),y=Object(b["a"])(m,a,r,!1,null,"2f087eb6",null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-6dd5b574.5c0b9161.js.map