(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32e84c26"],{1125:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"monthReport"},[n("header-buttons",{attrs:{showRefresh:!0,cssType:"1"},on:{buttonClickEvent:e.buttonClickEvent}}),n("div",{staticClass:"searchDiv"},[n("div",[n("span",[e._v("月份:")]),n("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM",size:"mini",placeholder:"选择月"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),n("Div",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.search}},[e._v("查询")]),n("el-button",{attrs:{size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1)],1),n("VXETable",{ref:"xGrid",attrs:{id:"table",height:e.$options.filters.getTableHeight(200),tableName:"",tableLoading:e.tableLoadings,tableDatas:e.tableDatas,tableColumns:e.tableColumns,tablePage:e.tablePages},on:{sortChange:e.sortChange,onTablePageChange:e.handleMainPageChange}})],1)},r=[],o=(n("b680"),n("96cf"),n("1da1")),a=n("cf46"),l=n("3fa5"),c=n("6464"),s=n("582a"),u=n("b224"),h={name:"monthReport",components:{VXETable:a["a"]},data:function(){return{month:new Date,shift:"",shiftOptions:[],tableLoadings:!1,tableDatas:[],tableColumns:[{field:"dateTime",title:"日期",width:170,visible:!0,align:"center",fixed:"left",sortable:!0},{field:"shiftName",title:"班次",width:120,visible:!0,align:"center",fixed:"left"},{field:"totalCoolingCapacityAfter",title:"总供冷量",width:120,visible:!0,align:"center",formatter:function(e){var t=e.cellValue;e.row,e.column;return parseFloat(t.toFixed(2))}},{field:"bromineMachineCoolingCapacity",title:"溴机供冷量",visible:!0,width:120,align:"center",formatter:function(e){var t=e.cellValue;e.row,e.column;return parseFloat(t.toFixed(2))}},{field:"purchaseElectricity",title:"采购电量(kW·h)",visible:!0,width:150,align:"center",formatter:function(e){var t=e.cellValue;e.row,e.column;return parseFloat(t.toFixed(2))}},{field:"gasTurbineGeneration",title:"燃气发电量(kW·h)",width:150,visible:!0,align:"center",formatter:function(e){var t=e.cellValue;e.row,e.column;return parseFloat(t.toFixed(2))}},{field:"internetPower",title:"上网电量(kW·h)",width:150,visible:!0,align:"center",formatter:function(e){var t=e.cellValue;e.row,e.column;return parseFloat(t.toFixed(2))}},{field:"photovoltaicPowerGeneration",title:"光伏发电量(kW·h)",width:150,visible:!0,align:"center",formatter:function(e){var t=e.cellValue;e.row,e.column;return parseFloat(t.toFixed(2))}},{field:"totalElectricityConsumption",title:"总用电量(kW·h)",width:150,visible:!0,align:"center",formatter:function(e){var t=e.cellValue;e.row,e.column;return parseFloat(t.toFixed(2))}},{field:"twoABCharge",title:"2A/2B电量(kW·h)",width:150,visible:!0,align:"center",formatter:function(e){var t=e.cellValue;e.row,e.column;return parseFloat(t.toFixed(2))}},{field:"electricRefrigerationConsumption",title:"电制冷主机用电量(kW·h)",width:200,visible:!0,align:"center",formatter:function(e){var t=e.cellValue;e.row,e.column;return parseFloat(t.toFixed(2))}},{field:"electricRefrigerationRuntime",title:"电制冷运行时间(h)",width:180,visible:!0,align:"center"},{field:"electricRefrigerationRadio",title:"电制冷COP",width:120,visible:!0,align:"center"}],tablePages:{total:0,currentPage:1,pageSize:10,align:"right",pageSizes:[10,20,50,100,200,500],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},sortType:"DESC"}},created:function(){this.findList()},methods:{buttonClickEvent:function(e){"refresh"===e&&(this.month=new Date,this.tablePages.currentPage=1,this.tablePages.pageSize=10,this.findList())},search:function(){this.findList()},handleExport:function(){this.findList("export")},sortChange:function(e,t){this.sortType=t.toLocaleUpperCase(),this.handleMainPageChange(1,this.tablePages.pageSize)},handleMainPageChange:function(e,t){this.tablePages.currentPage=e,this.tablePages.pageSize=t,this.findList()},findList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i,r,o,a,h,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t,t.tableLoadings=!0,n.prev=2,r="",r="string"===typeof t.month?t.month+"-01 00:00:00":t.moment(t.month).format("YYYY-MM")+"-01 00:00:00",o={pageNum:t.tablePages.currentPage,pageSize:t.tablePages.pageSize,startTime:r,sortType:t.sortType},console.log(o),"export"===e&&(o.pageNum=1,o.pageSize=9999999),n.next=10,Object(u["e"])({},o);case 10:if(a=n.sent,a.code===s["M"].OPERATION_SUCCESS){if(console.log(a),t.tableDatas=a.rows,t.tablePages.total=a.total,t.tableLoadings=!1,"export"===e){for(h=[],f=0;f<t.tableColumns.length;f++)"radio"!==t.tableColumns[f].type&&"checkbox"!==t.tableColumns[f].type&&h.push(t.tableColumns[f].field);i.$refs.xGrid.exportData("月报表",a.rows,h)}}else t.tableDatas=[],t.tablePages.total=0,Object(l["c"])(a.message),t.tableLoadings=!1;n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](2),t.tableLoadings=!1,Object(c["a"])(s["N"].NOTIFY,n.t0);case 18:return n.prev=18,t.tableLoadings=!1,n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[2,14,18,21]])})))()},getShift:function(){var e=this;Object(u["f"])({},{}).then((function(t){e.shiftOptions=t.rows,console.log(t)}))}}},f=h,d=(n("d72d"),n("2877")),g=Object(d["a"])(f,i,r,!1,null,"1af79f6b",null);t["default"]=g.exports},2532:function(e,t,n){"use strict";var i=n("23e7"),r=n("5a34"),o=n("1d80"),a=n("ab13");i({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~String(o(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},"390b":function(e,t,n){},"5a34":function(e,t,n){var i=n("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},6464:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("5c96");function r(e,t){i["Notification"].error({title:e,message:t,duration:2e3,position:"bottom-right",showClose:!0})}},"9a10":function(e,t,n){},ab13:function(e,t,n){var i=n("b622"),r=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},b224:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return d}));var i=n("b775"),r=n("99f6"),o=function(e,t){return Object(i["e"])(r["b"]+"fbsDevice/getDevice.action?",e,t)},a=function(e,t){return Object(i["e"])(r["b"]+"gasTurbine/getGasTurbineOpenAnd.action?",e,t)},l=function(e,t){return Object(i["e"])(r["b"]+"electricRefrigeration/getElectricRefrigerationOpenAnd.action?",e,t)},c=function(e,t){return Object(i["e"])(r["b"]+"BromineMachine/getBromineMachineOpenAnd.action?",e,t)},s=function(e,t){return Object(i["e"])(r["b"]+"gasTurbine/listGasTurbineReport.action?",e,t)},u=function(e,t){return Object(i["e"])(r["b"]+"electricRefrigeration/listElectricRefrigerationReport.action?",e,t)},h=function(e,t){return Object(i["e"])(r["b"]+"BromineMachine/listBromineMachineReport.action?",e,t)},f=function(e,t){return Object(i["e"])(r["b"]+"fbsDevice/getMonthReport.action?",e,t)},d=function(e,t){return Object(i["d"])("configuration/listAllShiftInfoOfStringValue.action?",e,t)}},bf39:function(e,t,n){"use strict";var i=n("390b"),r=n.n(i);r.a},caad:function(e,t,n){"use strict";var i=n("23e7"),r=n("4d64").includes,o=n("44d2"),a=n("ae40"),l=a("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!l},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cf46:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vxe-grid",{ref:e.tableName+"Table",staticClass:"vxe-table-element",attrs:{"row-style":e.rowStyle,"header-row-style":e.headerStyle,resizable:e.resizable,border:e.border,"show-header":e.showHeader,"auto-resize":e.autoResize,"header-align":e.headerAlign,"show-footer":e.showFooter,"show-footer-overflow":e.showFooterOverflow,"show-overflow":e.showOverflow,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"remote-sort":!0,"highlight-hover-row":e.highlightHoverRow,"highlight-current-row":e.highlightCurrentRow,loading:e.tableLoading,"tooltip-config":e.tooltipConfig,"keep-source":e.keepSource,"edit-config":e.editConfig,columns:e.tableColumns,data:e.tableDatas,"checkbox-config":e.checkboxConfig,"radio-config":{trigger:"row"},"seq-config":{startIndex:(e.tablePage.currentPage-1)*e.tablePage.pageSize},"pager-config":e.tablePage,"span-method":e.mergeRowMethod,"export-config":{cellRender:e.handleCellRender}},on:{"cell-click":e.cellClickEvent,"cell-dblclick":e.cellDBLClickEvent,"page-change":e.handlePageChange,"sort-change":e.sortChange,"checkbox-change":e.checkboxChangeEvent,"checkbox-all":e.checkboxChangeEvent,"current-change":e.currentChangeEvent},scopedSlots:e._u([{key:"pager_left",fn:function(){return[n("div",{staticClass:"page-left"},[n("div",[e._t("tableOperation")],2)])]},proxy:!0}],null,!0)})],1)},r=[],o=(n("4de4"),n("caad"),n("a9e3"),n("2532"),{props:{rowStyle:{type:Function},headerStyle:{type:Function},resizable:{type:Boolean,default:!0},tableName:{type:String,required:!0},showHeader:{type:Boolean,default:!0},border:{type:[Boolean,String],default:!0},autoResize:{type:Boolean,default:!0},headerAlign:{type:String,default:"center"},showFooter:{type:Boolean,default:!1},showFooterOverflow:{type:[Boolean,String],default:"tooltip"},showOverflow:{type:[Boolean,String],default:"tooltip"},stripe:{type:Boolean,default:!0},maxHeight:{type:[Number,String],default:""},height:{type:[Number,String],default:"500px"},size:{type:String,default:"small"},highlightHoverRow:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!1},tableLoading:{type:Boolean,default:!1},tooltipConfig:{type:Object,default:function(){return{theme:"light",enterable:!0}}},checkboxConfig:{type:Object,default:function(){return{}}},exportConfig:{type:Object,default:function(){return{}}},keepSource:{type:Boolean,default:!1},editConfig:{type:[Boolean,Object],default:!1},tableDatas:{type:Array,required:!0},tableColumns:{type:Array,required:!0},tablePage:{type:Object,required:!0},checkRecords:{type:Array,default:function(){return[]}}},data:function(){return{isAllChecked:!1,isIndeterminate:!1,selectRecords:[],mergeArr:[]}},watch:{checkRecords:function(e,t){0===e.length&&this.checkboxChangeEvent([])}},methods:{handleCellRender:function(e){var t=e.row,n=e.column,i=e.cellValue;return console.log(666,t,n,i),{style:"color: red;"}},handlePageChange:function(e){var t=e.currentPage,n=e.pageSize;this.isAllChecked=!1,this.selectRecords=[],this.$emit("onTablePageChange",t,n)},sortChange:function(e){e.column;var t=e.property,n=e.order;console.log(666),this.isAllChecked=!1,this.selectRecords=[],this.$emit("sortChange",t,n)},checkboxChangeEvent:function(e){var t=e.records;this.isAllChecked=this.$refs[this.tableName+"Table"].isAllCheckboxChecked(),this.isIndeterminate=this.$refs[this.tableName+"Table"].isCheckboxIndeterminate(),t?this.selectRecords=t:(this.selectRecords=[],this.isIndeterminate=!1),0===this.selectRecords.length&&(this.isAllChecked=!1),this.$emit("chooseCheck",t)},changeAllEvent:function(){this.$refs[this.tableName+"Table"].setAllCheckboxRow(this.isAllChecked),this.selectRecords=this.$refs[this.tableName+"Table"].getCheckboxRecords(),0===this.selectRecords.length&&(this.isAllChecked=!1),this.$emit("chooseCheck",this.selectRecords)},exportData:function(e,t,n){console.log(n);var i={isColgroup:!0,filename:e,useStyle:!0,type:"xlsx",columns:n.filter((function(e){return console.log(e),""!==e.field})),data:t};this.$refs[this.tableName+"Table"].exportData(i)},exportDatax:function(e,t,n){console.log(n);var i={isColgroup:!0,filename:e,useStyle:!0,type:"csv",data:t};n&&(i.columnFilterMethod=function(e){return n.includes(e.property)}),this.$refs[this.tableName+"Table"].exportData(i)},cellClickEvent:function(e){var t=e.row;this.$emit("clickRows",t)},cellDBLClickEvent:function(e){var t=e.row;this.$emit("dbclickRows",t)},currentChangeEvent:function(e){var t=e.row,n=this.$refs[this.tableName+"Table"].$getRowIndex(t);this.$emit("currentChangeEvent",t,n)},setCurrentRow:function(e){this.$refs[this.tableName+"Table"].setCurrentRow(this.tableDatas[e])},clearCurrentRow:function(){this.$refs[this.tableName+"Table"].clearCurrentRow()},toggleCheckboxRow:function(e){this.$refs[this.tableName+"Table"].toggleCheckboxRow(e)},clearCheckboxRow:function(){this.$refs[this.tableName+"Table"].clearCheckboxRow()},getCheckboxRecords:function(){return this.$refs[this.tableName+"Table"].getCheckboxRecords()},getRadioRecord:function(){return this.$refs[this.tableName+"Table"].getRadioRecord()},setCheckboxRow:function(e,t){return this.$refs[this.tableName+"Table"].setCheckboxRow(e,t)},mergeRowMethod:function(e){var t=e.row,n=e.$rowIndex,i=e.column,r=e.data,o=this.mergeArr;if(this.mergeArr.length>0){var a=t[i.property];if(a&&o.includes(i.property)){var l=t[o[0]],c=r[n-1],s=r[n+1];if(c&&c[i.property]===a&&c[o[0]]===l)return{rowspan:0,colspan:0};var u=1;while(s&&s[i.property]===a&&s[o[0]]===l)s=r[++u+n];if(u>1)return{rowspan:u,colspan:1}}}}}}),a=o,l=(n("bf39"),n("2877")),c=Object(l["a"])(a,i,r,!1,null,"00902082",null);t["a"]=c.exports},d72d:function(e,t,n){"use strict";var i=n("9a10"),r=n.n(i);r.a}}]);
//# sourceMappingURL=chunk-32e84c26.f4ee7657.js.map