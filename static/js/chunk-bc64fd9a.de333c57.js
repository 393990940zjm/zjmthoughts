(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc64fd9a"],{1544:function(e,t,a){},2532:function(e,t,a){"use strict";var r=a("23e7"),n=a("5a34"),i=a("1d80"),o=a("ab13");r({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(i(this)).indexOf(n(e),arguments.length>1?arguments[1]:void 0)}})},3120:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"kanban"},[a("search-bar",{attrs:{searchData:e.searchData,searchOptions:e.searchOptions},on:{search:e.search,getGroupSucceed:e.loadData}}),a("div",{staticClass:"kanbanContent"},[a("div",{staticClass:"left_content"},[a("card-module",{attrs:{title:"参数告警列表",cardBg:"cardBg_large",titleBg:"cardTitle_large",width:"100%",height:"100%",titleWidth:"70%"},on:{exportExcel:e.exportTable}},[a("div",{staticClass:"warn_list"},[a("div",{ref:"warnContent",staticClass:"warn_content"},[a("VXETable",{ref:"xGrid",attrs:{tableName:"",height:e.tableHeight,tableLoading:e.mainPage.tableLoading,tableDatas:e.mainPage.data,tableColumns:e.mainPage.columns,highlightCurrentRow:!0,tablePage:e.mainPage.page},on:{sortChange:e.sortChange,onTablePageChange:e.handleMainPageChange}})],1)])])],1),a("div",{staticClass:"right_content"},[a("card-module",{attrs:{title:"告警时长TOP10",cardBg:"cardBg_large",titleBg:"cardTitle_large",width:"100%",height:"100%",titleWidth:"70%"},on:{exportExcel:e.exportEchart}},[a("div",{ref:"top10",staticStyle:{width:"100%",height:"100%"}})])],1)]),a("el-dialog",{attrs:{visible:e.dialogVisible,top:"10vh",title:e.dialogTitle,width:"决策"===e.dialogTitle?"50%":"75%"},on:{"update:visible":function(t){e.dialogVisible=t}}},["详情"===e.dialogTitle?a("div",{staticClass:"dialog_content"},[a("div",{staticClass:"oper_wra"},[a("div",{staticClass:"export_btn",on:{click:function(t){return e.getDetailData("export")}}},[a("i",{staticClass:"icon-export",attrs:{slot:"operation-icon"},slot:"operation-icon"}),a("span",[e._v("导出")])])]),a("VXETable",{ref:"detailTable",attrs:{height:520,tableName:"",tableLoading:e.detailTable.tableLoading,tableDatas:e.detailTable.data,tableColumns:e.detailTable.columns,highlightCurrentRow:!0,tablePage:e.detailTable.page},on:{onTablePageChange:e.handleDetailTableChange,sortChange:e.detailTabelSortChange}})],1):a("div",{staticClass:"dialog_content"},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticStyle:{width:"60px"}},[e._v("决策：")]),a("el-input",{attrs:{type:"textarea",autosize:!0},model:{value:e.warnDecision,callback:function(t){e.warnDecision=t},expression:"warnDecision"}})],1)]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取消 ")]),"决策"===e.dialogTitle?a("el-button",{attrs:{type:"primary"},on:{click:e.submitDecision}},[e._v(" 确定 ")]):e._e()],1)])],1)},n=[],i=(a("99af"),a("cb29"),a("d81d"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("2909")),o=a("5530"),c=(a("96cf"),a("1da1")),l=a("1157"),s=a.n(l),u=a("cf45"),d=a("99f6"),h=a("78fe"),g=a("dec0"),p=a("cf46"),f=a("582a"),m=a("176a"),b=a("f82c"),v=a("3fa5"),w=a("ef53"),y=a("7749"),x={name:"kanban_xw_troubleImprove",components:{CardModule:h["a"],searchBar:g["a"],VXETable:p["a"]},data:function(){var e=this,t=this.$createElement;return{dialogVisible:!1,dialogTitle:"详情",title:"",BTN_TEXT:f["c"],groupId:0,time:"",dataTime:"",searchData:{groupValue:[1,2,3,"00000190_00000005"],date:[new Date(Object(w["b"])(6)+" 00:00:00"),new Date(Object(w["b"])(0)+" 23:59:59")],timeKeyEnum:"DAY"},tableHeight:500,searchOptions:[{type:"cascader",key:"groupValue"},{type:"daterange",key:"date",pickerType:"datetimerange",defaultType:"天",options:[{label:"天",value:"DAY"}]}],mainPage:{show:!0,page:{total:0,currentPage:1,pageSize:10,align:"right",pageSizes:[10,20,50,100,200,500],layouts:["Sizes","PrevPage","Number","NextPage","Total"],perfect:!0},data:[],columns:[{field:"workshopName",title:"车间",width:"auto",align:"center"},{field:"productionLineName",title:"产线",width:"auto",align:"center"},{field:"deviceName",title:"设备",width:"auto",align:"center"},{field:"warnType",title:"故障类型",width:"auto",align:"center"},{field:"warnStartTime",title:"告警开始时间",width:"auto",align:"center"},{field:"warnEndTime",title:"告警结束时间",width:"auto",align:"center",slots:{default:function(e){var a=e.row;e.column;return[t("div",{class:a.warnEndTime?"":"empty"},[a.warnEndTime])]}}},{field:"warnDuration",title:"告警累计时长/分钟",width:"auto",align:"center",sortable:!0},{field:"warnCount",title:"告警次数",width:"auto",align:"center",sortable:!0},{field:"",title:"操作",width:"140",align:"center",slots:{default:function(a){var r=a.row;a.column;return[t("div",{class:"oper_btn"},[t("span",{class:"text detail",on:{click:function(){return e.openDialog(r,"详情")}}},[f["c"].INFO]),t("span",{class:"text",on:{click:function(){return e.openDialog(r,"决策")}}},["决策"])])]}}}],tableLoading:!1},detailTable:{page:{total:0,currentPage:1,pageSize:10,align:"right",pageSizes:[10,20,50,100,200,500],layouts:["Sizes","PrevPage","Number","NextPage","Total"],perfect:!0},data:[],columns:[{field:"workshopName",title:"车间",width:"auto",align:"center"},{field:"productionLineName",title:"产线",width:"auto",align:"center"},{field:"deviceName",title:"设备",width:"auto",align:"center"},{field:"warnStartTime",title:"告警开始时间",width:"auto",align:"center"},{field:"warnEndTime",title:"告警结束时间",width:"auto",align:"center",slots:{default:function(e){var a=e.row;e.column;return[t("div",{class:a.warnEndTime?"":"empty"},[a.warnEndTime])]}}},{field:"warnDuration",title:"告警累计时长/分钟",width:"auto",align:"center",sortable:!0}],tableLoading:!1},currentRow:{},warnDecision:"",seriesData:[],xData:[],orderByData:{},kanbanConfig:{title:"安灯看板",key:"",time:15e3},timer:null,timer2:null,warnDurationSortType:"DESC"}},computed:{optionHover:function(){return{step:.4,limitMoveNum:88,hoverStop:!0,direction:1,openWatch:!0,singleHeight:0,singleWidth:0,waitTime:1e3}}},mounted:function(){var e=this;document.documentElement.style.fontSize=this.fontSize()+"px",window.onresize=function(){document.documentElement.style.fontSize=e.fontSize()+"px"},this.tableHeight=this.$refs.warnContent.clientHeight-20},created:function(){var e=this;d["m"][this.getUrlKeyMain("cid",window.location.href)]&&(e.kanbanConfig=d["m"][this.getUrlKeyMain("cid",window.location.href)]),this.getDataTime()},destroyed:function(){this.timer&&setInterval(this.timer),this.timer2&&setInterval(this.timer2)},methods:{openDialog:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.dialogTitle=t,a.dialogVisible=!0,a.currentRow=e,a.warnDecision=e.warnDecision,"详情"===t&&a.getDetailData();case 5:case"end":return r.stop()}}),r)})))()},getDetailData:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r=t.detailTable.page.pageSize,"export"===e&&(r=99999),n={pageNum:t.detailTable.page.currentPage,pageSize:r,warnType:t.currentRow.warnType,sortType:t.warnDurationSortType},t.searchData.date?(i=t.searchData.date[1],i.setHours(23),i.setMinutes(59),i.setSeconds(59),n.startTime=Object(u["f"])(t.searchData.date[0]),n.endTime=Object(u["f"])(i)):(n.startTime=Object(w["b"])(6)+" 00:00:00",n.endTime=Object(w["b"])(0)+" 23:59:59"),t.searchData.groupValue&&(o=t.searchData.groupValue[t.searchData.groupValue.length-1],isNaN(o)?n.deviceCode=o:n.groupId=o),a.next=8,Object(y["e"])(n,{});case 8:c=a.sent,c.code===f["M"].OPERATION_SUCCESS&&("export"===e?t.$refs.detailTable.exportDatax("告警明细",c.rows):(t.detailTable.data=c.rows,t.detailTable.page.total=c.total)),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](0),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()},submitDecision:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={warnDecision:e.warnDecision,warnType:e.currentRow.warnType},console.log(a),t.next=5,Object(y["g"])(a,{});case 5:r=t.sent,Object(v["b"])("操作成功"),e.dialogVisible=!1,console.log(r),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},exportTable:function(){var e=[],t=this.mainPage.columns.map((function(e){return e.title})),a=this.mainPage.columns.map((function(e){return e.field})),r=Object(b["f"])(a,this.mainPage.data);Object(m["a"])({multiHeader:e,header:t,data:r,filename:"参数告警列表",merges:[]})},exportEchart:function(){var e=[];Object(m["a"])({multiHeader:e,header:this.xData.reverse(),data:[this.seriesData.reverse()],filename:"告警时长TOP10",merges:[]})},getDataTime:function(){this.dataTime=new Date(s.a.ajax({type:"HEAD",async:!1}).getResponseHeader("Date")).getTime(),this.toGetTime()},toGetTime:function(){var e=this;setInterval((function(){var t=new Date(e.dataTime),a=t.getFullYear(),r=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),c=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();e.time=a+" 年 "+r+" 月 "+n+" 日   "+i+":"+o+":"+c,e.dataTime+=1e3}),1e3)},findList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=Object(o["a"])({pageNum:e.mainPage.page.currentPage,pageSize:e.mainPage.page.pageSize,sortKey:"warnDuration",sortMethod:"desc"},e.orderByData),e.searchData.date?(r=e.searchData.date[1],r.setHours(23),r.setMinutes(59),r.setSeconds(59),a.startTime=Object(u["f"])(e.searchData.date[0]),a.endTime=Object(u["f"])(r)):(a.startTime=Object(w["b"])(6)+" 00:00:00",a.endTime=Object(w["b"])(0)+" 23:59:59"),e.searchData.groupValue&&(n=e.searchData.groupValue[e.searchData.groupValue.length-1],isNaN(n)?a.deviceCode=n:a.groupId=n),t.next=6,Object(y["d"])(a,{});case 6:i=t.sent,i.code===f["M"].OPERATION_SUCCESS&&(e.mainPage.data=i.rows,e.mainPage.page.total=i.total),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getTOP10Data:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o,c,l,s,d,h,g,p,m,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={pageNum:1,pageSize:10,sortKey:"warnDuration",sortMethod:"desc"},e.searchData.date?(r=e.searchData.date[1],r.setHours(23),r.setMinutes(59),r.setSeconds(59),a.startTime=Object(u["f"])(e.searchData.date[0]),a.endTime=Object(u["f"])(r)):(a.startTime=Object(w["b"])(6)+" 00:00:00",a.endTime=Object(w["b"])(0)+" 23:59:59"),e.searchData.groupValue&&(n=e.searchData.groupValue[e.searchData.groupValue.length-1],isNaN(n)?a.deviceCode=n:a.groupId=n),t.next=6,Object(y["d"])(a,{});case 6:o=t.sent,o.code===f["M"].OPERATION_SUCCESS&&(10===o.rows.map((function(e){return e.warnType})).length?(c=o.rows.map((function(e){return e.warnType})).reverse(),l=o.rows.map((function(e){return e.warnDuration})).reverse(),s=o.rows.map((function(e){return e.warnDuration})).reverse(),e.xData=c,e.seriesData=l,e.drawTop10(c,l,s),console.log(o)):(d=o.rows.map((function(e){return e.warnType})).reverse(),h=10-d.length,g=o.rows.map((function(e){return e.warnDuration})).reverse(),p=10-g.length,m=[].concat(Object(i["a"])(Array(h).fill("")),Object(i["a"])(d)),b=[].concat(Object(i["a"])(Array(p).fill("")),Object(i["a"])(g)),e.xData=d,e.seriesData=g,e.drawTop10(m,b,g),console.log(o))),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},sortChange:function(e,t){this.orderByData={sortKey:e,sortMethod:t},this.handleMainPageChange(1,this.mainPage.page.pageSize)},detailTabelSortChange:function(e,t){this.warnDurationSortType=null===t||void 0===t?void 0:t.toLocaleUpperCase(),this.handleDetailTableChange(1,this.detailTable.page.pageSize)},handleMainPageChange:function(e,t){this.mainPage.page.currentPage=e,this.mainPage.page.pageSize=t,this.findList()},handleDetailTableChange:function(e,t){this.detailTable.page.currentPage=e,this.detailTable.page.pageSize=t,this.getDetailData()},fontSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(t){var a=t/1920;return e*a}},showLogo:function(){return"logo_"+this.kanbanConfig.logo},getUrlKeyMain:function(e,t){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||["",""])[1].replace(/\+/g,"%20"))||null},drawTop10:function(e,t,a){var r=this.$echarts.init(this.$refs.top10),n=["#FFD3D3","#FFB6B6","#FF9999","#FF7C7C","#FF6060","#FF4343","#FF2626","#FF0909","#E60000","#CC0000"],o=a.length,c=new Array(o).fill(0),l=[].concat(Object(i["a"])(Array(10-o).fill("")),Object(i["a"])(c)),s={grid:{left:"5%",top:"2%",right:"8%",bottom:"2%",containLabel:!0},xAxis:[{show:!1}],yAxis:[{axisTick:"none",axisLine:"none",offset:20,axisLabel:{show:!1,textStyle:{color:"#ffffff",fontSize:Object(u["b"])(16)},lineHeight:16},data:e},{axisTick:"none",axisLine:"none",axisLabel:{textStyle:{color:"#ffffff",fontSize:Object(u["b"])(16)}},data:[]},{name:"",nameGap:"20",nameTextStyle:{color:"#ffffff",fontSize:Object(u["b"])(16)},axisLine:{lineStyle:{color:"rgba(0,0,0,0)"}},data:[]}],series:[{name:"条",type:"bar",yAxisIndex:0,data:t,label:{normal:{show:!0,formatter:"{name|{b}}",rich:{name:{width:"80%",color:"#ffffff",fontSize:Object(u["b"])(12),padding:[-18,0,0,0]}},position:"insideTopLeft",textStyle:{color:"#9AA1A9",fontSize:Object(u["b"])(12)},offset:[0,-30]}},barWidth:10,itemStyle:{normal:{color:function(e){var t=n.length;return n[e.dataIndex%t]}}},z:2},{name:"白框",type:"bar",yAxisIndex:1,barGap:"-100%",data:t,label:{normal:{show:!0,position:"right",textStyle:{color:"#ffffff",fontSize:Object(u["b"])(14)}}},barWidth:20,itemStyle:{normal:{color:"transparent",barBorderRadius:5}},z:1},{name:"白框",type:"bar",yAxisIndex:1,barGap:"-100%",barWidth:20,itemStyle:{normal:{color:"#0e2147",barBorderRadius:5}},z:1},{name:"外框",type:"bar",yAxisIndex:2,barGap:"-100%",barWidth:24,itemStyle:{normal:{color:function(e){var t=n.length;return n[e.dataIndex%t]},barBorderRadius:5}},z:0},{name:"外圆",type:"scatter",hoverAnimation:!1,data:l,yAxisIndex:2,symbolSize:18,itemStyle:{normal:{color:function(e){var t=n.length;return n[e.dataIndex%t]},opacity:1}},z:2}]};r.setOption(s,!0),window.addEventListener("resize",(function(){r.resize()}))},search:function(){this.findList(),this.getTOP10Data(),this.handleMainPageChange(1,this.mainPage.page.pageSize),console.log(this.searchData)},loadData:function(){this.findList(),this.getTOP10Data()}}},C=x,D=(a("d456"),a("2877")),k=Object(D["a"])(C,r,n,!1,null,"5094991c",null);t["default"]=k.exports},"390b":function(e,t,a){},"40e5":function(e,t,a){"use strict";var r=a("1544"),n=a.n(r);n.a},"5a34":function(e,t,a){var r=a("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},7749:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"o",(function(){return o})),a.d(t,"j",(function(){return c})),a.d(t,"h",(function(){return l})),a.d(t,"s",(function(){return s})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return h})),a.d(t,"e",(function(){return g})),a.d(t,"g",(function(){return p})),a.d(t,"q",(function(){return f})),a.d(t,"r",(function(){return m})),a.d(t,"b",(function(){return b})),a.d(t,"m",(function(){return v})),a.d(t,"p",(function(){return w})),a.d(t,"n",(function(){return y})),a.d(t,"k",(function(){return x})),a.d(t,"l",(function(){return C})),a.d(t,"i",(function(){return D})),a.d(t,"t",(function(){return k}));var r=a("b775"),n=a("99f6"),i=function(e,t){return Object(r["k"])("open-api/TvBoard/deviceEarlyWarning/getDeviceWarnRecord.action?",e,t)},o=function(e,t){return Object(r["d"])(n["e"]+"board/prodChart/oee?",e,t)},c=function(e,t){return Object(r["d"])(n["e"]+"custom/listPlannedProduction?",e,t)},l=function(e,t){return Object(r["k"])(n["e"]+"custom/insertPlannedProduction?",e,t)},s=function(e,t){return Object(r["k"])(n["e"]+"custom/updatePlannedProduction?",e,t)},u=function(e,t){return Object(r["d"])(n["e"]+"board/listBreakdownDetail?",e,t)},d=function(e,t){return Object(r["d"])(n["e"]+"board/dtPlatoChart?",e,t)},h=function(e,t){return Object(r["d"])(n["e"]+"board/dtWarnList?",e,t)},g=function(e,t){return Object(r["d"])(n["e"]+"board/dtWarningDetailList?",e,t)},p=function(e,t){return Object(r["k"])(n["e"]+"custom/insertOrUpdateWarningConfig?",e,t)},f=function(e,t){return Object(r["d"])(n["e"]+"board/prodChart/qty?",e,t)},m=function(e,t){return Object(r["d"])(n["e"]+"board/prodChart/yield?",e,t)},b=function(e,t){return Object(r["d"])(n["e"]+"board/deviceQtyTable?",e,t)},v=function(e,t){return Object(r["d"])(n["e"]+"board/listWarnStatisticsChart?",e,t)},w=function(e,t){return Object(r["d"])(n["e"]+"board/prodChartGroup?",e,t)},y=function(e,t){return Object(r["d"])(n["e"]+"custom/mapSpmAndDischargeNumber?",e,t)},x=function(e,t){return Object(r["d"])(n["e"]+"board/listRunStatisticsChart?",e,t)},C=function(e,t){return Object(r["d"])(n["e"]+"board/listTimeOperationRateChart?",e,t)},D=function(e,t){return Object(r["d"])(n["e"]+"board/listPerformanceOperationRateChart?",e,t)},k=function(e,t){return Object(r["d"])(n["e"]+"board/yieldComparisonChart?",e,t)}},"78fe":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cardModule",style:{height:e.height,width:e.width}},[a("div",{class:["wrapper",e.cardBg]},[a("div",{class:["title",e.titleBg],style:{width:e.titleWidth}},[e._v(e._s(e.title))]),a("div",{staticClass:"module_content"},[e.isExport?a("div",{staticClass:"export_btn",on:{click:e.exportExcel}},[a("i",{staticClass:"icon-export",attrs:{slot:"operation-icon"},slot:"operation-icon"}),a("span",[e._v("导出")])]):e._e(),e._t("default")],2),a("div",{staticClass:"bottonLine"})])])},n=[],i={name:"CardModule",props:{title:String,width:{width:String,default:"100%"},height:{type:String,default:"66.66%"},titleWidth:{type:String,default:"60%"},cardBg:{type:String,default:"cardBg_small"},titleBg:{type:String,default:"cardTitle_small"},isExport:{type:Boolean,default:!0}},computed:{},data:function(){return{}},methods:{exportExcel:function(){this.$emit("exportExcel")}}},o=i,c=(a("e960"),a("2877")),l=Object(c["a"])(o,r,n,!1,null,"d23eb726",null);t["a"]=l.exports},"7bff":function(e,t,a){},ab13:function(e,t,a){var r=a("b622"),n=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,"/./"[e](t)}catch(r){}}return!1}},bbf7:function(e,t,a){},bf39:function(e,t,a){"use strict";var r=a("390b"),n=a.n(r);n.a},caad:function(e,t,a){"use strict";var r=a("23e7"),n=a("4d64").includes,i=a("44d2"),o=a("ae40"),c=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!c},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},cb29:function(e,t,a){var r=a("23e7"),n=a("81d5"),i=a("44d2");r({target:"Array",proto:!0},{fill:n}),i("fill")},cf46:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-grid",{ref:e.tableName+"Table",staticClass:"vxe-table-element",attrs:{"row-style":e.rowStyle,"header-row-style":e.headerStyle,resizable:e.resizable,border:e.border,"show-header":e.showHeader,"auto-resize":e.autoResize,"header-align":e.headerAlign,"show-footer":e.showFooter,"show-footer-overflow":e.showFooterOverflow,"show-overflow":e.showOverflow,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"remote-sort":!0,"highlight-hover-row":e.highlightHoverRow,"highlight-current-row":e.highlightCurrentRow,loading:e.tableLoading,"tooltip-config":e.tooltipConfig,"keep-source":e.keepSource,"edit-config":e.editConfig,columns:e.tableColumns,data:e.tableDatas,"checkbox-config":e.checkboxConfig,"radio-config":{trigger:"row"},"seq-config":{startIndex:(e.tablePage.currentPage-1)*e.tablePage.pageSize},"pager-config":e.tablePage,"span-method":e.mergeRowMethod,"export-config":{cellRender:e.handleCellRender}},on:{"cell-click":e.cellClickEvent,"cell-dblclick":e.cellDBLClickEvent,"page-change":e.handlePageChange,"sort-change":e.sortChange,"checkbox-change":e.checkboxChangeEvent,"checkbox-all":e.checkboxChangeEvent,"current-change":e.currentChangeEvent},scopedSlots:e._u([{key:"pager_left",fn:function(){return[a("div",{staticClass:"page-left"},[a("div",[e._t("tableOperation")],2)])]},proxy:!0}],null,!0)})],1)},n=[],i=(a("4de4"),a("caad"),a("a9e3"),a("2532"),{props:{rowStyle:{type:Function},headerStyle:{type:Function},resizable:{type:Boolean,default:!0},tableName:{type:String,required:!0},showHeader:{type:Boolean,default:!0},border:{type:[Boolean,String],default:!0},autoResize:{type:Boolean,default:!0},headerAlign:{type:String,default:"center"},showFooter:{type:Boolean,default:!1},showFooterOverflow:{type:[Boolean,String],default:"tooltip"},showOverflow:{type:[Boolean,String],default:"tooltip"},stripe:{type:Boolean,default:!0},maxHeight:{type:[Number,String],default:""},height:{type:[Number,String],default:"500px"},size:{type:String,default:"small"},highlightHoverRow:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!1},tableLoading:{type:Boolean,default:!1},tooltipConfig:{type:Object,default:function(){return{theme:"light",enterable:!0}}},checkboxConfig:{type:Object,default:function(){return{}}},exportConfig:{type:Object,default:function(){return{}}},keepSource:{type:Boolean,default:!1},editConfig:{type:[Boolean,Object],default:!1},tableDatas:{type:Array,required:!0},tableColumns:{type:Array,required:!0},tablePage:{type:Object,required:!0},checkRecords:{type:Array,default:function(){return[]}}},data:function(){return{isAllChecked:!1,isIndeterminate:!1,selectRecords:[],mergeArr:[]}},watch:{checkRecords:function(e,t){0===e.length&&this.checkboxChangeEvent([])}},methods:{handleCellRender:function(e){var t=e.row,a=e.column,r=e.cellValue;return console.log(666,t,a,r),{style:"color: red;"}},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.isAllChecked=!1,this.selectRecords=[],this.$emit("onTablePageChange",t,a)},sortChange:function(e){e.column;var t=e.property,a=e.order;console.log(666),this.isAllChecked=!1,this.selectRecords=[],this.$emit("sortChange",t,a)},checkboxChangeEvent:function(e){var t=e.records;this.isAllChecked=this.$refs[this.tableName+"Table"].isAllCheckboxChecked(),this.isIndeterminate=this.$refs[this.tableName+"Table"].isCheckboxIndeterminate(),t?this.selectRecords=t:(this.selectRecords=[],this.isIndeterminate=!1),0===this.selectRecords.length&&(this.isAllChecked=!1),this.$emit("chooseCheck",t)},changeAllEvent:function(){this.$refs[this.tableName+"Table"].setAllCheckboxRow(this.isAllChecked),this.selectRecords=this.$refs[this.tableName+"Table"].getCheckboxRecords(),0===this.selectRecords.length&&(this.isAllChecked=!1),this.$emit("chooseCheck",this.selectRecords)},exportData:function(e,t,a){console.log(a);var r={isColgroup:!0,filename:e,useStyle:!0,type:"xlsx",columns:a.filter((function(e){return console.log(e),""!==e.field})),data:t};this.$refs[this.tableName+"Table"].exportData(r)},exportDatax:function(e,t,a){console.log(a);var r={isColgroup:!0,filename:e,useStyle:!0,type:"csv",data:t};a&&(r.columnFilterMethod=function(e){return a.includes(e.property)}),this.$refs[this.tableName+"Table"].exportData(r)},cellClickEvent:function(e){var t=e.row;this.$emit("clickRows",t)},cellDBLClickEvent:function(e){var t=e.row;this.$emit("dbclickRows",t)},currentChangeEvent:function(e){var t=e.row,a=this.$refs[this.tableName+"Table"].$getRowIndex(t);this.$emit("currentChangeEvent",t,a)},setCurrentRow:function(e){this.$refs[this.tableName+"Table"].setCurrentRow(this.tableDatas[e])},clearCurrentRow:function(){this.$refs[this.tableName+"Table"].clearCurrentRow()},toggleCheckboxRow:function(e){this.$refs[this.tableName+"Table"].toggleCheckboxRow(e)},clearCheckboxRow:function(){this.$refs[this.tableName+"Table"].clearCheckboxRow()},getCheckboxRecords:function(){return this.$refs[this.tableName+"Table"].getCheckboxRecords()},getRadioRecord:function(){return this.$refs[this.tableName+"Table"].getRadioRecord()},setCheckboxRow:function(e,t){return this.$refs[this.tableName+"Table"].setCheckboxRow(e,t)},mergeRowMethod:function(e){var t=e.row,a=e.$rowIndex,r=e.column,n=e.data,i=this.mergeArr;if(this.mergeArr.length>0){var o=t[r.property];if(o&&i.includes(r.property)){var c=t[i[0]],l=n[a-1],s=n[a+1];if(l&&l[r.property]===o&&l[i[0]]===c)return{rowspan:0,colspan:0};var u=1;while(s&&s[r.property]===o&&s[i[0]]===c)s=n[++u+a];if(u>1)return{rowspan:u,colspan:1}}}}}}),o=i,c=(a("bf39"),a("2877")),l=Object(c["a"])(o,r,n,!1,null,"00902082",null);t["a"]=l.exports},d456:function(e,t,a){"use strict";var r=a("bbf7"),n=a.n(r);n.a},dec0:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search_content"},[e.isShowSelectPage?a("el-select",{staticClass:"commonSelect m-r10",attrs:{placeholder:"请选择报表"},on:{change:e.selectPage},model:{value:e.pagePath,callback:function(t){e.pagePath=t},expression:"pagePath"}},e._l(e.pageList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),e._l(e.searchOptions,(function(t){return a("div",{key:t.key,staticClass:"item_condition"},[t.name&&"cascader"===t.type?a("span",[e._v("车间: ")]):e._e(),"cascader"===t.type?a("el-cascader",{ref:"demoCascader",refInFor:!0,staticClass:"formItem_full",attrs:{options:e.groupOptions,"show-all-levels":!1,filterable:"",props:{checkStrictly:!0,expandTrigger:"hover"}},on:{change:e.transmitYieldName},model:{value:e.searchData[t.key],callback:function(a){e.$set(e.searchData,t.key,a)},expression:"searchData[item.key]"}}):e._e(),"select"===t.type?a("el-select",{staticClass:"commonSelect",attrs:{placeholder:"请选择"},on:{change:function(a){return e.transmitName(a,t.options)}},model:{value:e.searchData[t.key],callback:function(a){e.$set(e.searchData,t.key,a)},expression:"searchData[item.key]"}},e._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t.name&&"daterange"===t.type?a("span",[e._v("时间: ")]):e._e(),"daterange"===t.type?a("el-select",{staticClass:"timeType",attrs:{placeholder:"请选择"},model:{value:e.searchData["timeKeyEnum"],callback:function(t){e.$set(e.searchData,"timeKeyEnum",t)},expression:"searchData['timeKeyEnum']"}},e._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1):e._e(),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"MONTH"===e.searchData["timeKeyEnum"]&&"daterange"===t.type,expression:"searchData['timeKeyEnum'] === 'MONTH' && item.type === 'daterange'"}],attrs:{type:"year",placeholder:"请选择"},model:{value:e.searchData[t.key],callback:function(a){e.$set(e.searchData,t.key,a)},expression:"searchData[item.key]"}}),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"DAY"===e.searchData["timeKeyEnum"]&&"daterange"===t.type,expression:"searchData['timeKeyEnum'] === 'DAY' && item.type === 'daterange'"}],attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchData[t.key],callback:function(a){e.$set(e.searchData,t.key,a)},expression:"searchData[item.key]"}}),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"HOUR"===e.searchData["timeKeyEnum"]&&"daterange"===t.type,expression:"searchData['timeKeyEnum'] === 'HOUR' && item.type === 'daterange'"}],attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchData[t.key],callback:function(a){e.$set(e.searchData,t.key,a)},expression:"searchData[item.key]"}}),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"LESSON"===e.searchData["timeKeyEnum"]&&"daterange"===t.type,expression:"searchData['timeKeyEnum'] === 'LESSON' && item.type === 'daterange'"}],attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchData[t.key],callback:function(a){e.$set(e.searchData,t.key,a)},expression:"searchData[item.key]"}}),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"DAY"===e.searchData["timeKeyEnum"]&&"date"===t.type,expression:"searchData['timeKeyEnum'] === 'DAY' && item.type === 'date'"}],attrs:{type:"date",placeholder:"选择日期"},model:{value:e.searchData[t.key],callback:function(a){e.$set(e.searchData,t.key,a)},expression:"searchData[item.key]"}})],1)})),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e.isShowSelectPage?a("el-button",{staticClass:"backBtn",on:{click:e.back}},[e._v("返回")]):e._e()],2)},n=[],i=(a("4de4"),a("a9e3"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("841c"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),o=a("f82c"),c=a("582a"),l={name:"searchBar",props:{searchData:{type:Object,default:function(){return{}}},searchOptions:{type:Array,default:function(){return[]}},groupSearchType:{type:Number,default:1}},data:function(){return{groupValue:"",timeType:"天",year:"",day:"",groupOptions:[],deviceCode:"",deviceName:"",pagePath:"",isShowSelectPage:!1,pageList:[{label:"OEE推移图",value:"/xwreport/oee"},{label:"产能推移图",value:"/xwreport/capacity"},{label:"当机推移图",value:"/xwreport/currentCapacity"},{label:"DT柏拉图及明细",value:"/xwreport/DTplato"},{label:"良率报表",value:"/xwreport/yieldReport"},{label:"DT改善决策及水平展开",value:"/xwreport/troubleImprove"},{label:"OEE报表",value:"/xwreport/currentDetail"}]}},created:function(){this.pathname=location.pathname;var e=new URLSearchParams(location.search);this.isShowSelectPage=e.has("deviceCode"),this.deviceCode=e.get("deviceCode"),this.deviceName=e.get("deviceName"),this.getGroupData()},methods:{back:function(){this.$router.back()},selectPage:function(e){this.$router.replace({path:e,query:{deviceCode:this.deviceCode,deviceName:this.deviceName}})},transmitName:function(e,t){var a=t.filter((function(t){return t.value===e}))[0].label;this.$emit("transmitName",a)},transmitYieldName:function(){var e=this.$refs.demoCascader[0].getCheckedNodes()[0].label;this.$refs.demoCascader[0].dropDownVisible=!1,this.$emit("transmitYieldName",e)},search:function(){this.$emit("search")},getGroupData:function(){1===this.groupSearchType?this.getGroupLineDevice():2===this.groupSearchType&&this.getGroupLine()},getGroupLineDevice:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},t.next=4,Object(o["d"])(a,{});case 4:r=t.sent,r.code===c["M"].OPERATION_SUCCESS&&(e.groupOptions=r.rows,e.deviceCode&&"/xwreport/currentDetail"!==e.pathname&&(e.searchData.groupValue=e.getParentsById(e.groupOptions,e.deviceCode),e.$nextTick((function(){var t=e.$refs.demoCascader[0].getCheckedNodes()[0].label;e.$emit("transmitYieldName",t)}))),e.$emit("getGroupSucceed")),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getGroupLine:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},t.next=4,Object(o["e"])(a,{});case 4:r=t.sent,r.code===c["M"].OPERATION_SUCCESS&&(e.groupOptions=r.rows),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getParentsById:function(e,t){for(var a in e){if(e[a].value===t)return[e[a].value];if(e[a].children){var r=this.getParentsById(e[a].children,t);if(void 0!==r)return r.unshift(e[a].value),r}}}}},s=l,u=(a("40e5"),a("2877")),d=Object(u["a"])(s,r,n,!1,null,"5618a144",null);t["a"]=d.exports},e960:function(e,t,a){"use strict";var r=a("7bff"),n=a.n(r);n.a}}]);
//# sourceMappingURL=chunk-bc64fd9a.de333c57.js.map