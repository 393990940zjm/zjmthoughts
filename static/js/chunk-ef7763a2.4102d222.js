(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef7763a2"],{"1a3d":function(e,t,s){"use strict";var i=s("1d48"),n=s.n(i);n.a},"1d48":function(e,t,s){},5426:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.showPage,expression:"showPage === 0"}]},[s("el-container",{staticClass:"content"},[s("el-header",[s("header-buttons",{attrs:{cssType:"1"},on:{buttonClickEvent:e.buttonClickEvent}})],1),s("el-main",[s("div",{staticClass:"area-main"},[s("div",{staticClass:"area-info"},[[s("div",{staticClass:"userInformation"},[s("vxe-grid",{ref:"xGrid",staticClass:"vxe-table-element",attrs:{border:"full",resizable:"","keep-source":"",height:"550","highlight-current-row":"","radio-config":{trigger:"row"},columns:e.tableColumns,data:e.tableDatas,"edit-config":{trigger:"click",mode:"cell",showStatus:!1,icon:"fa fa-file-text-o"}}})],1)]],2)])]),s("el-dialog",{class:["processCard",e.$store.state.dialogMarginClass],attrs:{title:e.BTN_TEXT.MODIFY,width:"600px",visible:e.dialogVisibleUpdate},on:{"update:visible":function(t){e.dialogVisibleUpdate=t}}},[s("div",{staticClass:"cardDiv"},[s("el-button",{staticClass:"addAduit",attrs:{size:"mini",type:"",disabled:2==e.auditPersonArr.length},on:{click:e.addAuditPerson}},[e._v(e._s(e.CONSTANTS_PROCESS.ADD_AUDIT))]),s("div",{staticClass:"box-card-content"},[s("div",{staticClass:"sCode sCode_circle"},[s("div",{staticClass:"circle"}),s("p",[e._v(e._s(e.CONSTANTS_PROCESS.START))])]),s("div",{staticClass:"sCode sCode_img"},[s("div",{staticClass:"imgB"})]),e._l(e.auditPersonArr,(function(t,i){return s("div",{key:i,staticClass:"sCode sCode_box"},[s("div",{staticClass:"box"},[s("p",[e._v(" "+e._s(e.CONSTANTS_PROCESS.AUDIT+e.showNumIndex(i))+" "),0!=i?s("span",{staticClass:"closeImg",on:{click:function(t){return e.closeAuditPerson(i)}}}):e._e()]),s("p",{staticClass:"chooseAudit",on:{click:function(t){return e.showAuditModal(i)}}},[e._v(e._s(t.personName))])]),s("div",{staticClass:"sCode sCode_img",staticStyle:{float:"right"}},[s("div",{staticClass:"imgB"})])])})),s("div",{staticClass:"sCode sCode_circle"},[s("div",{staticClass:"circle"}),s("p",[e._v(e._s(e.CONSTANTS_PROCESS.END))])])],2)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.submitProcess}},[e._v(e._s(e.BTN_TEXT.CONFIRM))]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleUpdate=!1}}},[e._v(e._s(e.BTN_TEXT.CANCEL))])],1)]),s("el-dialog",{class:["processCard",e.$store.state.dialogMarginClass],attrs:{title:e.BTN_TEXT.MODIFY,width:"600px",visible:e.dialogVisibleAuditUser},on:{"update:visible":function(t){e.dialogVisibleAuditUser=t}}},[s("div",{staticClass:"staff-list"},[s("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.auditPersonOptions,(function(t){return s("el-checkbox",{key:t.userId,attrs:{label:t.userId}},[e._v(e._s(t.userName+"("+t.realName+")"))])})),1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.submitAuditUser}},[e._v(e._s(e.BTN_TEXT.CONFIRM))]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleAuditUser=!1}}},[e._v(e._s(e.BTN_TEXT.CANCEL))])],1)])],1)],1)])},n=[],o=(s("a15b"),s("a434"),s("a9e3"),s("96cf"),s("1da1")),a=s("85a8"),r=s("5861"),l=s("cf46"),c=s("3fa5"),u=s("6464"),d=s("582a"),h=s("eec9"),m=s("bcc1"),C=s("f82c"),f=s("b775"),v=function(e,t){return Object(f["k"])("review/selectList.action?",e,t)},p=function(e,t){return Object(f["j"])("review/updateWorkflowById.action?",e)},b=function(e,t){return Object(f["k"])("configuration/updateProcessConfiguration.action?",e,t)},w=function(e,t){return Object(f["k"])("user/getAll.action?",e,t)},g=function(e,t){return Object(f["k"])("review/selectInfoById.action?",e,t)},k={name:"ProcessConfiguration",components:{HeaderTitle:a["a"],HeadOperationItem:r["a"],VXETable:l["a"],SearchBox:h["a"],CustomColumn:m["a"]},data:function(){return{VARIABLE:d["P"],BTN_TEXT:d["c"],CONSTANTS_PROCESS:d["l"],formUpdate:{},isSearchBoxShow:!1,searchList:[],searchData:[],codeOptions:[],dataChecks:[],tableName:"device",showPage:0,formParams:{model:null},titlename:"",dialogVisibleUpdate:!1,tableLoading:!1,tablePage:{total:0,currentPage:1,pageSize:10,pageSizes:[5,10,20,50,100,200,500],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0,slots:{left:"pager_left"}},tableDatas:[],tableColumns:[{type:"radio",align:"center",visible:!0,width:"50"},{field:"reviewName",title:d["l"].PROCESS_NAME,align:"center"},{field:"isGrab",title:d["l"].IS_OPEN_ACCEPT,align:"center",editRender:{name:"$select",options:[{label:d["P"].YES,value:!0},{label:d["P"].NO,value:!1}],events:{change:this.sexChangeEvent}}},{field:"isReview",title:d["l"].IS_OPEN_AUDIT,align:"center",editRender:{name:"$select",options:[{label:d["P"].YES,value:!0},{label:d["P"].NO,value:!1}],events:{change:this.sexChangeEvent}}}],dialogVisibleCustomColumn:!1,processAudit:1,auditPersonOptions:[],checkList:[],auditPersonArr:[],dialogVisibleAuditUser:!1,nowChoose:0,reviewId:0}},computed:{},created:function(){this.findList()},watch:{dialogVisibleUpdate:function(e){!1===e&&this.$refs.updateForm.resetFields()}},methods:{buttonClickEvent:function(e){this["".concat(e)]()},setProcess:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s,i,n,o,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s={},e.$refs.xGrid.getRadioRecord()){t.next=6;break}return Object(c["c"])("请选择要操作的数据！"),t.abrupt("return",!1);case 6:s=e.$refs.xGrid.getRadioRecord();case 7:return e.auditPersonArr=[],e.reviewId=s.reviewId,e.dialogVisibleUpdate=!0,e.auditPersonArr.push({personName:d["l"].SELECT_AUDIT,ids:[]}),t.prev=11,t.next=14,g({configurationId:e.reviewId},{});case 14:if(i=t.sent,i.code===d["M"].OPERATION_SUCCESS&&i.rows.workflowList.length>0)for(n=0;n<i.rows.workflowList.length;n++)if(i.rows.workflowList[n].userList.length>0){for(e.auditPersonArr[n]||e.auditPersonArr.push({personName:d["l"].SELECT_AUDIT,ids:[]}),o=i.rows.workflowList[n].userList,e.auditPersonArr[n].ids=[],a=[],r=0;r<o.length;r++)e.auditPersonArr[n].ids.push(o[r].userId),o[r].userName&&a.push(o[r].userName);e.auditPersonArr[n].personName=a.join(",")}t.next=20;break;case 18:t.prev=18,t.t0=t["catch"](11);case 20:return t.prev=20,t.finish(20);case 22:case"end":return t.stop()}}),t,null,[[11,18,20,22]])})))()},findList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.tableLoading=!0,t.next=4,v({},{});case 4:s=t.sent,s.code===d["M"].OPERATION_SUCCESS?(e.tableDatas=s.rows,e.tablePage.total=s.total,e.tableLoading=!1):Object(c["c"])(s.message),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Object(u["a"])(d["N"].NOTIFY,t.t0);case 11:return t.prev=11,t.finish(11);case 13:case"end":return t.stop()}}),t,null,[[0,8,11,13]])})))()},refreshTable:function(){this.findList()},addAuditPerson:function(){this.auditPersonArr.push({personName:d["l"].SELECT_AUDIT,ids:[]})},closeAuditPerson:function(){this.auditPersonArr.splice(1,1)},showAuditModal:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.checkList=[],t.dialogVisibleAuditUser=!0,t.nowChoose=e,s.prev=3,s.next=6,w({},{});case 6:i=s.sent,i.code===d["M"].OPERATION_SUCCESS?(t.auditPersonOptions=i.rows,t.checkList=t.auditPersonArr[e].ids):Object(c["c"])(i.message),s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](3),Object(u["a"])(d["N"].NOTIFY,s.t0);case 13:return s.prev=13,s.finish(13);case 15:case"end":return s.stop()}}),s,null,[[3,10,13,15]])})))()},submitAuditUser:function(){if(this.dialogVisibleAuditUser=!1,0===this.checkList.length)this.auditPersonArr[this.nowChoose].personName=d["l"].SELECT_AUDIT,this.auditPersonArr[this.nowChoose].ids=[];else{for(var e=[],t=0;t<this.auditPersonOptions.length;t++)for(var s=0;s<this.checkList.length;s++)Number(this.checkList[s])===this.auditPersonOptions[t].userId&&e.push(this.auditPersonOptions[t].userName);this.auditPersonArr[this.nowChoose].personName=e.join(","),this.auditPersonArr[this.nowChoose].ids=Object(C["b"])(this.checkList)}},sexChangeEvent:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var s,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.row,i="",n="",i=1===s.reviewType?"REPAIR":"MAINTAIN",!0===s.isGrab&&!0===s.isReview?n="1-2-3-4":!1===s.isGrab&&!0===s.isReview?n="2-3-4":!1===s.isGrab&&!1===s.isReview?n="2-4":!0===s.isGrab&&!1===s.isReview&&(n="1-2-4"),t.prev=5,t.next=8,b({configurationRelationTypeEnum:i,processConfiguration:n},{});case 8:o=t.sent,o.code===d["M"].OPERATION_SUCCESS?Object(c["b"])(o.message):Object(c["c"])(o.message),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),Object(u["a"])(d["N"].NOTIFY,t.t0);case 15:return t.prev=15,t.finish(15);case 17:case"end":return t.stop()}}),t,null,[[5,12,15,17]])})))()},submitProcess:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s,i,n,o,a,r,l,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(t.prev=0,s=[],i=0;i<e.auditPersonArr.length;i++)if(e.auditPersonArr[i].ids.length>0){for(n={userList:[]},o=e.auditPersonArr[i].ids,a=0;a<o.length;a++)r={userId:o[a]},n.userList.push(r);s.push(JSON.stringify(n))}return l="["+s.join(",")+"]",t.next=6,p({reviewId:e.reviewId,workflow:l});case 6:h=t.sent,h.code===d["M"].OPERATION_SUCCESS?(Object(c["b"])(h.message),e.dialogVisibleUpdate=!1):Object(c["c"])(h.message),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),Object(u["a"])(d["N"].NOTIFY,t.t0);case 13:return t.prev=13,t.finish(13);case 15:case"end":return t.stop()}}),t,null,[[0,10,13,15]])})))()},showNumIndex:function(e){var t="";switch(e){case 0:t="①";break;case 1:t="②";break}return t}}},_=k,T=_,O=(s("1a3d"),s("2877")),A=Object(O["a"])(T,i,n,!1,null,"3e6797a3",null);t["default"]=A.exports},"857a":function(e,t,s){var i=s("1d80"),n=/"/g;e.exports=function(e,t,s,o){var a=String(i(e)),r="<"+t;return""!==s&&(r+=" "+s+'="'+String(o).replace(n,"&quot;")+'"'),r+">"+a+"</"+t+">"}},9914:function(e,t,s){"use strict";var i=s("f8f0"),n=s.n(i);n.a},af03:function(e,t,s){var i=s("d039");e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},bcc1:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("vue-draggable",{staticClass:"draggable",attrs:{animation:"380",ghostClass:"ghost",handle:".move-row"},model:{value:e.headColumn,callback:function(t){e.headColumn=t},expression:"headColumn"}},e._l(e.headColumn,(function(t){return s("li",{key:t.field,staticClass:"node-row"},[s("el-checkbox",{attrs:{disabled:!0,checked:t.visible}}),s("div",{staticClass:"headProess move-row"},[s("div",{staticClass:"title move-row"},[e._v(" "+e._s(t.title)+" "),s("i",{staticClass:"icon-button",attrs:{icon:"node-move"}})]),s("div",{staticClass:"proess",style:"width:"+t.width})]),s("el-input",{model:{value:t.width,callback:function(s){e.$set(t,"width",s)},expression:"item.width"}},[s("template",{slot:"append"},[e._v("px")])],2)],1)})),0),s("vue-draggable",{staticClass:"draggable",attrs:{animation:"380",ghostClass:"ghost",handle:".move-row"},model:{value:e.middleColumn,callback:function(t){e.middleColumn=t},expression:"middleColumn"}},e._l(e.middleColumn,(function(t){return s("li",{key:t.field,staticClass:"node-row move-row"},[s("el-checkbox",{attrs:{checked:t.visible},on:{change:function(s){return e.checkChange(t)}}}),s("div",{staticClass:"headProess move-row"},[s("div",{staticClass:"title"},[e._v(" "+e._s(t.title)+" "),s("i",{staticClass:"icon-button",attrs:{icon:"node-move"}})]),s("div",{staticClass:"proess",style:"width:"+t.width})]),s("el-input",{model:{value:t.width,callback:function(s){e.$set(t,"width",s)},expression:"item.width"}},[s("template",{slot:"append"},[e._v("px")])],2)],1)})),0),s("vue-draggable",{staticClass:"draggable",attrs:{animation:"380",ghostClass:"ghost",handle:".move-row"},model:{value:e.operationColumn,callback:function(t){e.operationColumn=t},expression:"operationColumn"}},e._l(e.operationColumn,(function(t){return s("li",{key:t.field,staticClass:"node-row"},[s("el-checkbox",{attrs:{disabled:!0,checked:t.visible}}),s("div",{staticClass:"headProess move-row"},[s("div",{staticClass:"title"},[e._v(" "+e._s(t.title)+" "),s("i",{staticClass:"icon-button",attrs:{icon:"node-move"}})]),s("div",{staticClass:"proess",style:"width:"+t.width})]),s("el-input",{model:{value:t.width,callback:function(s){e.$set(t,"width",s)},expression:"item.width"}},[s("template",{slot:"append"},[e._v("px")])],2)],1)})),0),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.saveCustomColumn}},[e._v(e._s(e.BTN_TEXT.CONFIRM))]),s("el-button",{on:{click:e.canleCustomColumn}},[e._v(e._s(e.BTN_TEXT.CLOSE))]),s("el-button",{on:{click:e.resetCustomColumn}},[e._v(e._s(e.BTN_TEXT.RESTORE_DEFAULT))])],1)],1)},n=[],o=(s("99af"),s("c7cd"),s("53ca")),a=s("582a"),r=s("310e"),l=s.n(r),c={components:{VueDraggable:l.a},props:{nowColumns:{type:Array,default:function(){return[]}}},data:function(){return{first:!1,BTN_TEXT:a["c"],checkColumn:[],headColumn:[],middleColumn:[],operationColumn:[],columns:[],oldColumns:[],width:[]}},computed:{},created:function(){var e=this;this.$nextTick((function(){e.oldColumns=e.deepClone(e.nowColumns),e.checkColumn=[],e.headColumn=[],e.middleColumn=[],e.operationColumn=[],e.columns=[];for(var t=0;t<e.nowColumns.length;t++)if("checkbox"!==e.nowColumns[t].type){void 0===e.nowColumns[t].visible&&(e.nowColumns[t].visible=!0);var s={};void 0===e.nowColumns[t].width?(e.nowColumns[t].width="auto",s.width="auto",s.field=e.nowColumns[t].field):(s.width=e.nowColumns[t].width,s.field=e.nowColumns[t].field),e.width.push(s),"left"===e.nowColumns[t].fixed?e.headColumn.push(e.deepClone(e.nowColumns[t])):"right"===e.nowColumns[t].fixed?e.operationColumn.push(e.deepClone(e.nowColumns[t])):e.middleColumn.push(e.deepClone(e.nowColumns[t]))}else e.checkColumn.push(e.deepClone(e.nowColumns[t]))}))},methods:{init:function(e){var t=this;this.$nextTick((function(){t.checkColumn=[],t.headColumn=[],t.middleColumn=[],t.operationColumn=[],t.columns=[],setTimeout((function(){for(var s=0;s<e.length;s++)if("checkbox"!==e[s].type){for(var i in void 0===e[s].visible&&(e[s].visible=!0),t.width)t.width[i].field===e[s].field&&(e[s].width=t.width[i].width);"left"===e[s].fixed?t.headColumn.push(e[s]):"right"===e[s].fixed?t.operationColumn.push(e[s]):t.middleColumn.push(e[s])}else t.checkColumn.push(e[s])}),0)}))},saveCustomColumn:function(){var e=this;this.columns=[],this.columns=this.columns.concat(this.checkColumn).concat(this.headColumn).concat(this.middleColumn).concat(this.operationColumn),setTimeout((function(){for(var t in e.oldColumns=e.deepClone(e.columns),e.width=[],e.columns){var s={};s.width=e.nowColumns[t].width,s.field=e.nowColumns[t].field,e.width.push(s)}e.$emit("saveCustomColumn",e.columns)}),150)},deepClone:function(e){var t=Array.isArray(e)?[]:{};if(e&&"object"===Object(o["a"])(e))for(var s in e)e.hasOwnProperty(s)&&(e[s]&&"object"===Object(o["a"])(e[s])?t[s]=this.deepClone(e[s]):t[s]=e[s]);return t},checkChange:function(e){e.visible=!e.visible},canleCustomColumn:function(){this.$emit("showCustomColumn")},resetCustomColumn:function(){this.$emit("resetCustomColumn")}}},u=c,d=(s("9914"),s("2877")),h=Object(d["a"])(u,i,n,!1,null,"17e8e46c",null);t["a"]=h.exports},c7cd:function(e,t,s){"use strict";var i=s("23e7"),n=s("857a"),o=s("af03");i({target:"String",proto:!0,forced:o("fixed")},{fixed:function(){return n(this,"tt","","")}})},f8f0:function(e,t,s){}}]);
//# sourceMappingURL=chunk-ef7763a2.4102d222.js.map