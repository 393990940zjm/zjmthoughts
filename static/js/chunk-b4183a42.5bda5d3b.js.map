{"version":3,"sources":["webpack:///./src/components/common/ZTree/ZTree.vue?3dbc","webpack:///./src/components/common/DeviceDialog/deviceDialog.vue?7bf2","webpack:///./src/assets/js/common/DeviceDialog/deviceDialog.js","webpack:///src/components/common/DeviceDialog/deviceDialog.vue","webpack:///./src/components/common/DeviceDialog/deviceDialog.vue?9115","webpack:///./src/components/common/DeviceDialog/deviceDialog.vue?0069","webpack:///./src/components/common/ZTree/ZTree.vue?5ffd","webpack:///src/components/common/ZTree/ZTree.vue","webpack:///./src/components/common/ZTree/ZTree.vue?ff88","webpack:///./src/components/common/ZTree/ZTree.vue?e7f4","webpack:///./src/components/common/DeviceDialog/deviceDialog.vue?13b9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","refreshTableData","model","value","callback","$$v","tabPosition","expression","_v","_s","CONSTANTS_DEVICE_CONFIGURATION","WORKSHOP_GROUP","DEVICE_TYPE","nodeData","ztreeOnClick","ztreeHandleCreated","HeadTitleName","slot","HeadTitleUrl","ref","tableName","tableLoading","tablePage","tableDatas","tableColumns","sortChange","onTablePageChange","tableChooseCheck","submitEdit","buttonName","cancelBtnClick","BTN_TEXT","CANCEL","staticRenderFns","components","HeaderTitle","HeadOperationItem","VXETable","ZTree","props","currentChangeRow","type","Object","default","isFunc","Boolean","isMainTain","String","SAVE","data","deviceName","DEVICE_LIST","searchIdArr","deviceChecks","showModelItem","fatherNodeData","showPage","modelOptions","formParams","devForm","devName","devCode","formInline","cnName","shortName","parameterName","isWarning","rules","name","required","message","MSG","PLEASE_ENTER_CONTENT","trigger","operaType","formLabelWidth","formLabelWidthShort","rightMenu","form","titlename","dialogVisibleQrCode","dialogVisibleUpdate","dialogVisible","ztreeObj","ztreeSelectedNode","id","pId","total","currentPage","pageSize","pageSizes","layouts","perfect","slots","left","width","fixed","align","field","title","DEVICE_NAME","DEVICE_CODE","sortable","visible","DEVICE_PRCODE","minWidth","DEVICE_EXTEND","MODE","TYPE","GROUP_NAME","COMMISSIONING_DATE","formatter","cellValue","row","column","moment","format","MANUFACTURER","contrastData","filterName","savedSearchCondition","orderByData","computed","created","getTree","findList","watch","methods","property","order","event","nodes","obj","nameUrl","push","node","getParentNode","reverse","join","getChildren","ids","treeNode","isParent","children","params","current","size","conditionJson","conditionJson1","operatorGroup","conditionJson2","orderBy","length","searchCondetionFunc","operator","ptype","deviceGetPageDeviceComplexByConditionAction","res","code","STATUS_CODE","OPERATION_SUCCESS","rows","toFindCheck","showWarningMessage","showErrorNotify","TITLE","NOTIFY","deviceGroupGetTreeAction","deviceWorkshopTypeGetTreeAction","paramJson","userId","deviceUserRelationshipEnum","deviceUserRelationshipGetPageUserRelationshipDeviceByUserIdAction","i","j","deviceCode","$refs","xGrid","toggleCheckboxRow","checkedData","getCheckboxRecords","$emit","component","setting","handleCreated","tree","isCheck","isExpendAll","isOneExpendAll","Array","selectedNode","check","enable","simpleData","idKey","pIdKey","rootPId","onClick","onCheck","onRightClick","evt","expandAll","transformToArray","getNodes","expandNode","selectNode","getNodesByParam","addFlag","isSilent"],"mappings":"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","file":"static/js/chunk-b4183a42.5bda5d3b.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZTree.vue?vue&type=style&index=0&id=812aacfc&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZTree.vue?vue&type=style&index=0&id=812aacfc&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticClass:\"content\"},[_c('el-main',[_c('header-search',{attrs:{\"show-primary-search\":true,\"cssType\":\"8\"},on:{\"refreshTableData\":_vm.refreshTableData}}),_c('div',{staticClass:\"area-main\"},[_c('div',{staticClass:\"area-aside\"},[_c('div',{staticClass:\"area-tree\"},[_c('div',{staticClass:\"area-tabs\"},[_c('el-radio-group',{model:{value:(_vm.tabPosition),callback:function ($$v) {_vm.tabPosition=$$v},expression:\"tabPosition\"}},[_c('el-radio-button',{attrs:{\"label\":\"group\"}},[_vm._v(_vm._s(_vm.CONSTANTS_DEVICE_CONFIGURATION.WORKSHOP_GROUP))]),_c('el-radio-button',{attrs:{\"label\":\"type\"}},[_vm._v(_vm._s(_vm.CONSTANTS_DEVICE_CONFIGURATION.DEVICE_TYPE))])],1)],1),_c('div',{staticClass:\"area-zTree\"},[_c('ZTree',{attrs:{\"nodes\":_vm.nodeData},on:{\"ztreeOnClick\":_vm.ztreeOnClick,\"ztreeHandleCreated\":_vm.ztreeHandleCreated}})],1)])]),_c('div',{staticClass:\"area-info\"},[[_c('div',{staticClass:\"userInformation\"},[_c('HeaderTitle',{staticClass:\"header-title\",attrs:{\"titleName\":_vm.HeadTitleName}},[_c('div',{staticClass:\"head-search\",attrs:{\"slot\":\"head-search\"},slot:\"head-search\"},[_vm._v(_vm._s(_vm.HeadTitleUrl))])]),_c('VXETable',{ref:\"xGrid\",attrs:{\"id\":\"table\",\"tableName\":_vm.tableName,\"tableLoading\":_vm.tableLoading,\"pager-config\":_vm.tablePage,\"tableDatas\":_vm.tableDatas,\"tableColumns\":_vm.tableColumns,\"tablePage\":_vm.tablePage},on:{\"sortChange\":_vm.sortChange,\"onTablePageChange\":_vm.onTablePageChange,\"chooseCheck\":_vm.tableChooseCheck}}),_c('div',{staticClass:\"btnDiv\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitEdit}},[_vm._v(_vm._s(_vm.buttonName))]),_c('el-button',{on:{\"click\":_vm.cancelBtnClick}},[_vm._v(_vm._s(_vm.BTN_TEXT.CANCEL))])],1)],1)]],2)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Descripttion: 设备配置主页面js\r\n * @version: 0.1\r\n * @Author: ZJM\r\n * @Date: 2020-05-21 15:26:48\r\n * @LastEditors: ZJM\r\n * @LastEditTime: 2022-11-02 10:49:48\r\n */\r\n// 引入标题组件\r\nimport HeaderTitle from '@/components/common/PageNavBar/HeaderTitle';\r\n// 引入标题元素组件\r\nimport HeadOperationItem from '@/components/common/PageNavBar/HeadOperationItem';\r\n// 引入ztree树形组件\r\nimport ZTree from '@/components/common/ZTree/ZTree';\r\n// 引入table组件\r\nimport VXETable from '@/components/common/Table';\r\n// 引入提示组件\r\nimport { showWarningMessage } from '@/utils/message';\r\nimport { showErrorNotify } from '@/utils/notify';\r\n// 引入通用接口\r\nimport {\r\n  STATUS_CODE,\r\n  TITLE,\r\n  MSG,\r\n  BTN_TEXT,\r\n  CONSTANTS_DEVICE_CONFIGURATION\r\n} from '@/utils/constantsFile';\r\n\r\n// 导入日期处理类库\r\nimport moment from 'moment';\r\n// 导入所需接口\r\nimport {\r\n  // deviceSelectDeviceByConditionAction,\r\n  deviceGetPageDeviceComplexByConditionAction,\r\n  deviceGroupGetTreeAction,\r\n  deviceWorkshopTypeGetTreeAction,\r\n  deviceUserRelationshipGetPageUserRelationshipDeviceByUserIdAction\r\n} from '@/api/management';\r\nimport {\r\n  searchCondetionFunc\r\n  //  formatJson\r\n} from '@/utils/publicFunction';\r\nexport default {\r\n  components: {\r\n    // 加载标题组件\r\n    HeaderTitle,\r\n    // 加载标题元素组件\r\n    HeadOperationItem,\r\n    // 加载table组件\r\n    VXETable,\r\n    // 加载树形组件\r\n    ZTree\r\n  },\r\n  props: {\r\n    currentChangeRow: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      }\r\n    },\r\n    // 判断执行绑定查询\r\n    isFunc: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 判断执行绑定查询\r\n    isMainTain: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    buttonName: {\r\n      type: String,\r\n      default: BTN_TEXT.SAVE\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      BTN_TEXT: BTN_TEXT,\r\n      CONSTANTS_DEVICE_CONFIGURATION: CONSTANTS_DEVICE_CONFIGURATION,\r\n      deviceName: '',\r\n      // 树导航标题\r\n      HeadTitleUrl: '',\r\n      // table标题\r\n      HeadTitleName: CONSTANTS_DEVICE_CONFIGURATION.DEVICE_LIST,\r\n      // 车间分组/类型 ids\r\n      searchIdArr: [],\r\n      // table多选数据\r\n      deviceChecks: [],\r\n      tableName: 'device',\r\n      // tab切换\r\n      tabPosition: 'group',\r\n      // 新增时显示模板选择\r\n      showModelItem: false,\r\n      // 父类型绑定的参数\r\n      fatherNodeData: [],\r\n      // 用于操作当前显示哪个组件 0：主页面 1：新增子节点参数\r\n      showPage: 0,\r\n      // 模板下拉\r\n      modelOptions: [],\r\n      // 表格查询表单数据\r\n      formParams: {\r\n        model: null\r\n      },\r\n      devForm: {\r\n        devName: '',\r\n        devCode: ''\r\n      },\r\n      // 查询表单数据\r\n      formInline: {\r\n        cnName: '',\r\n        shortName: '',\r\n        parameterName: '',\r\n        isWarning: 'null'\r\n      },\r\n      // 表单验证\r\n      rules: {\r\n        name: [\r\n          { required: true, message: MSG.PLEASE_ENTER_CONTENT, trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 操作标记 1、新增同级  2、新增下级 3、修改\r\n      operaType: 1,\r\n      // label文字长度\r\n      formLabelWidth: '150px',\r\n      // label文字短长度\r\n      formLabelWidthShort: '50px',\r\n      // 控制右键菜单的显示项\r\n      rightMenu: [],\r\n      // 表单数据\r\n      form: {\r\n        name: ''\r\n      },\r\n      // 模态框名称\r\n      titlename: '',\r\n      dialogVisibleQrCode: false,\r\n      // 控制模态框修改\r\n      dialogVisibleUpdate: false,\r\n      // 控制模态框是【节点维护】否显示\r\n      dialogVisible: false,\r\n      // ztree树形对象\r\n      ztreeObj: {},\r\n      // ztree选中节点对象\r\n      ztreeSelectedNode: {\r\n        id: '-1',\r\n        pId: '-1'\r\n      },\r\n      // ztree树形数据\r\n      nodeData: [],\r\n      // table加载动画\r\n      tableLoading: false,\r\n      // table分页配置\r\n      tablePage: {\r\n        total: 0,\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        pageSizes: [5, 10, 20, 50, 100, 1000, 10000],\r\n        layouts: [\r\n          'Sizes',\r\n          'PrevJump',\r\n          'PrevPage',\r\n          'Number',\r\n          'NextPage',\r\n          'NextJump',\r\n          'FullJump',\r\n          'Total'\r\n        ],\r\n        perfect: true,\r\n        slots: {\r\n          // 使用自定义插槽\r\n          left: 'pager_left'\r\n        }\r\n      },\r\n      // table数据\r\n      tableDatas: [],\r\n      // table表头配置\r\n      tableColumns: [\r\n        {\r\n          type: 'checkbox',\r\n          width: '50',\r\n          fixed: 'left',\r\n          align: 'center'\r\n        },\r\n        {\r\n          field: 'deviceName',\r\n          title: CONSTANTS_DEVICE_CONFIGURATION.DEVICE_NAME,\r\n          width: '150',\r\n          align: 'center'\r\n        },\r\n        {\r\n          field: 'deviceCode',\r\n          title: CONSTANTS_DEVICE_CONFIGURATION.DEVICE_CODE,\r\n          width: '200',\r\n          align: 'center',\r\n          sortable: true\r\n        },\r\n        {\r\n          field: 'devicePriCode',\r\n          visible: true,\r\n          title: CONSTANTS_DEVICE_CONFIGURATION.DEVICE_PRCODE,\r\n          minWidth: '200',\r\n          align: 'center',\r\n          sortable: true\r\n        },\r\n        {\r\n          field: 'number',\r\n          visible: true,\r\n          title: CONSTANTS_DEVICE_CONFIGURATION.DEVICE_EXTEND,\r\n          minWidth: '200',\r\n          align: 'center',\r\n          sortable: true\r\n        },\r\n        {\r\n          field: 'details',\r\n          visible: true,\r\n          title: '设备描述详情',\r\n          minWidth: '200',\r\n          align: 'center',\r\n          sortable: true\r\n        },\r\n        {\r\n          field: 'mode',\r\n          title: CONSTANTS_DEVICE_CONFIGURATION.MODE,\r\n          width: '150',\r\n          align: 'center'\r\n        },\r\n        {\r\n          field: 'typeName',\r\n          title: CONSTANTS_DEVICE_CONFIGURATION.TYPE,\r\n          width: '150',\r\n          align: 'center'\r\n        },\r\n        {\r\n          field: 'groupName',\r\n          title: CONSTANTS_DEVICE_CONFIGURATION.GROUP_NAME,\r\n          width: '150',\r\n          align: 'center'\r\n        },\r\n        {\r\n          field: 'commissioningDate',\r\n          title: CONSTANTS_DEVICE_CONFIGURATION.COMMISSIONING_DATE,\r\n          width: '150',\r\n          align: 'center',\r\n          formatter({ cellValue, row, column }) {\r\n            if (cellValue) {\r\n              return moment(cellValue).format('YYYY-MM-DD');\r\n            } else {\r\n              return '';\r\n            }\r\n          }\r\n        },\r\n        {\r\n          field: 'manufacturer',\r\n          title: CONSTANTS_DEVICE_CONFIGURATION.MANUFACTURER,\r\n          width: '150',\r\n          align: 'center'\r\n        }\r\n      ],\r\n      contrastData: [],\r\n      filterName: [],\r\n      savedSearchCondition: [],\r\n      orderByData: {}\r\n    };\r\n  },\r\n  computed: {},\r\n  created() {\r\n    // 调用查询树形数据接口\r\n    this.getTree();\r\n    // 调用设备列表查询\r\n    this.findList();\r\n  },\r\n  watch: {\r\n    // 切换车间分组和设备类型查询\r\n    tabPosition() {\r\n      // 表单数据\r\n      this.form = {\r\n        name: ''\r\n      };\r\n      // ztree选中节点对象\r\n      this.ztreeSelectedNode = {\r\n        id: '-1',\r\n        pId: '-1'\r\n      };\r\n\r\n      this.getTree();\r\n    }\r\n  },\r\n  methods: {\r\n    sortChange(property, order) {\r\n      this.orderByData = {};\r\n      this.orderByData[property] = order;\r\n      this.onTablePageChange(1, this.tablePage.pageSize);\r\n    },\r\n    tableChooseCheck() {},\r\n    /**\r\n     * @description: ztree单击事件\r\n     * @param event 事件对象\r\n     * @param nodes 选中数据对象\r\n     * @param obj ztree对象\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    ztreeOnClick(event, nodes, obj) {\r\n      // 遍历获取父级name和子级节点id\r\n      this.searchIdArr = [];\r\n      var nameUrl = [];\r\n      nameUrl.push(nodes.name);\r\n      var node = nodes.getParentNode();\r\n      while (node) {\r\n        nameUrl.push(node.name);\r\n        node = node.getParentNode();\r\n      }\r\n      this.HeadTitleUrl = nameUrl.reverse().join(' / ');\r\n      this.searchIdArr = this.getChildren(this.searchIdArr, nodes);\r\n\r\n      // 获取选中数据\r\n      this.ztreeSelectedNode = nodes;\r\n      // 获取ztree对象\r\n      this.ztreeObj = obj;\r\n      // 重置页数\r\n      this.tablePage.currentPage = 1;\r\n      // 调用查询\r\n      this.findList();\r\n    },\r\n    /**\r\n     * @description: 递归获取子级数据\r\n     * @param row 行数据\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    getChildren(ids, treeNode) {\r\n      ids.push(treeNode.id);\r\n      if (treeNode.isParent) {\r\n        for (var obj in treeNode.children) {\r\n          this.getChildren(ids, treeNode.children[obj]);\r\n        }\r\n      }\r\n      return ids;\r\n    },\r\n    /**\r\n     * @description: ztree初始化完成事件\r\n     * @param obj ztree对象\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    ztreeHandleCreated(obj) {\r\n      // 获取ztree对象\r\n      this.ztreeObj = obj;\r\n    },\r\n    /**\r\n     * @description: table分页\r\n     * @param currentPage 第几页\r\n     * @param pageSize 一页几条\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    onTablePageChange(currentPage, pageSize) {\r\n      // 点击页数写入table分页配置\r\n      this.tablePage.currentPage = currentPage;\r\n      // 一页条数夜路table分页配置\r\n      this.tablePage.pageSize = pageSize;\r\n      // 调用查询接口\r\n      this.findList();\r\n    },\r\n    /**\r\n     * @description: 刷新表格数据\r\n     * @param 无\r\n     * @return void\r\n     * @author: cyb\r\n     */\r\n    refreshTableData(savedSearchCondition) {\r\n      if (savedSearchCondition) {\r\n        this.savedSearchCondition = [...savedSearchCondition];\r\n        this.tablePage.currentPage = 1;\r\n      }\r\n      this.findList();\r\n    },\r\n    /**\r\n     * @description: 查询所属参数\r\n     * @param val\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    async findList() {\r\n      try {\r\n        // 显示table加载动画\r\n        this.tableLoading = true;\r\n\r\n        const params = {\r\n          current: this.tablePage.currentPage,\r\n          size: this.tablePage.pageSize\r\n        };\r\n        // if (this.searchIdArr.length > 0) {\r\n        //   if (this.tabPosition === 'group') {\r\n        //     params.groupIdList = this.searchIdArr;\r\n        //   } else if (this.tabPosition === 'type') {\r\n        //     params.typeIdList = this.searchIdArr;\r\n        //   }\r\n        // }\r\n        var conditionJson = {\r\n          conditionJson1: [],\r\n          operatorGroup: 1,\r\n          conditionJson2: [],\r\n          orderBy: this.orderByData\r\n        };\r\n        if (this.savedSearchCondition.length > 0) {\r\n          conditionJson = searchCondetionFunc(...this.savedSearchCondition);\r\n        }\r\n\r\n        if (this.searchIdArr.length > 0) {\r\n          if (this.tabPosition === 'group') {\r\n            conditionJson.conditionJson1.push({\r\n              column: 'groupId',\r\n              operator: 1,\r\n              ptype: 'list',\r\n              type: 'in',\r\n              value: this.searchIdArr.join(',')\r\n            });\r\n          } else if (this.tabPosition === 'type') {\r\n            conditionJson.conditionJson1.push({\r\n              column: 'typeId',\r\n              operator: 1,\r\n              ptype: 'list',\r\n              type: 'in',\r\n              value: this.searchIdArr.join(',')\r\n            });\r\n          }\r\n        }\r\n\r\n        const res = await deviceGetPageDeviceComplexByConditionAction(params, conditionJson);\r\n        if (res.code === STATUS_CODE.OPERATION_SUCCESS) {\r\n          // 将数据写入表单\r\n          this.tableDatas = res.rows;\r\n          this.tablePage.total = res.total;\r\n          this.tableLoading = false;\r\n          if (this.isFunc) {\r\n            this.toFindCheck(res.rows);\r\n          }\r\n        } else {\r\n          // 提示异常信息\r\n          showWarningMessage(res.message);\r\n        }\r\n      } catch (error) {\r\n        showErrorNotify(TITLE.NOTIFY, error);\r\n      } finally {\r\n      }\r\n    },\r\n    /**\r\n     * @description: 获取类型树数据\r\n     * @param 无\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    async getTree() {\r\n      if (this.tabPosition === 'group') {\r\n        // 若是车间分组\r\n        try {\r\n          const res = await deviceGroupGetTreeAction();\r\n          if (res.code === STATUS_CODE.OPERATION_SUCCESS) {\r\n            this.nodeData = res.rows;\r\n          } else {\r\n            // 提示异常信息\r\n            showWarningMessage(res.message);\r\n          }\r\n        } catch (error) {\r\n          showErrorNotify(TITLE.NOTIFY, error);\r\n        } finally {\r\n        }\r\n      } else if (this.tabPosition === 'type') {\r\n        // 若是设备类型\r\n        try {\r\n          const res = await deviceWorkshopTypeGetTreeAction();\r\n          if (res.code === STATUS_CODE.OPERATION_SUCCESS) {\r\n            this.nodeData = res.rows;\r\n          } else {\r\n            // 提示异常信息\r\n            showWarningMessage(res.message);\r\n          }\r\n        } catch (error) {\r\n          showErrorNotify(TITLE.NOTIFY, error);\r\n        } finally {\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * @description: 查询用户绑定的设备\r\n     * @param data 设备数据\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    async toFindCheck(data) {\r\n      try {\r\n        var paramJson = {\r\n          userId: this.currentChangeRow.userId\r\n        };\r\n\r\n        if (this.isMainTain === true) {\r\n          paramJson.deviceUserRelationshipEnum = 'MAINTAIN';\r\n        }\r\n\r\n        const res = await deviceUserRelationshipGetPageUserRelationshipDeviceByUserIdAction(paramJson);\r\n        if (res.code === STATUS_CODE.OPERATION_SUCCESS) {\r\n          this.contrastData = res.rows;\r\n          for (var i in data) {\r\n            for (var j in res.rows) {\r\n              if (data[i].deviceCode === res.rows[j].deviceCode) {\r\n                this.$refs.xGrid.toggleCheckboxRow(data[i]);\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          // 提示异常信息\r\n          showWarningMessage(res.message);\r\n        }\r\n      } catch (error) {\r\n        showErrorNotify(TITLE.NOTIFY, error);\r\n      } finally {\r\n      }\r\n    },\r\n    /**\r\n     * @description: 保存关联\r\n     * @param 无\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    submitEdit() {\r\n      const checkedData = this.$refs.xGrid.getCheckboxRecords();\r\n      if (this.isFunc) {\r\n        this.$emit('saveRelatedDevice', checkedData, this.tableDatas, this.contrastData);\r\n      } else {\r\n        this.$emit('saveRelatedDevice', checkedData, this.tableDatas);\r\n      }\r\n    },\r\n    /**\r\n     * @description: 关闭模态框\r\n     * @param 无\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    cancelBtnClick() {\r\n      this.$emit('hiddenRelated');\r\n    }\r\n    // /**\r\n    //  * @description: 返回\r\n    //  * @param val 0为显示index组件\r\n    //  * @return:\r\n    //  * @author: ZJM\r\n    //  */\r\n    // goBack(val) {\r\n    //   // 显示组件\r\n    //   this.showPage = val;\r\n    //   // 调用查询接口\r\n    //   this.findList();\r\n    // }\r\n  }\r\n};\r\n","<!--\n * @Descripttion: 设备配置页面\n * @version:\n * @Author: ZJM\n * @Date: 2020-04-14 10:09:28\n * @LastEditors: ZJM\n * @LastEditTime: 2022-09-30 15:34:24\n -->\n<template>\n  <el-container class=\"content\">\n    <el-main>\n      <header-search\n          :show-primary-search=\"true\"\n          @refreshTableData=\"refreshTableData\"\n          cssType=\"8\">\n      </header-search>\n      <div class=\"area-main\">\n        <div class=\"area-aside\">\n          <div class=\"area-tree\">\n            <div class=\"area-tabs\">\n              <el-radio-group v-model=\"tabPosition\">\n                <el-radio-button label=\"group\">{{CONSTANTS_DEVICE_CONFIGURATION.WORKSHOP_GROUP}}</el-radio-button>\n                <el-radio-button label=\"type\">{{CONSTANTS_DEVICE_CONFIGURATION.DEVICE_TYPE}}</el-radio-button>\n              </el-radio-group>\n            </div>\n            <div class=\"area-zTree\">\n              <ZTree\n                :nodes=\"nodeData\"\n                @ztreeOnClick=\"ztreeOnClick\"\n                @ztreeHandleCreated=\"ztreeHandleCreated\"\n              ></ZTree>\n            </div>\n          </div>\n        </div>\n        <div class=\"area-info\">\n          <template>\n            <div class=\"userInformation\">\n              <HeaderTitle class=\"header-title\" :titleName=\"HeadTitleName\">\n                <div slot=\"head-search\" class=\"head-search\">{{HeadTitleUrl}}</div>\n              </HeaderTitle>\n              <!-- <el-form :inline=\"true\" size=\"mini\" :model=\"devForm\" class=\"demo-form-inline\">\n                <el-form-item label=\"设备名称\">\n                  <el-input v-model=\"devForm.devName\" placeholder=\"设备名称\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                  <el-button type=\"primary\" @click=\"findList\">查询</el-button>\n                </el-form-item>\n              </el-form> -->\n              <VXETable\n                id=\"table\"\n                :tableName=\"tableName\"\n                :tableLoading=\"tableLoading\"\n                :pager-config=\"tablePage\"\n                :tableDatas=\"tableDatas\"\n                :tableColumns=\"tableColumns\"\n                :tablePage=\"tablePage\"\n                @sortChange=\"sortChange\"\n                @onTablePageChange=\"onTablePageChange\"\n                @chooseCheck=\"tableChooseCheck\"\n                ref=\"xGrid\"\n              ></VXETable>\n              <div class=\"btnDiv\">\n                <el-button type=\"primary\" @click=\"submitEdit\">{{buttonName}}</el-button>\n                <el-button @click=\"cancelBtnClick\">{{BTN_TEXT.CANCEL}}</el-button>\n              </div>\n            </div>\n          </template>\n        </div>\n      </div>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\nimport js from '@/assets/js/common/DeviceDialog/deviceDialog';\nexport default js;\n</script>\n\n<style lang=\"less\" scoped>\n@import '../../../assets/less/common/DeviceDialog/deviceDialog.less';\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deviceDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deviceDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./deviceDialog.vue?vue&type=template&id=49158492&scoped=true&\"\nimport script from \"./deviceDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./deviceDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./deviceDialog.vue?vue&type=style&index=0&id=49158492&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49158492\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('tree',{attrs:{\"nodes\":_vm.nodes,\"setting\":_vm.setting},on:{\"onCreated\":_vm.handleCreated}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Descripttion: ztree通用组件\r\n * @version:\r\n * @Author: ZJM\r\n * @Date: 2020-04-01 09:44:42\r\n * @LastEditors: ZJM\r\n * @LastEditTime: 2021-09-07 17:32:52\r\n -->\r\n\r\n<template>\r\n  <div class=\"content\">\r\n    <tree :nodes=\"nodes\" :setting=\"setting\" @onCreated=\"handleCreated\"></tree>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 引入树形组件\r\nimport tree from 'vue-giant-tree';\r\nexport default {\r\n  components: {\r\n    // 加载树形组件\r\n    tree\r\n  },\r\n  props: {\r\n    // 是否开启勾选\r\n    isCheck: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 是否全部展开\r\n    isExpendAll: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 是否展开第一层\r\n    isOneExpendAll: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 树形数据\r\n    nodes: {\r\n      type: Array,\r\n      default: function() {\r\n        return [{}];\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      selectedNode: null,\r\n      // ztree对象\r\n      ztreeObj: null,\r\n      // ztree配置\r\n      setting: {\r\n        // async: {\r\n        //   enable: true,\r\n        //   url: this.getUrl, // 异步请求数据\r\n        //   type: 'GET'\r\n        // },\r\n        check: {\r\n          enable: this.isCheck\r\n        },\r\n        data: {\r\n          simpleData: {\r\n            enable: true,\r\n            idKey: 'id',\r\n            pIdKey: 'pId',\r\n            rootPId: '0'\r\n          }\r\n        },\r\n        callback: {\r\n          onClick: this.onClick, // 单击事件,\r\n          onCheck: this.onCheck, // 勾选事件\r\n          onRightClick: this.onRightClick // 右击事件\r\n        }\r\n      }\r\n    };\r\n  },\r\n  computed: {},\r\n  created: function() {},\r\n  methods: {\r\n    /**\r\n     * @description: 点击父级请求下级数据\r\n     * @param  treeId ztreeid\r\n     * @param  treeNode 点击节点数据\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    // getUrl: function(treeId, treeNode) {\r\n    //   // 发送给父级调用\r\n    //   this.$emit('getZTreeUrl', treeId, treeNode, this.ztreeObj);\r\n    // },\r\n    /**\r\n     * @description: 点击事件\r\n     * @param  evt 事件对象\r\n     * @param  treeId ztreeid\r\n     * @param  treeNode 点击节点数据\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    onClick: function(evt, treeId, treeNode) {\r\n      // 发送给父级调用\r\n      this.selectedNode = treeNode;\r\n      this.$emit('ztreeOnClick', evt, treeNode, this.ztreeObj);\r\n    },\r\n    /**\r\n     * @description: 点击事件\r\n     * @param  evt 事件对象\r\n     * @param  treeId ztreeid\r\n     * @param  treeNode 点击节点数据\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    onCheck: function(evt, treeId, treeNode) {\r\n      // 发送给父级调用\r\n      // this.selectedNode = treeNode;\r\n      this.$emit('ztreeOnCheck', evt, treeNode, this.ztreeObj);\r\n    },\r\n    /**\r\n     * @description: 加载完成触发\r\n     * @param  ztreeObj ztree对象\r\n     * @return: 无\r\n     * @author: ZJM\r\n     */\r\n    handleCreated: function(ztreeObj) {\r\n      // 初始化时获取ztree对象\r\n      this.ztreeObj = ztreeObj;\r\n      // 若允许则展开全部\r\n      if (this.isExpendAll) {\r\n        ztreeObj.expandAll(true);\r\n      } else if (this.isOneExpendAll) {\r\n        /* 获取所有树节点 */\r\n        var nodes = ztreeObj.transformToArray(ztreeObj.getNodes());\r\n        // 展开第一级树\r\n        ztreeObj.expandNode(nodes[0], true);\r\n      }\r\n\r\n      // 发送给父级调用\r\n      this.$emit('ztreeHandleCreated', ztreeObj);\r\n    },\r\n    // onCheck: function(evt, treeId, treeNode) {\r\n    // },\r\n    // filter: function(treeId, parentNode, childNodes) {\r\n    // },\r\n    // zTreeOnAsyncSuccess: function(event, treeId, treeNode, msg) {\r\n    // },\r\n    onRightClick(evt, treeId, treeNode) {\r\n      var node = {};\r\n      if (treeNode === null) {\r\n        node = this.selectedNode;\r\n      } else {\r\n        this.selectedNode = treeNode;\r\n        node = treeNode;\r\n      }\r\n      this.ztreeObj.selectNode(node);\r\n      this.$emit('ztreeOnRightClick', evt, node, this.ztreeObj);\r\n    },\r\n    // 根据节点数据的属性搜索，获取条件完全匹配的节点数据 JSON 对象集合\r\n    getNodesByParam(key, value, parentNode) {\r\n      this.ztreeObj.expandAll(true);\r\n      // return this.ztreeObj.getNodesByParam(key, value, parentNode);\r\n    },\r\n    // 选中指定节点\r\n    selectNode(treeNode, addFlag, isSilent) {\r\n      this.ztreeObj.selectNode(treeNode, addFlag, isSilent);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\"  scoped>\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n.ztree {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n}\r\n.content {\r\n  width: 100%;\r\n  height: calc(100% - 40px);\r\n  background: #fff;\r\n  padding: 10px;\r\n}\r\n.ztree /deep/ li {\r\n  line-height: 0 !important;\r\n}\r\n.ztree /deep/ li span.button.yes_ico_docu {\r\n  margin-right: 2px;\r\n  background-image: url('~@/assets/img/DeviceCheck/yes.png') !important;\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  vertical-align: top;\r\n  *vertical-align: middle;\r\n  width: 15px !important;\r\n  height: 15px !important;\r\n  vertical-align: text-top;\r\n}\r\n.ztree /deep/ li span.button.no_ico_docu {\r\n  margin-right: 2px;\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  background-image: url('~@/assets/img/DeviceCheck/no.png') !important;\r\n  vertical-align: top;\r\n  *vertical-align: middle;\r\n  width: 15px !important;\r\n  height: 15px !important;\r\n  vertical-align: text-top;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZTree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZTree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ZTree.vue?vue&type=template&id=812aacfc&scoped=true&\"\nimport script from \"./ZTree.vue?vue&type=script&lang=js&\"\nexport * from \"./ZTree.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ZTree.vue?vue&type=style&index=0&id=812aacfc&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"812aacfc\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deviceDialog.vue?vue&type=style&index=0&id=49158492&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deviceDialog.vue?vue&type=style&index=0&id=49158492&lang=less&scoped=true&\""],"sourceRoot":""}