(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8546c61a"],{"13d5":function(e,t,a){"use strict";var i=a("23e7"),n=a("d58f").left,s=a("a640"),r=a("ae40"),o=s("reduce"),l=r("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!l},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"162a":function(e,t,a){"use strict";var i=a("6b82"),n=a.n(i);n.a},"36c6":function(e,t,a){},"39ff":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Div",{staticClass:"main"},[a("div",{staticClass:"selectLine"},[a("span",[e._v("时间段:")]),a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd"},model:{value:e.lineTime1,callback:function(t){e.lineTime1=t},expression:"lineTime1"}}),a("el-time-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"HH:mm:ss","is-range":"","range-separator":"至",size:"mini"},model:{value:e.lineTime2,callback:function(t){e.lineTime2=t},expression:"lineTime2"}}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("参数选择：")]),a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择"},model:{value:e.paramSelect,callback:function(t){e.paramSelect=t},expression:"paramSelect"}},e._l(e.relationshipData,(function(e){return a("el-option",{key:e.relationshipId,attrs:{label:e.parameterName,value:e.relationshipId}})})),1),a("el-button",{attrs:{size:"mini"},on:{click:e.searchLine}},[e._v(e._s(e.BTN_TEXT.SEARCH))]),a("p",{staticStyle:{color:"red",margin:"0","line-height":"normal"}},[e._v("注：查询时长不得超过12小时")])],1),a("div",{staticClass:"content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.showFlag,expression:"showFlag === 1"}],attrs:{id:"showEcharts"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.showFlag,expression:"showFlag === 0"}],staticClass:"showTable"},[a("VXETable",{ref:"xGrid",attrs:{id:"table",tableLoading:e.tableLoading,resizable:!0,autoResize:!0,height:e.$options.filters.getTableHeight(290),tableName:"",tableDatas:e.tableDatas,tableColumns:e.tableColumns,tablePage:e.tablePages}})],1)])])},n=[],s=(a("caad"),a("a15b"),a("a9e3"),a("ac1f"),a("2532"),a("1276"),a("b85c")),r=(a("96cf"),a("1da1")),o=a("cf46"),l=a("3fa5"),c=a("6464"),m=a("582a"),d=a("a388"),h=a("b3af"),u={name:"echarts",props:{deviceData:d["List"],lineTime:d["List"]},data:function(){var e=this;return{EQUIPMENT_LIVE:m["t"],TITLE:m["N"],BTN_TEXT:m["c"],lineTime1:"",lineTime2:[],showFlag:1,active:0,relationshipData:[],relationshipId:[],tabs:[{name:"列表",value:0},{name:"图表",value:1}],pickerOptions:{onPick:function(t){t.minDate&&!t.maxDate&&(e.timeOptionRange=t.minDate),t.maxDate&&(e.timeOptionRange=null)}},parameterName:"",paramOptions:[],paramSelect:null,tableLoading:!1,tableColumns:[],tableDatas:[],tablePages:{total:0,currentPage:1,pageSize:10,align:"right",pageSizes:[10,20,50,100,200,500],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0}}},watch:{paramSelect:function(e){this.showEcharts()},lineTime:function(e){}},created:function(){this.lineTime1=this.$utils.toDateString(new Date,"yyyy-MM-dd"),this.lineTime2=[this.$utils.toDateString(new Date-36e5,"HH:mm:ss"),this.$utils.toDateString(new Date,"HH:mm:ss")],this.GetHamsterInformation()},mounted:function(){},methods:{showTable:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,n,s,r,o,d,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.tableLoading=!0,i={deviceCode:t.deviceData.deviceCode,startTime:t.lineTime1+" "+t.lineTime2[0],endTime:t.lineTime1+" "+t.lineTime2[1]},t.paramSelect&&(i.relationshipIds=t.paramSelect.join(",")),a.next=6,Object(h["u"])(i);case 6:if(n=a.sent,n.code===m["M"].OPERATION_SUCCESS){for(o in s=n.rows,t.tableColumns=[],t.tableDatas=[],r="",t.tableColumns.push({field:"time",title:"时间",visible:!0,width:"200",align:"center"}),s.parameterSnapshotMap)for(u in r=s.parameterSnapshotMap[o].deviceName,d=s.parameterSnapshotMap[o].parameterName,s.parameterSnapshotMap[o].showUnit&&(d=d+"("+s.parameterSnapshotMap[o].showUnit+")"),t.tableColumns.push({field:o+"_param",title:d,minWidth:"100",visible:!0,align:"center"}),s.deviceParameterRecord[o])t.tableDatas[u]||t.tableDatas.push({time:s.deviceParameterRecord[o][u].time}),t.tableDatas[u][o+"_param"]=s.deviceParameterRecord[o][u].value;"export"===e&&t.$refs.xGrid.exportData(r+"设备参数报表",t.tableDatas),t.tableLoading=!1}else t.tableLoading=!1,Object(l["c"])(n.message);a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),Object(c["a"])(m["N"].NOTIFY,a.t0);case 13:return a.prev=13,a.finish(13);case 15:case"end":return a.stop()}}),a,null,[[0,10,13,15]])})))()},showEcharts:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,n,r,o,d,u,p,g,v,f,b,w,T,D;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={deviceCode:e.deviceData.deviceCode,startTime:e.lineTime1+" "+e.lineTime2[0],endTime:e.lineTime1+" "+e.lineTime2[1]},e.paramSelect&&(a.relationshipIds=e.paramSelect),t.next=5,Object(h["u"])(a);case 5:if(i=t.sent,i.code===m["M"].OPERATION_SUCCESS){for(d in n=i.rows,r=[],o=[],n.parameterSnapshotMap){for(g in u=[],p=n.parameterSnapshotMap[d].parameterName,n.parameterSnapshotMap[d].showUnit&&(p=p+"("+n.parameterSnapshotMap[d].showUnit+")"),n.deviceParameterRecord[d]){v=n.deviceParameterRecord[d][g].value.split(","),f=Object(s["a"])(v);try{for(f.s();!(b=f.n()).done;)w=b.value,w.includes("_")?(T=w.split("_")[0],D=w.split("_")[1],o.push(e.$utils.toDateString(new Date(Number(T)),"yyyy-M-d h:m:s.S")),u.push(D)):(o.push(n.deviceParameterRecord[d][g].time),u.push(w))}catch(S){f.e(S)}finally{f.f()}}r.push({name:p,type:"line",data:u})}e.showEchartsData(o,r)}else Object(l["c"])(i.message);t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),Object(c["a"])(m["N"].NOTIFY,t.t0);case 12:return t.prev=12,t.finish(12);case 14:case"end":return t.stop()}}),t,null,[[0,9,12,14]])})))()},showEchartsData:function(e,t){var a=this.$echarts.init(document.getElementById("showEcharts"));a.setOption({title:{text:m["t"].PARAMETER_LINE_CHART},tooltip:{trigger:"axis"},toolbox:{},dataZoom:[{show:!0,realtime:!0,start:65,end:85},{type:"inside",realtime:!0,start:65,end:85}],grid:{left:"4%",right:"6%",bottom:"8%",containLabel:!0},xAxis:{type:"category",name:m["t"].TIME,boundaryGap:!1,data:e},yAxis:{type:"value",name:m["t"].PARAMETER_VALUE},series:t},!0)},GetHamsterInformation:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h["l"])({size:1e5,current:1,deviceCode:e.deviceData.deviceCode,time:""});case 3:a=t.sent,a.code===m["M"].OPERATION_SUCCESS?(e.relationshipData=a.rows.parameter,e.paramSelect=a.rows.parameter[0].relationshipId):Object(l["c"])(a.message),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object(c["a"])(m["N"].NOTIFY,t.t0);case 10:return t.prev=10,t.finish(10);case 12:case"end":return t.stop()}}),t,null,[[0,7,10,12]])})))()},searchLine:function(){this.showEcharts()}},components:{VXETable:o["a"]}},p=u,g=p,v=(a("eef0"),a("2877")),f=Object(v["a"])(g,i,n,!1,null,"16b4000c",null);t["a"]=f.exports},"6b82":function(e,t,a){},"8b3e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.hideMain,expression:"hideMain"}],staticClass:"main"},[a("el-main",[a("Div",[a("div",[a(e.currentView,{ref:e.currentView,tag:"component",attrs:{showInfo:e.showInfo,isSearchBoxShow:e.isSearchBoxShow}})],1)])],1)],1),1===e.showFlag?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideMain,expression:"!hideMain"}],staticClass:"main"},[a("deviceInfo",{attrs:{back:e.back,deviceData:e.deviceData}})],1):e._e()])},n=[],s=(a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("e5c7")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("header-buttons",{attrs:{cssType:"1"},on:{buttonClickEvent:e.buttonClickEvent}}),a("header-search",{attrs:{"show-primary-search":!0,cssType:"1"},on:{refreshTableData:e.refreshTableData}}),a("VXETable",{ref:"xGrid",attrs:{id:"table",resizable:!0,autoResize:!0,height:e.$options.filters.getTableHeight(220),tableName:"",tableLoading:e.tableLoadings,tableDatas:e.tableDatas,tableColumns:e.myTableColumns,tablePage:e.tablePages,highlightCurrentRow:!0,"edit-config":e.editConfig},on:{sortChange:e.sortChange,onTablePageChange:e.onTablePageChanges}}),a("dialog-setting-column",{attrs:{"show-setting-dialog":e.isSettingCustomDialogShow,"default-columns":e.tableColumns,"page-columns":e.myTableColumns},on:{"update:showSettingDialog":function(t){e.isSettingCustomDialogShow=t},"update:show-setting-dialog":function(t){e.isSettingCustomDialogShow=t},saveMyColumnSetting:e.handleSaveColumnSetting}})],1)},o=[],l=a("6ce5"),c=l["a"],m=c,d=(a("162a"),a("2877")),h=Object(d["a"])(m,r,o,!1,null,"43bdf077",null),u=h.exports,p=a("85a8"),g=a("582a"),v=a("5861"),f=a("eec9"),b={name:"EquipmentStatus_andon",data:function(){return{isSearchBoxShow:!1,BTN_TEXT:g["c"],EQUIPMENT_LIVE:g["t"],active:0,showFlag:0,deviceData:{},hideMain:!0,currentView:"deviceTable",dialogVisible:!1}},created:function(){!0===this.$store.state.deviceIsJump&&this.showInfo(1,this.$store.state.deviceJump)},computed:{monitorBtn:function(){return this.$store.state.monitorTags}},watch:{monitorBtn:function(){var e=this,t=this;this.showFlag=5,setTimeout((function(){t.$store.state.deviceIsJump=!1,t.showInfo(1,e.$store.state.deviceJump)}),0)}},methods:{getUrlKeyMain:function(e,t){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||[,""])[1].replace(/\+/g,"%20"))||null},showSearchCard:function(){this.isSearchBoxShow=!this.isSearchBoxShow},showInfo:function(e,t){this.showFlag=e,this.deviceData=t,this.hideMain=!1},back:function(){this.showFlag=0,this.hideMain=!0},exportTable:function(){0===this.active?this.$refs.deviceTable.exportTable():this.$refs.warningTable.exportTable()},refresh:function(){this.$refs.deviceTable.findList()}},components:{deviceTable:u,HeaderTitle:p["a"],deviceInfo:s["a"],HeadOperationItem:v["a"],SearchBox:f["a"]}},w=b,T=w,D=(a("d03f"),Object(d["a"])(T,i,n,!1,null,"4405896f",null));t["default"]=D.exports},b9d0:function(e,t,a){"use strict";var i=a("f4af"),n=a.n(i);n.a},ca97:function(e,t,a){},d03f:function(e,t,a){"use strict";var i=a("36c6"),n=a.n(i);n.a},d58f:function(e,t,a){var i=a("1c0b"),n=a("7b0b"),s=a("44ad"),r=a("50c4"),o=function(e){return function(t,a,o,l){i(a);var c=n(t),m=s(c),d=r(c.length),h=e?d-1:0,u=e?-1:1;if(o<2)while(1){if(h in m){l=m[h],h+=u;break}if(h+=u,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=u)h in m&&(l=a(l,m[h],h,c));return l}};e.exports={left:o(!1),right:o(!0)}},e5c7:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("HeaderTitle",{directives:[{name:"show",rawName:"v-show",value:4!==e.deivceShowFlag,expression:"deivceShowFlag !==4"}],attrs:{titleName:e.title}},[a("div",{staticClass:"head-operation",attrs:{slot:"head-operation"},slot:"head-operation"},[a("HeadOperationItem",{attrs:{name:"showInfo"},on:{onOprationItem:function(t){return e.refresh()}}},[a("i",{staticClass:"icon-refresh",attrs:{slot:"operation-icon"},slot:"operation-icon"}),a("span",{attrs:{slot:"operation-name"},slot:"operation-name"},[e._v(e._s(e.BTN_TEXT.REFRESH))])]),a("HeadOperationItem",{attrs:{name:"showInfo"},on:{onOprationItem:function(t){return e.backMain()}}},[a("i",{staticClass:"icon-back",attrs:{slot:"operation-icon"},slot:"operation-icon"}),a("span",{attrs:{slot:"operation-name"},slot:"operation-name"},[e._v(e._s(e.BTN_TEXT.RETURN))])])],1)]),4===e.deivceShowFlag?a("HeaderTitle",{attrs:{titleName:"参数统计报表"}},[a("div",{staticClass:"head-operation",attrs:{slot:"head-operation"},slot:"head-operation"},[a("HeadOperationItem",{attrs:{name:"showInfo"},on:{onOprationItem:function(t){return e.backLine()}}},[a("i",{staticClass:"icon-back",attrs:{slot:"operation-icon"},slot:"operation-icon"}),a("span",{attrs:{slot:"operation-name"},slot:"operation-name"},[e._v(e._s(e.BTN_TEXT.RETURN))])])],1)]):e._e()],1),a("el-main",[4!==e.deivceShowFlag||e.specialParam?e._e():a("div",[a("parametricLiineChart",{ref:"showLine",attrs:{deviceData:e.deviceData,lineTime:e.lineTime}})],1),4===e.deivceShowFlag&&e.specialParam?a("div",[a("specialParamChart",{ref:"showLine",attrs:{deviceData:e.deviceData,lineTime:e.lineTime}})],1):e._e(),a("Div",{directives:[{name:"show",rawName:"v-show",value:4!==e.deivceShowFlag,expression:"deivceShowFlag !==4"}]},[a("div",{attrs:{id:"tabs"}},[a("ul",e._l(e.tabs,(function(t,i){return a("li",{key:i,class:{active:e.active==i},on:{click:function(a){return e.toggle(i,t.value)}}},[e._v(e._s(t.name))])})),0)]),0===e.deivceShowFlag?a("div",{staticClass:"deviceInfo"},[a("div",{staticClass:"showInfo"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-left-border"},[a("div",[a("span",{staticClass:"head-title-span"},[e._v("实时信息")])])])]),a("div",{staticClass:"mainInfo mainInfox"},[a("table",[a("tr",[a("td",[e._v(e._s(e.EQUIPMENT_LIVE.DEVICE_NAME)+":")]),a("td",[e._v(e._s(e.showData.deviceName))])]),a("tr",[a("td",[e._v(e._s(e.EQUIPMENT_LIVE.DEVICE_NO)+":")]),a("td",[e._v(e._s(e.showData.devicePriCode))])]),a("tr",[a("td",[e._v(e._s(e.EQUIPMENT_LIVE.DEVICE_MODE)+":")]),a("td",[e._v(e._s(e.showData.mode))])]),e.isAndon?a("tr",[a("td",[e._v("安灯状态:")]),a("td",e._l(e.usefulParam,(function(t){return a("span",{key:t.variableName,class:[e.paramEnum[t.parameterName],"deviceState"]},[e._v(" "+e._s(t.parameterName)+" ")])})),0)]):a("tr",[a("td",[e._v("设备状态:")]),a("td",[1==e.showDataInfo.deviceRealState?a("span",{staticClass:"devStateRun"},[e._v("运行")]):e._e(),2==e.showDataInfo.deviceRealState?a("span",{staticClass:"devStateFree"},[e._v("空闲")]):e._e(),3==e.showDataInfo.deviceRealState?a("span",{staticClass:"devStateNoline"},[e._v("离线")]):e._e(),4==e.showDataInfo.deviceRealState?a("span",{staticClass:"devStateWarn"},[e._v("告警")]):e._e()])]),4==e.showDataInfo.deviceRealState?a("tr",[a("td",[e._v("告警信息:")]),a("td",[e._v(e._s(e.showDataInfo.warnName))])]):e._e()])]),a("div",{staticClass:"mainInfo",staticStyle:{overflow:"hidden"}},[a("img",{staticClass:"showImg",attrs:{src:e.showDataInfo.fileUrl}})])]),a("div",{staticClass:"showInfo2"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-left-border"},[a("div",[a("span",{staticClass:"head-title-span"},[e._v("运行时序")])])])]),a("div",{staticClass:"sequenceChart",attrs:{id:"sequenceChart"}})])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.deivceShowFlag,expression:"deivceShowFlag===1"}],staticClass:"hoursDIv"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-left-border"},[a("div",[a("span",{staticClass:"head-title-span"},[e._v("24小时数据记录")])]),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}],staticClass:"dataTime24",attrs:{type:"date",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:e.BTN_TEXT.SELECT_DATETIEM,"picker-options":e.pickerOptions},model:{value:e.dateTime24,callback:function(t){e.dateTime24=t},expression:"dateTime24"}}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("状态：")]),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"mini",clearable:""},on:{change:e.getDeviceDayData},model:{value:e.stateType,callback:function(t){e.stateType=t},expression:"stateType"}},e._l(e.stateTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("VXETable",{ref:"xGrid",staticClass:"table",attrs:{height:e.$options.filters.getTableHeight(260),tableName:"",tableLoading:e.tableLoadings,tableDatas:e.tableDatas,tableColumns:e.tableColumns,tablePage:e.tablePages,"edit-config":e.editConfig},on:{onTablePageChange:e.onTablePageChanges}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.deivceShowFlag,expression:"deivceShowFlag===2"}],staticClass:"parameter"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-left-border"},[a("div",[a("span",{staticClass:"head-title-span"},[e._v("参数信息")])]),2!=e.active||e.specialParam?e._e():a("el-button",{staticClass:"echartBtn",attrs:{size:"mini"},on:{click:e.showDialog}},[e._v("参数统计报表")]),e.specialParam?a("el-button",{staticClass:"echartBtn",attrs:{size:"mini"},on:{click:e.showSpecialParamChart}},[e._v("特殊参数统计")]):e._e()],1)]),a("VXETable",{ref:"xGrid",staticClass:"table",attrs:{height:e.$options.filters.getTableHeight(230),tableName:"",tableLoading:e.tableLoading,tableDatas:e.tableData,tableColumns:e.tableColumn,tablePage:e.tablePage,"edit-config":e.editConfig},on:{onTablePageChange:e.onTablePageChange}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.deivceShowFlag,expression:"deivceShowFlag===3"}],staticClass:"uphold"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-left-border"},[a("div",[a("span",{staticClass:"head-title-span"},[e._v("参数快照")])]),a("el-date-picker",{staticStyle:{"margin-left":"15px",width:"350px"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptionsx,"value-format":"yyyy-MM-dd HH:mm:ss",size:"mini"},model:{value:e.dateTimex,callback:function(t){e.dateTimex=t},expression:"dateTimex"}}),a("span",{staticStyle:{width:"80px"}},[e._v("参数名称:")]),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",size:"mini"},on:{input:e.search},model:{value:e.parameterName,callback:function(t){e.parameterName=t},expression:"parameterName"}})],1)]),a("VXETable",{ref:"xGrid",staticClass:"table",attrs:{height:e.$options.filters.getTableHeight(240),tableName:"",tableLoading:e.tableLoadingx,tableDatas:e.tableDatax,tableColumns:e.tableColumnx,tablePage:e.tablePagex,"edit-config":e.editConfigx},on:{onTablePageChange:e.onTablePageChangex}})],1)])],1)],1)},n=[],s=(a("99af"),a("4de4"),a("caad"),a("d81d"),a("13d5"),a("b0c0"),a("5530")),r=(a("96cf"),a("1da1")),o=a("cf46"),l=a("6303"),c=a("4f6a"),m=a("39ff"),d=a("85a8"),h=a("5861"),u=a("3fa5"),p=a("6464"),g=a("99f6"),v=a("c695"),f=a.n(v),b=a("582a"),w=a("c1df"),T=a.n(w),D=a("a388"),S=a("b3af"),y={name:"tabs",props:{deviceData:D["List"],back:{type:Function,default:null}},data:function(){var e=this;return{BTN_TEXT:b["c"],DEVICE_STATE:b["p"],EQUIPMENT_LIVE:b["t"],active:0,actives:0,rows:{},deivceShowFlag:0,title:"",specialParam:g["A"][localStorage.getItem("companyId")],isAndon:g["j"],lineTime:[this.$utils.toDateString(new Date-36e5,"yyyy-MM-dd HH:mm:ss"),this.$utils.toDateString(new Date,"yyyy-MM-dd HH:mm:ss")],showData:{},showDataInfo:[],parameterData:[],cumulativeProduction:0,dateTime24:this.$utils.toDateString(new Date,"yyyy-MM-dd HH:mm:ss"),dateTimes:[this.$utils.toDateString(new Date-72e5,"yyyy-MM-dd HH:mm:ss"),this.$utils.toDateString(new Date,"yyyy-MM-dd HH:mm:ss")],dateTimex:[this.$utils.toDateString(new Date-72e5,"yyyy-MM-dd HH:mm:ss"),this.$utils.toDateString(new Date,"yyyy-MM-dd HH:mm:ss")],currentView:"deviceTable",dialogVisible:!1,hackReset:!1,tabs:[{type:"realtime",name:b["t"].REAL_TIME,value:0},{type:"24hours",name:b["t"].TWENTY_FOUR_HOURS,value:1}],tabss:[{name:"列表",value:0},{name:"图表",value:1}],editConfig:{trigger:"click",mode:"row",showStatus:!1},editConfigx:{trigger:"click",mode:"row",showStatus:!1},tableLoadings:!1,tableLoading:!1,tableLoadingx:!1,outData:[],tableDatas:[],tableData:[],tableDatax:[],tableColumns:[{field:"startTime",title:"开始时间",align:"center",formatter:["formatDate","yyyy-MM-dd HH:mm:ss"]},{field:"endTime",title:"结束时间",align:"center",formatter:"formatDate"},{field:"time",title:"持续时间",align:"center",formatter:"timeStampSeconds"},{field:"lightState",title:"状态",align:"center",formatter:function(t){var a=t.cellValue;return e.stateEnum[a]}}],typeOptions:[],groupOptions:[],typeValue:"",groupValue:"",tablePages:{total:0,currentPage:1,pageSize:10,align:"right",pageSizes:[10,20,50,100,200,500],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},tablePagex:{total:0,currentPage:1,pageSize:10,align:"right",pageSizes:[10,20,50,100,200,500],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},tablePages_uphold:{show:!1},tableColumn:[{field:"snapshotTime",title:"时间",width:"",align:"center"},{field:"parameterName",title:b["t"].PARAMETER_NAME_CHINESE,width:"",align:"center"},{field:"parameterValue",title:b["t"].PARAMETER_VALUE,width:"",align:"center"},{field:"showUnit",title:b["t"].UNIT,width:"",align:"center"},{field:"remark",title:b["t"].REMARKS,width:"300",align:"center"}],tableColumnx:[{field:"snapshotTime",title:"时间",width:"",align:"center"},{field:"parameterName",title:b["t"].PARAMETER_NAME_CHINESE,width:"",align:"center"},{field:"parameterValue",title:b["t"].PARAMETER_VALUE,width:"",align:"center"},{field:"showUnit",title:b["t"].UNIT,width:"",align:"center"}],tablePage:{total:0,currentPage:1,pageSize:10,align:"right",pageSizes:[10,20,50,100,200,500],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},timeOptionRangex:"",pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},pickerOptionsx:{onPick:function(t){t.minDate&&!t.maxDate&&(e.timeOptionRangex=t.minDate),t.maxDate&&(e.timeOptionRangex=null)},disabledDate:function(t){var a=e.timeOptionRangex,i=6048e5;return a?a.getTime()+i>Date.now()-864e4?t.getTime()>Date.now()-864e4||t.getTime()<a.getTime()-i:t.getTime()>a.getTime()+i||t.getTime()<a.getTime()-i:t.getTime()>Date.now()}},parameterName:"",timeOptionRange:"",timeList:[],stateEnum:{yellow_off:"停用",red_e:"异常",blue_m:"保养",green_w:"待料",white_m:"维护",green_p:"生产"},paramEnum:{"异常":"red_e","保养":"blue_m","待料":"green_w","停用":"yellow_off","维护":"white_m","生产":"green_p"},stateType:"",stateTypeList:[{label:"异常",value:"EXCEPTION_Light"},{label:"保养",value:"MAINTAIN_Light"},{label:"待料",value:"MATERIAL_WAITING_Light"},{label:"停用",value:"DEACTIVATE_Light"},{label:"维护",value:"PRESERVE_Light"},{label:"生产",value:"PRODUCT_Light"}]}},watch:{dateTime24:function(e){this.onTablePageChanges(1,10)},dateTimes:function(e){this.dateTimes=e,this.onTablePageChange(1,10)},dateTimex:function(e){this.dateTimes=e,this.onTablePageChangex(1,10)}},computed:{usefulParam:function(){var e=["异常","保养","待料","停用","维护","生产"];return this.parameterData.filter((function(t){return"1"===t.parameterValue&&e.includes(t.parameterName)}))}},created:function(){this.title=b["t"].DEIVCE_INFO+"       "+this.deviceData.deviceName,this.getDeviceInfo(),this.getDeviceShowInfo(),this.getSequenceData()},methods:{toggle:function(e,t){console.log(e),this.active=e,this.deivceShowFlag=t,0===e&&(this.getDeviceInfo(),this.getDeviceShowInfo(),this.getSequenceData()),1===e&&this.getDeviceDayData(),2===e&&(this.dateTimes=[this.$utils.toDateString(new Date-72e5,"yyyy-MM-dd HH:mm:ss"),this.$utils.toDateString(new Date,"yyyy-MM-dd HH:mm:ss")],this.findparameterList()),3===e&&(this.dateTimes=[this.$utils.toDateString(new Date-72e5,"yyyy-MM-dd HH:mm:ss"),this.$utils.toDateString(new Date,"yyyy-MM-dd HH:mm:ss")],this.findparameterPhotoList())},backMain:function(){this.back()},getDeviceInfo:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(S["b"])({id:e.deviceData.deviceId});case 3:a=t.sent,a.code===b["M"].OPERATION_SUCCESS?e.showData=a.rows:Object(u["c"])(a.message),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object(p["a"])(b["N"].NOTIFY,t.t0);case 10:return t.prev=10,t.finish(10);case 12:case"end":return t.stop()}}),t,null,[[0,7,10,12]])})))()},getDeviceShowInfo:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(S["c"])({deviceCode:e.deviceData.deviceCode});case 3:a=t.sent,a.code===b["M"].OPERATION_SUCCESS?(e.showDataInfo=a.rows,e.parameterData=a.rows.parameter,void 0!==e.showDataInfo.startTime&&(e.showDataInfo.startTime=T()(e.showDataInfo.startTime).format("YYYY-MM-DD")),e.showDataInfo.fileUrl&&(e.showDataInfo.fileUrl=e.$store.state.publicUrl+e.showDataInfo.fileUrl),void 0!==e.showDataInfo.maintenanceTime&&(e.showDataInfo.maintenanceTime=T()(e.showDataInfo.maintenanceTime).format("YYYY-MM-DD"))):Object(u["c"])(a.message),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object(p["a"])(b["N"].NOTIFY,t.t0);case 10:return t.prev=10,t.finish(10);case 12:case"end":return t.stop()}}),t,null,[[0,7,10,12]])})))()},getDeviceDayData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=e.moment(new Date).format("YYYY-MM-DD"),i=e.moment(e.dateTime24).format("YYYY-MM-DD")+" 23:59:59",e.moment(e.dateTime24).format("YYYY-MM-DD")===a&&(i=e.$utils.toDateString(new Date,"yyyy-MM-dd HH:mm:ss")),e.tableLoadings=!0,t.next=8,Object(S["r"])({deviceCode:e.deviceData.deviceCode,startTime:e.moment(e.dateTime24).format("YYYY-MM-DD")+" 00:00:00",endTime:i,current:e.tablePages.currentPage,size:e.tablePages.pageSize,lightEnum:e.stateType},{});case 8:n=t.sent,"0000"===n.code&&(e.tablePages.total=n.total,e.tableDatas=n.rows.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{time:+new Date(e.endTime)-+new Date(e.startTime)})}))),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),Object(p["a"])(b["N"].NOTIFY,t.t0);case 15:return t.prev=15,e.tableLoadings=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})))()},changeStateType:function(e){this.getDeviceDayData()},timeStamp:function(e){var t=parseInt(e/60/24),a=parseInt(e/60%24),i=parseInt(e%60),n="";return 1===t&&(n="24"+b["P"].HOUR_NAME+"0"+b["P"].MINUTE_NAME),a>0&&(n+=a+b["P"].HOUR_NAME),i>0&&(n+=parseFloat(i)+b["P"].MINUTE_NAME),e%1>0&&(n+=parseInt(e%1*60)+"秒"),n},findparameterList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.dateTimes){t.next=3;break}return Object(u["c"])("请选择时间范围"),t.abrupt("return",!1);case 3:return t.prev=3,e.tableLoading=!0,t.next=7,Object(S["j"])({size:e.tablePage.pageSize,current:e.tablePage.currentPage,deviceCode:e.deviceData.deviceCode});case 7:a=t.sent,a.code===b["M"].OPERATION_SUCCESS?(e.tableData=a.rows,e.tablePage.total=a.total,e.tableLoading=!1):Object(u["c"])(a.message),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),Object(p["a"])(b["N"].NOTIFY,t.t0);case 14:return t.prev=14,t.finish(14);case 16:case"end":return t.stop()}}),t,null,[[3,11,14,16]])})))()},findparameterPhotoList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.dateTimes){t.next=3;break}return Object(u["c"])("请选择时间范围"),t.abrupt("return",!1);case 3:return t.prev=3,e.tableLoadingx=!0,t.next=7,Object(S["s"])({size:e.tablePagex.pageSize,current:e.tablePagex.currentPage,deviceCode:e.deviceData.deviceCode,deviceRecordParameterTypeEnum:"TIMING_SNAPSHOT",parameterName:e.parameterName,endTime:e.dateTimex[1],startTime:e.dateTimex[0]});case 7:a=t.sent,a.code===b["M"].OPERATION_SUCCESS?(e.tableDatax=a.rows,e.tablePagex.total=a.total,e.tableLoadingx=!1):Object(u["c"])(a.message),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),Object(p["a"])(b["N"].NOTIFY,t.t0);case 14:return t.prev=14,t.finish(14);case 16:case"end":return t.stop()}}),t,null,[[3,11,14,16]])})))()},onTablePageChanges:function(e,t){this.tablePages.currentPage=e,this.tablePages.pageSize=t,this.getDeviceDayData()},onTablePageChange:function(e,t){this.tablePage.currentPage=e,this.tablePage.pageSize=t,this.findparameterList()},onTablePageChangex:function(e,t){this.tablePagex.currentPage=e,this.tablePagex.pageSize=t,this.findparameterPhotoList()},search:function(e){console.log(e),this.onTablePageChangex(1,10)},getSequenceData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,n,s,r,o,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(S["a"])({startTime:"".concat(e.moment(new Date).format("YYYY-MM-DD")," 00:00:00"),endTime:e.moment(new Date).format("YYYY-MM-DD HH:mm:ss"),size:10,current:1},{conditionJson1:[{column:"deviceCode",operator:1,ptype:"string",type:"eq",value:e.deviceData.deviceCode}]});case 3:if(a=t.sent,"0000"===a.code){for(c in n=(null===(i=a.rows[0])||void 0===i?void 0:i.lightHistoryState)||[],s=[],r={yellow_off:"#F5CA00",red_e:"#FF0700",blue_m:"#07aaff",green_w:"#00E62C",white_m:"#FF6B22",green_p:"#007E2E"},o={yellow_off:0,red_e:1,blue_m:2,green_w:3,white_m:4,green_p:5},l=n.reduce((function(e,t){return e[t.lightState]?e[t.lightState].push({name:t.lightState,value:[o[t.lightState],t.startTime,t.endTime]}):e[t.lightState]=[{name:t.lightState,value:[o[t.lightState],t.startTime,t.endTime]}],e}),{}),e.stateEnum)s.push({name:e.stateEnum[c],type:"custom",renderItem:e.renderRect,color:r[c],encode:{x:[1,2],y:0},data:l[c]});e.showSequenceChart(s)}t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object(p["a"])(b["N"].NOTIFY,t.t0);case 10:case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},showSequenceChart:function(e){var t=this,a=this.$echarts.init(document.getElementById("sequenceChart"));a.setOption({tooltip:{formatter:function(e){var a=e.value[1],i=e.value[2],n=(+new Date(i)-+new Date(a))/1e3;return"".concat(e.marker).concat(e.seriesName,":").concat(a.substring(11,16)," - ").concat(i.substring(11,16),"(").concat(t.timeStampSeconds(n),")")}},dataZoom:[{type:"slider",filterMode:"weakFilter",top:"bottom",show:!1},{type:"inside",filterMode:"weakFilter",show:!1}],grid:{containLabel:!0,top:"10%",bottom:10,left:"5%",right:"10%"},xAxis:{name:"时间/h",type:"time",axisLabel:{formatter:function(e,a){return t.moment(e).format("HH:mm")}}},yAxis:{name:"状态",data:e.map((function(e){return e.name}))},series:e})},renderRect:function(e,t){var a=t.value(0),i=t.coord([t.value(1),a]),n=t.coord([t.value(2),a]),s=Math.min(t.size([0,1])[1],50),r=this.$echarts.graphic.clipRectByRect({x:i[0],y:i[1]-s/2,width:n[0]-i[0],height:s},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return r&&{type:"rect",transition:["shape"],shape:r,style:t.style()}},handleClose:function(){this.dialogVisible=!1,this.hackReset=!1},showDialog:function(){var e=this;this.dialogVisible=!0,this.$nextTick((function(){e.hackReset=!0})),this.deivceShowFlag=4,this.ineTime="",this.lineTime=[this.$utils.toDateString(new Date-36e5,"yyyy-MM-dd HH:mm:ss"),this.$utils.toDateString(new Date,"yyyy-MM-dd HH:mm:ss")]},showSpecialParamChart:function(){this.deivceShowFlag=4},refresh:function(){this.dateTime24=new Date,this.dateTimes=new Date,0===this.active&&(this.getDeviceInfo(),this.getDeviceShowInfo(),this.getSequenceData()),1===this.active&&(this.stateType="",this.getDeviceDayData()),2===this.active&&this.findparameterList(),3===this.active&&this.findparameterPhotoList()},backLine:function(){this.deivceShowFlag=2},timeFunc:function(e){var t=e.cellValue;return this.timeStamp(t)},timeStampSeconds:function(e){var t=parseInt(e/60/60/24),a=parseInt(e/60/60%24),i=parseInt(e/60%60),n=parseInt(e%60);return e="",t>0&&(e=t+"天"),a>0&&(e+=a+"小时"),i>0&&(e+=parseFloat(i)+"分钟"),n>0&&(e+=parseFloat(n)+"秒"),e}},components:{deviceTable:l["a"],HeaderTitle:d["a"],HeadOperationItem:h["a"],parametricLiineChart:c["a"],VXETable:o["a"],XEUtils:f.a,specialParamChart:m["a"]}},C=y,_=C,x=(a("b9d0"),a("2877")),E=Object(x["a"])(_,i,n,!1,null,"1756e41a",null);t["a"]=E.exports},eef0:function(e,t,a){"use strict";var i=a("ca97"),n=a.n(i);n.a},f4af:function(e,t,a){}}]);
//# sourceMappingURL=chunk-8546c61a.f7e59f3c.js.map