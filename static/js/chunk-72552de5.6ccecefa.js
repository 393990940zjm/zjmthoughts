(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72552de5"],{"01f6":function(e,t,a){"use strict";var n=a("4ce3"),i=a.n(n);i.a},"1c7ec":function(e,t,a){},"20ca":function(e,t,a){"use strict";function n(e,t){var a=null;return function(){var n=this,i=arguments;a&&clearTimeout(a),a=setTimeout((function(){e.apply(n,i)}),t)}}a.d(t,"a",(function(){return n}))},2561:function(e,t,a){"use strict";var n=a("633d"),i=a.n(n);i.a},"4ce3":function(e,t,a){},5861:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation-item",on:{click:e.onOprationItem}},[a("div",{staticClass:"operation-icon"},[e._t("operation-icon")],2),a("div",{staticClass:"operation-span"},[e._t("operation-name")],2)])},i=[],r=(a("b0c0"),{props:{name:{type:String,required:!0}},methods:{onOprationItem:function(){this.$emit("onOprationItem",this.name)}}}),o=r,s=(a("01f6"),a("2877")),c=Object(s["a"])(o,n,i,!1,null,"0cfe45f8",null);t["a"]=c.exports},"633d":function(e,t,a){},"6ccf":function(e,t,a){},ae6c:function(e,t,a){"use strict";var n=a("6ccf"),i=a.n(n);i.a},afb1:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"g",(function(){return r})),a.d(t,"h",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"i",(function(){return m}));var n=a("b775"),i=function(e,t){return Object(n["k"])("deviceException/getDeviceWarnStatisticsAnalyze.action?",e,t)},r=function(e,t){return Object(n["k"])("deviceException/getParameterWarnStatisticsAnalyze.action?",e,t)},o=function(e,t){return Object(n["k"])("deviceException/getRealWarnDeviceCount.action?",e,t)},s=function(e,t){return Object(n["k"])("deviceException/getAllRealDeviceWarn.action?",e,t)},c=function(e,t){return Object(n["k"])("deviceException/getDeviceHistoryWarn.action?",e,t)},l=function(e,t){return Object(n["k"])("deviceException/getParameterHistoryWarn.action?",e,t)},u=function(e,t){return Object(n["k"])("deviceException/getAllRealParameterWarn.action?",e,t)},d=function(e,t){return Object(n["k"])("deviceException/getDeviceExceptionComparedAnalyze.action?",e,t)},m=function(e,t){return Object(n["k"])("deviceException/getDeviceExceptionComparedAnalyzeNew.action?",e,t)}},f03a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("div",{staticClass:"main"},[a("el-main",[a("Div",[a("div",{attrs:{id:"tabs"}},[a("ul",e._l(e.tabs,(function(t,n){return a("li",{key:n,class:{active:e.active==n},on:{click:function(a){return e.toggle(n,t.views)}}},[e._v(e._s(t.name))])})),0)]),a("div",[a(e.currentView,{ref:e.currentView,tag:"component",attrs:{type:e.type}})],1)])],1)],1)])},i=[],r=(a("99af"),a("2909")),o=a("85a8"),s=a("5861"),c=a("582a"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("div",{staticClass:"searchDiv"},[a("span",[e._v("日期范围：")]),a("el-date-picker",{staticClass:"dateTime",attrs:{type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":e.BTN_TEXT.TO,"start-placeholder":e.BTN_TEXT.STARTTIME,"end-placeholder":e.BTN_TEXT.ENDTIME,"picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"]},model:{value:e.dateTime,callback:function(t){e.dateTime=t},expression:"dateTime"}}),a("span",[e._v("统计指标：")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.analyzeModel,callback:function(t){e.analyzeModel=t},expression:"analyzeModel"}},e._l(e.analyzeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:t}})})),1),a("span",[e._v("横坐标：")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.xModel,callback:function(t){e.xModel=t},expression:"xModel"}},e._l(e.xOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:t}})})),1),a("el-button",{attrs:{size:"mini"},on:{click:e.search}},[e._v(e._s(e.BTN_TEXT.SEARCH))]),a("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v(e._s(e.BTN_TEXT.RESET))])],1),a("div",{ref:"echartGantt",staticClass:"device-gantt"})])},u=[],d=(a("b0c0"),a("a9e3"),a("b680"),a("96cf"),a("1da1")),m=a("6464"),p=a("3fa5"),h=a("20ca"),v=a("afb1"),f={components:{},props:{type:Number},data:function(){return{BTN_TEXT:c["c"],myChart:null,analyzeModel:1,analyzeOptions:[{name:"报警计数",value:"WARN_COUNT"},{name:"报警时长",value:"WARN_TIME"}],xModel:3,xOptions:[{name:"报警代码",value:"WARN_CODE"},{name:"报警类型",value:"WARN_TYPE"},{name:"报警时间",value:"WARN_DAY"},{name:"报警设备",value:"WARN_DEVICE"}],dateTime:[],pickerOptions:{shortcuts:[{text:c["c"].LAST_WEEK,onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:c["c"].LAST_MONTH,onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:c["c"].LAST_THREE_MONTHS,onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},savedSearchCondition:[]}},computed:{},watch:{},created:function(){var e=this;this.$nextTick((function(){e.getData();var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.dateTime=[e.$utils.toDateString(a,"yyyy-MM-dd")+" 00:00:00",e.$utils.toDateString(t,"yyyy-MM-dd")+" 23:59:59"]}))},methods:{reset:function(){var e=new Date,t=new Date;t.setTime(t.getTime()-6048e5),this.dateTime=[this.$utils.toDateString(t,"yyyy-MM-dd")+" 00:00:00",this.$utils.toDateString(e,"yyyy-MM-dd")+" 23:59:59"],this.xModel=0,this.analyzeModel=0,this.getData()},getData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,i,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},a.conditionJson1=[],a.conditionJson1.push({column:"startTime",value:e.dateTime[0]}),a.conditionJson1.push({column:"endTime",value:e.dateTime[1]}),t.next=7,Object(v["e"])({deviceWarnStatisticalAbscissaEnum:e.xOptions[e.xModel].value,deviceWarnStatisticalIndicatorsEnum:e.analyzeOptions[e.analyzeModel].value},a);case 7:if(n=t.sent,n.code===c["M"].OPERATION_SUCCESS){for(i=[],r=[],o=[],s=0;s<n.rows.length;s++)n.rows[s].otherY?i.push(Number((100*n.rows[s].otherY).toFixed(2))):i.push(0),n.rows[s].y?o.push(n.rows[s].y):o.push(0),"WARN_CODE"===e.xOptions[e.xModel].value||"WARN_DAY"===e.xOptions[e.xModel].value?r.push(n.rows[s].x):r.push(n.rows[s].otherX1);e.draw(i,r,o)}else Object(p["c"])(n.message);t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),Object(m["a"])(c["N"].NOTIFY,t.t0);case 14:return t.prev=14,t.finish(14);case 16:case"end":return t.stop()}}),t,null,[[0,11,14,16]])})))()},draw:function(e,t,a){var n=this;this.myChart=this.$echarts.init(this.$refs.echartGantt),this.myChart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},formatter:function(e){for(var t=e[0].name,a=0;a<e.length;a++)0===a?"WARN_TIME"===n.analyzeOptions[n.analyzeModel].value?t+="<br>"+e[a].seriesName+": "+n.timeStampSeconds(e[a].value):t+="<br>"+e[a].seriesName+": "+e[a].value+"次":t+="<br>"+e[a].seriesName+": "+e[a].value+"%";return t}},legend:{data:[this.xOptions[this.xModel].name,this.analyzeOptions[this.analyzeModel].name,"累计占比"],right:10},grid:{containLabel:!0,left:"3%",right:"5%"},dataZoom:[{type:"slider",filterMode:"weakFilter",top:"bottom"},{type:"inside",filterMode:"weakFilter"}],xAxis:[{type:"category",name:this.xOptions[this.xModel].name,data:t,axisPointer:{type:"shadow"},nameGap:30}],yAxis:[{type:"value",name:this.analyzeOptions[this.analyzeModel].name,axisLabel:{}},{type:"value",name:"累计占比",interval:5,axisLabel:{formatter:"{value} %"}}],series:[{name:this.analyzeOptions[this.analyzeModel].name,type:"bar",tooltip:{valueFormatter:function(e){return e}},barWidth:"30",itemStyle:{normal:{barBorderRadius:[15,15,15,15],color:new this.$echarts.graphic.LinearGradient(0,1,0,0,[{offset:0,color:"#FC5454"},{offset:1,color:"#E50404"}],!1)}},data:a},{name:"累计占比",type:"line",yAxisIndex:1,smooth:!0,symbolSize:10,tooltip:{valueFormatter:function(e){return e+" %"}},lineStyle:{width:5},itemStyle:{normal:{color:"#0871DC"}},data:e}]});var i=Object(h["a"])(this.myChart.resize,300);window.addEventListener("resize",(function(){i()}))},search:function(){this.getData()},timeStampSeconds:function(e){var t=parseInt(e/60/60/24),a=parseInt(e/60/60%24),n=parseInt(e/60%60),i=parseInt(e%60);return e="",t>0&&(e=t+"天"),a>0&&(e+=a+"小时"),n>0&&(e+=parseFloat(n)+"分钟"),i>0&&(e+=parseFloat(i)+"秒"),e}}},y=f,T=y,x=(a("2561"),a("2877")),b=Object(x["a"])(T,l,u,!1,null,"b4ffab0e",null),g=b.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("div",{staticClass:"searchDiv"},[a("span",[e._v("日期范围：")]),a("el-date-picker",{staticClass:"dateTime",attrs:{type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":e.BTN_TEXT.TO,"start-placeholder":e.BTN_TEXT.STARTTIME,"end-placeholder":e.BTN_TEXT.ENDTIME,"picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"]},model:{value:e.dateTime,callback:function(t){e.dateTime=t},expression:"dateTime"}}),a("span",[e._v("统计指标：")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.analyzeModel,callback:function(t){e.analyzeModel=t},expression:"analyzeModel"}},e._l(e.analyzeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:t}})})),1),a("span",[e._v("横坐标：")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.xModel,callback:function(t){e.xModel=t},expression:"xModel"}},e._l(e.xOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:t}})})),1),a("el-button",{attrs:{size:"mini"},on:{click:e.search}},[e._v(e._s(e.BTN_TEXT.SEARCH))]),a("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v(e._s(e.BTN_TEXT.RESET))])],1),a("div",{ref:"echartGantt",staticClass:"device-gantt"})])},M=[],E={components:{},props:{type:Number},data:function(){return{BTN_TEXT:c["c"],myChart:null,analyzeModel:0,analyzeOptions:[{name:"报警计数",value:"WARN_COUNT"},{name:"报警时长",value:"WARN_TIME"}],xModel:0,xOptions:[{name:"报警代码",value:"WARN_CODE"},{name:"报警类型",value:"WARN_TYPE"},{name:"报警时间",value:"WARN_DAY"},{name:"报警设备",value:"WARN_DEVICE"}],dateTime:[],pickerOptions:{shortcuts:[{text:c["c"].LAST_WEEK,onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:c["c"].LAST_MONTH,onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:c["c"].LAST_THREE_MONTHS,onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},savedSearchCondition:[]}},computed:{},watch:{},created:function(){var e=this;this.$nextTick((function(){e.getData();var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.dateTime=[e.$utils.toDateString(a,"yyyy-MM-dd")+" 00:00:00",e.$utils.toDateString(t,"yyyy-MM-dd")+" 23:59:59"]}))},methods:{reset:function(){var e=new Date,t=new Date;t.setTime(t.getTime()-6048e5),this.dateTime=[this.$utils.toDateString(t,"yyyy-MM-dd")+" 00:00:00",this.$utils.toDateString(e,"yyyy-MM-dd")+" 23:59:59"],this.xModel=0,this.analyzeModel=0,this.getData()},getData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,i,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},a.conditionJson1=[],a.conditionJson1.push({column:"startTime",value:e.dateTime[0]}),a.conditionJson1.push({column:"endTime",value:e.dateTime[1]}),t.next=7,Object(v["g"])({deviceWarnStatisticalAbscissaEnum:e.xOptions[e.xModel].value,deviceWarnStatisticalIndicatorsEnum:e.analyzeOptions[e.analyzeModel].value},a);case 7:if(n=t.sent,n.code===c["M"].OPERATION_SUCCESS){for(i=[],r=[],o=[],s=0;s<n.rows.length;s++)n.rows[s].otherY?i.push(Number((100*n.rows[s].otherY).toFixed(2))):i.push(0),n.rows[s].y?o.push(n.rows[s].y):o.push(0),"WARN_CODE"===e.xOptions[e.xModel].value||"WARN_DAY"===e.xOptions[e.xModel].value?r.push(n.rows[s].x):r.push(n.rows[s].otherX1);e.draw(i,r,o)}else Object(p["c"])(n.message);t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),Object(m["a"])(c["N"].NOTIFY,t.t0);case 14:return t.prev=14,t.finish(14);case 16:case"end":return t.stop()}}),t,null,[[0,11,14,16]])})))()},draw:function(e,t,a){var n=this;this.myChart=this.$echarts.init(this.$refs.echartGantt),this.myChart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},formatter:function(e){for(var t=e[0].name,a=0;a<e.length;a++)0===a?"WARN_TIME"===n.analyzeOptions[n.analyzeModel].value?t+="<br>"+e[a].seriesName+": "+n.timeStampSeconds(e[a].value):t+="<br>"+e[a].seriesName+": "+e[a].value+"次":t+="<br>"+e[a].seriesName+": "+e[a].value+"%";return t}},legend:{data:[this.xOptions[this.xModel].name,this.analyzeOptions[this.analyzeModel].name,"累计占比"],right:10},grid:{containLabel:!0,left:"5%",right:"1%"},dataZoom:[{type:"slider",filterMode:"weakFilter",top:"bottom"},{type:"inside",filterMode:"weakFilter"}],xAxis:[{type:"category",data:t,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:this.analyzeOptions[this.analyzeModel].name,min:0,axisLabel:{}},{type:"value",name:"累计占比",min:0,interval:5,axisLabel:{formatter:"{value} %"}}],series:[{name:this.analyzeOptions[this.analyzeModel].name,type:"bar",tooltip:{valueFormatter:function(e){return e}},barWidth:"30",itemStyle:{normal:{barBorderRadius:[15,15,15,15],color:new this.$echarts.graphic.LinearGradient(0,1,0,0,[{offset:0,color:"#0871DC"},{offset:1,color:"#45A0FD"}],!1)}},data:a},{name:"累计占比",type:"line",yAxisIndex:1,smooth:!0,symbolSize:10,tooltip:{valueFormatter:function(e){return e+" %"}},lineStyle:{width:5},itemStyle:{normal:{color:"#FA4B4C"}},data:e}]});var i=Object(h["a"])(this.myChart.resize,300);window.addEventListener("resize",(function(){i()}))},search:function(){this.getData()},timeStampSeconds:function(e){var t=parseInt(e/60/60/24),a=parseInt(e/60/60%24),n=parseInt(e/60%60),i=parseInt(e%60);return e="",t>0&&(e=t+"天"),a>0&&(e+=a+"小时"),n>0&&(e+=parseFloat(n)+"分钟"),i>0&&(e+=parseFloat(i)+"秒"),e}}},w=E,_=w,k=(a("f84f"),Object(x["a"])(_,O,M,!1,null,"8947754e",null)),D=k.exports,N=a("eec9"),S=a("99f6"),z={name:"EquipmentMonitoring",data:function(){return{BTN_TEXT:c["c"],active:0,activeN:0,type:2,currentView:"repairWarn",tabs:[{name:"故障报警",views:"repairWarn"}].concat(Object(r["a"])(S["j"]?[]:[{name:"参数报警",views:"paramWarn"}]))}},created:function(){},methods:{buttonClickEvent:function(e){console.log(e),this["".concat(e)]()},toggle:function(e,t){this.active=e,this.currentView=t,0===e&&(this.activeN=0,this.type=2)},toggleN:function(e,t){this.activeN=e,this.type=t},exportTable:function(){0===this.active?this.$refs.utilizationRateTable.exportTable():1===this.active?this.$refs.alarmStatistics.exportTable():2===this.active&&this.$refs.efficiencyStatistics.exportTable()}},components:{SearchBox:N["a"],HeaderTitle:o["a"],HeadOperationItem:s["a"],repairWarn:g,paramWarn:D}},A=z,C=A,R=(a("ae6c"),Object(x["a"])(C,n,i,!1,null,"e533ebfc",null));t["default"]=R.exports},f84f:function(e,t,a){"use strict";var n=a("1c7ec"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-72552de5.6ccecefa.js.map