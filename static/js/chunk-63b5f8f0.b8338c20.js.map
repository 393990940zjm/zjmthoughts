{"version":3,"sources":["webpack:///./src/api/report.js","webpack:///./src/views/report/MaintenancePlan/index.vue?63e4","webpack:///src/views/report/MaintenancePlan/index.vue","webpack:///./src/views/report/MaintenancePlan/index.vue?0d8f","webpack:///./src/views/report/MaintenancePlan/index.vue?6a71","webpack:///./src/utils/notify.js","webpack:///./src/views/report/MaintenancePlan/index.vue?823f","webpack:///./src/utils/publicFunction.js"],"names":["deviceRepairReportGetRepairTaskReport","param","jsonData","postAplicationJSON","deviceMaintainReportGetMaintainTaskReport","getDeviceMaintainTaskFinishReport","getMaintainTaskPlanReport","render","_vm","this","_h","$createElement","_c","_self","attrs","on","buttonClickEvent","refreshTableData","staticClass","staticStyle","_v","BTN_TEXT","TO","STARTTIME","ENDTIME","model","value","callback","$$v","dateTime","expression","$event","reset","_l","item","index","key","class","state","_s","name","ref","mainPage","tableLoading","$options","filters","getTableHeight","tableColumns","data","page","currentPage","pageSize","total","pageSizes","$set","handleMainPageChange","staticRenderFns","components","inject","TITLE","maxHeight","document","body","clientHeight","legendList","show","align","layouts","perfect","columns","searchData","conditionJson1","pickerOptions","disabledDate","current","getTime","savedSearchCondition","shiftOptions","methods","findList","params","type","refresh","showDayData","row","maintainTaskVoList","length","forEach","day","maintainTime","substring","html","push","hourFormat","cellValue","toFixed","created","component","showErrorNotify","title","msg","Notification","error","message","duration","position","showClose","deviceWorkshopLineDeviceGetTreeFunc","Promise","resolve","reject","instance","post","then","res","i","rows","code","id","dataFormatter","catch","err","deviceWorkshopTypeGetTreeFunc","workshopAndLineGetTreeFunc","deviceGroupGetTreeFunc","materialTypeGetTreeFunc","treeArray","x","label","r","tmpMap","l","pId","children","deepClone","obj","objClone","Array","isArray","hasOwnProperty","mixDefaultAndCustomColumns","customSetting","defaultColumns","mixedColumns","defaultColumn","find","column","field","mixedColumn","Object","assign","minWidth","width","visible","required","unshift","console","log","eType","flag","j","searchCondetionFunc","conditionArr1","groupOperator","conditionArr2","conditionJson","operatorGroup","conditionJson2","formatJson","filterKeys","map","getTimeFunc","date","Date","y","getFullYear","m","getMonth","d","getDate","join","getTodayFirstDay","getTodayLastDay"],"mappings":"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","file":"static/js/chunk-63b5f8f0.b8338c20.js","sourcesContent":["/*\r\n * @Descripttion: api接口\r\n * @version:\r\n * @Author: ZJM\r\n * @Date: 2020-04-28 21:50:07\r\n * @LastEditors: y-takeon 1756513062@qq.com\r\n * @LastEditTime: 2022-10-07 18:16:22\r\n */\r\nimport { postAplicationJSON } from '@/utils/request';\r\n\r\nexport const deviceRepairReportGetRepairTaskReport = (param, jsonData) => postAplicationJSON('deviceRepairReport/getRepairTaskReport.action?', param, jsonData);\r\n\r\nexport const deviceMaintainReportGetMaintainTaskReport = (param, jsonData) => postAplicationJSON('deviceMaintainReport/getMaintainTaskReport.action?', param, jsonData);\r\n\r\n// 保养年度统计报表\r\nexport const getDeviceMaintainTaskFinishReport = (param, jsonData) => postAplicationJSON('deviceMaintainReport/getDeviceMaintainTaskFinishReport.action?', param, jsonData);\r\n\r\n// 保养计划报表\r\nexport const getMaintainTaskPlanReport = (param, jsonData) => postAplicationJSON('deviceMaintainReport/getMaintainTaskPlanReport.action?', param, jsonData);\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-header',[_c('header-buttons',{attrs:{\"showRefresh\":true,\"cssType\":\"1\"},on:{\"buttonClickEvent\":_vm.buttonClickEvent}})],1),_c('header-search',{attrs:{\"show-primary-search\":true,\"cssType\":\"1\"},on:{\"refreshTableData\":_vm.refreshTableData}}),_c('el-main',{staticClass:\"view eq maintenancePlan\",staticStyle:{\"overflow-y\":\"visible !important\"}},[_c('div',{staticClass:\"searchDiv\"},[_c('span',[_vm._v(\"时间范围\")]),_c('el-date-picker',{staticClass:\"dateTime\",attrs:{\"clearable\":false,\"type\":\"datetimerange\",\"align\":\"left\",\"size\":\"mini\",\"unlink-panels\":\"\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"range-separator\":_vm.BTN_TEXT.TO,\"start-placeholder\":_vm.BTN_TEXT.STARTTIME,\"end-placeholder\":_vm.BTN_TEXT.ENDTIME,\"default-time\":['00:00:00', '23:59:59']},model:{value:(_vm.dateTime),callback:function ($$v) {_vm.dateTime=$$v},expression:\"dateTime\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"type\":\"default\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.reset()}}},[_vm._v(\"查询\")]),_c('div',{staticClass:\"legendWra\"},_vm._l((_vm.legendList),function(item,index){return _c('div',{key:index,staticClass:\"itemLegend\"},[_c('span',{class:['sign', 'pTextClass' + item.state]}),_c('span',[_vm._v(_vm._s(item.name))])])}),0)],1),_c('el-row',{staticClass:\"tableShow\"},[_c('el-col',{attrs:{\"span\":24}},[_c('vxe-grid',{ref:\"xGrid\",staticClass:\"reverse-table\",attrs:{\"border\":\"\",\"loading\":_vm.mainPage.tableLoading,\"height\":_vm.$options.filters.getTableHeight(270),\"show-header-overflow\":\"tooltip\",\"show-overflow\":\"\",\"highlight-hover-row\":\"\",\"show-header\":true,\"columns\":_vm.tableColumns,\"data\":_vm.mainPage.data,\"cell-class-name\":\"grid-cell\"}}),_c('vxe-pager',{attrs:{\"align\":\"right\",\"current-page\":_vm.mainPage.page.currentPage,\"page-size\":_vm.mainPage.page.pageSize,\"total\":_vm.mainPage.page.total,\"layouts\":[\n              'Sizes',\n              'PrevJump',\n              'PrevPage',\n              'Number',\n              'NextPage',\n              'NextJump',\n              'FullJump',\n              'Total'\n            ],\"page-sizes\":_vm.mainPage.page.pageSizes,\"border\":\"\",\"perfect\":\"\"},on:{\"update:currentPage\":function($event){return _vm.$set(_vm.mainPage.page, \"currentPage\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.mainPage.page, \"currentPage\", $event)},\"update:pageSize\":function($event){return _vm.$set(_vm.mainPage.page, \"pageSize\", $event)},\"update:page-size\":function($event){return _vm.$set(_vm.mainPage.page, \"pageSize\", $event)},\"page-change\":_vm.handleMainPageChange}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n * @Author: zhxy\n * @Date: 2021-08-12 09:06:16\n * @LastEditors: ZJM\n * @LastEditTime: 2022-12-13 09:51:57\n * @Description: file content\n-->\n<template>\n  <el-container>\n    <el-header>\n       <header-buttons :showRefresh=\"true\"  @buttonClickEvent=\"buttonClickEvent\" cssType=\"1\"></header-buttons>\n    </el-header>\n    <header-search\n        :show-primary-search=\"true\"\n        @refreshTableData=\"refreshTableData\"\n        cssType=\"1\"\n      >\n    </header-search>\n    <el-main class=\"view eq maintenancePlan\" style=\"overflow-y:visible !important;\">\n      <div class=\"searchDiv\" >\n        <span>时间范围</span>\n        <el-date-picker\n            :clearable=\"false\"\n            class=\"dateTime\"\n            v-model=\"dateTime\"\n            type=\"datetimerange\"\n            align=\"left\"\n            size=\"mini\"\n            unlink-panels\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\n            :range-separator=\"BTN_TEXT.TO\"\n            :start-placeholder=\"BTN_TEXT.STARTTIME\"\n            :end-placeholder=\"BTN_TEXT.ENDTIME\"\n            :default-time=\"['00:00:00', '23:59:59']\"\n          ></el-date-picker>\n          <!-- <span>班次范围</span>\n          <el-select v-model=\"shiftData\"  size=\"mini\" placeholder=\"请选择\">\n            <el-option\n              v-for=\"item in shiftOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\">\n            </el-option>\n          </el-select> -->\n          <el-button type=\"default\" style=\"margin-left:5px;\"  size=\"mini\" @click=\"reset()\" >查询</el-button>\n          <div class=\"legendWra\">\n            <div class=\"itemLegend\" v-for=\"(item, index) in legendList\" :key=\"index\">\n              <span :class=\"['sign', 'pTextClass' + item.state]\"></span>\n              <span>{{ item.name }}</span>\n            </div>\n          </div>\n      </div>\n      <!-- main table -->\n      <el-row class=\"tableShow\" >\n        <el-col :span=\"24\">\n          <vxe-grid\n            border\n            :loading=\"mainPage.tableLoading\"\n            :height=\"$options.filters.getTableHeight(270)\"\n            show-header-overflow=\"tooltip\"\n            show-overflow\n            highlight-hover-row\n            class=\"reverse-table\"\n            :show-header=\"true\"\n            :columns=\"tableColumns\"\n            ref=\"xGrid\"\n            :data=\"mainPage.data\"\n            cell-class-name='grid-cell'\n          ></vxe-grid>\n          <vxe-pager\n            align=\"right\"\n            :current-page.sync=\"mainPage.page.currentPage\"\n            :page-size.sync='mainPage.page.pageSize'\n            :total=\"mainPage.page.total\"\n            :layouts=\"[\n                'Sizes',\n                'PrevJump',\n                'PrevPage',\n                'Number',\n                'NextPage',\n                'NextJump',\n                'FullJump',\n                'Total'\n              ]\"\n            :page-sizes=\"mainPage.page.pageSizes\"\n            border\n            @page-change=\"handleMainPageChange\"\n            perfect\n            >\n          </vxe-pager>\n          <!-- <VXETable\n            ref=\"xGrid\"\n            :tableName=\"''\"\n            :height=\"$options.filters.getTableHeight(220)\"\n            :tableLoading=\"mainPage.tableLoading\"\n            :tableDatas=\"mainPage.data\"\n            :tableColumns=\"tableColumns\"\n            :highlightCurrentRow=\"true\"\n            :tablePage=\"mainPage.page\"\n            @onTablePageChange=\"handleMainPageChange\"\n          >\n          </VXETable> -->\n        </el-col>\n      </el-row>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\n/*\n * @Author: zhxy\n * @Date: 2021-08-12 09:05:28\n * @LastEditors: ZJM\n * @LastEditTime: 2022-05-22 14:28:53\n * @Description: file content\n */\n// import { CommonService } from '@/services/common.service';\n// 引入通用接口\nimport { searchCondetionFunc } from '@/utils/publicFunction';\n// 引入table组件\n// import VXETable from '@/components/common/Table';\nimport {\n  BTN_TEXT,\n  // EQUIPMENT_MANAGEMENT_REPORT,\n  // EQUIPMENT_STATUS_REPORT,\n  STATUS_CODE,\n  TITLE\n} from '@/utils/constantsFile';\n// message service\nimport { showWarningMessage } from '@/utils/message';\nimport { getMaintainTaskPlanReport } from '@/api/report.js';\n// 提示信息\nimport { showErrorNotify } from '@/utils/notify';\n\nexport default {\n  name: 'EquipmentStatus',\n  components: {\n    // VXETable\n  },\n  inject: ['reload'],\n  data() {\n    return {\n      BTN_TEXT: BTN_TEXT,\n      TITLE: TITLE,\n      maxHeight: document.body.clientHeight - 250,\n      tableColumns: [],\n      legendList: [{\n        name: '保养中',\n        state: 1\n      },\n      {\n        name: '保养完成',\n        state: 2\n      },\n      {\n        name: '保养超时完成',\n        state: 3\n      },\n      {\n        name: '待保养',\n        state: 4\n      },\n      {\n        name: '待审核',\n        state: 5\n      }],\n      mainPage: {\n        show: true,\n        page: {\n          total: 0,\n          currentPage: 1,\n          pageSize: 10,\n          align: 'right',\n          pageSizes: [10, 20, 50, 100, 200, 500],\n          layouts: [\n            'Sizes',\n            'PrevPage',\n            'Number',\n            'NextPage',\n            'Total'\n          ],\n          perfect: true\n        },\n        data: [\n        ],\n        columns: [\n          {\n            field: 'deviceName',\n            title: '设备名称',\n            width: '120',\n            align: 'center',\n            visible: true,\n            fixed: 'left'\n          },\n          {\n            field: 'devicePriCode',\n            title: '设备编码',\n            width: '120',\n            align: 'center',\n            visible: true,\n            fixed: 'left'\n            // headerClassName: 'run'\n            // fixed: 'left'\n          },\n          {\n            field: 'number',\n            title: '设备编号',\n            width: '120',\n            align: 'center',\n            visible: true,\n            fixed: 'left'\n            // headerClassName: 'run'\n            // fixed: 'left'\n          },\n          {\n            field: 'factory',\n            title: '工厂',\n            width: '120',\n            visible: true,\n            align: 'center'\n            // fixed: 'left'\n          },\n          {\n            field: 'workshop',\n            title: '车间名称',\n            width: '120',\n            visible: true,\n            align: 'center'\n            // fixed: 'left'\n          },\n          {\n            field: 'productionLine',\n            title: '产线',\n            width: '120',\n            visible: true,\n            align: 'center'\n            // fixed: 'left'\n          },\n          {\n            field: 'typeName',\n            title: '设备类型',\n            width: '120',\n            visible: true,\n            align: 'center'\n            // headerClassName: 'run',\n            // formatter: this.hourFormat\n            // fixed: 'left'\n          }\n        ],\n        tableLoading: false\n\n      },\n      searchData: {\n        conditionJson1: []\n      },\n      pickerOptions: {\n        disabledDate: (current) => {\n          return current.getTime() > this.moment(`${this.moment(Date.now()).format('YYYY-MM-DD')} 23:59:59`).format('x');\n        }\n      },\n      dateTime: [],\n      // 保存搜索内输入的搜索条件，防止翻页时变回无条件查询\n      savedSearchCondition: [],\n      // 班次列表\n      shiftOptions: []\n    };\n  },\n  methods: {\n    // 按钮触发事件\n    buttonClickEvent(type) {\n      this[`${type}`]();\n    },\n    reset() {\n      this.mainPage.currentPage = 1;\n      this.mainPage.pageSize = 10;\n      this.findList();\n    },\n    handleMainPageChange(params) {\n      if (params.type === 'size') {\n        this.mainPage.page.currentPage = params.currentPage;\n        this.mainPage.page.pageSize = params.pageSize;\n      }\n      this.findList();\n      // this.mainPage.page.currentPage = params.currentPage;\n      // this.mainPage.page.pageSize = params.pageSize;\n      // this.findList();\n    },\n    refresh() {\n      this.findList();\n    },\n    async findList(operType) {\n      try {\n        this.mainPage.tableLoading = true;\n        var conditionJson = {\n          conditionJson1: [],\n          operatorGroup: 1,\n          conditionJson2: []\n        };\n\n        if (this.savedSearchCondition.length > 0) {\n          conditionJson = searchCondetionFunc(...this.savedSearchCondition);\n        }\n\n        if (operType === 'export') {\n          conditionJson.size = 99999999;\n          conditionJson.current = 1;\n        } else {\n          conditionJson.size = this.mainPage.page.pageSize;\n          conditionJson.current = this.mainPage.page.currentPage;\n        }\n\n        var param = {\n          startTime: '',\n          endTime: ''\n        };\n\n        if (this.dateTime) {\n          param.startTime = this.dateTime[0];\n          param.endTime = this.dateTime[1];\n        }\n\n        console.log(conditionJson);\n\n        const data = await getMaintainTaskPlanReport(param, conditionJson);\n\n        if (data.code === STATUS_CODE.OPERATION_SUCCESS) {\n          this.tableColumns = [];\n          const columns = data.dataset.map(item => ({\n            field: item.substring(5, 10),\n            title: item.substring(5, 10),\n            width: '140',\n            align: 'center',\n            visible: true,\n            formatter: ({ row, column }) => {\n              const value = row[column.property];\n              if (!value) {\n                return '';\n              }\n              let arr = [];\n              arr = value.map(item => {\n                const state = this.legendList.find(v => v.state === item.maintainState)?.name;\n                return `${item.cycleName}(${state})`;\n              });\n              return arr.join('\\n');\n            },\n            slots: {\n              default: ({ row, column }) => {\n                return this.showDayData(row, item.substring(5, 10));\n              }\n            }\n          }));\n          this.tableColumns = [...this.mainPage.columns, ...columns];\n          this.mainPage.data = data.rows;\n          this.mainPage.page.total = data.total;\n          if (operType === 'export') {\n            let arr = [];\n            arr = data.rows.map(row => {\n              const item = {};\n              this.mainPage.columns.forEach(el => {\n                item[el.field] = row[el.field];\n              });\n              columns.forEach(field => {\n                item[field.field] = row.maintainTaskVoList.filter(v => v.maintainTime.substring(5, 10) === field.field);\n              });\n              return item;\n            });\n            this.$refs.xGrid.exportData({\n              filename: '保养计划报表',\n              type: 'csv',\n              data: arr\n            });\n          }\n        } else {\n          showWarningMessage(data.message);\n        }\n      } catch (error) {\n        showErrorNotify(TITLE.NOTIFY, error);\n      } finally {\n        this.mainPage.tableLoading = false;\n      }\n    },\n    showDayData(row, day) {\n      const html = [];\n      if (row.maintainTaskVoList.length > 0) {\n        row.maintainTaskVoList.forEach(item => {\n          if (day === item.maintainTime.substring(5, 10)) {\n            const pClass = 'pTextClass' + item.maintainState;\n            // const state = this.legendList.find(legend => legend.state === item.maintainState)?.name;\n            html.push(<p class={ pClass }>{ item.cycleName }</p>);\n          }\n        });\n      }\n      return html;\n    },\n    hourFormat({ cellValue }) {\n      return (cellValue / 60).toFixed(2);\n    },\n    async exportTable() {\n      this.findList('export');\n      // this.$refs.xGrid.exportData({\n      //   filename: '保养计划报表',\n      //   sheetName: 'Sheet1',\n      //   type: 'xlsx',\n      //   types: ['xlsx', 'csv', 'html', 'xml', 'txt'],\n      //   useStyle: true\n      // });\n    },\n    /**\n     * @description: 刷新表格数据\n     * @param 无\n     * @return void\n     * @author: cyb\n     */\n    refreshTableData(savedSearchCondition) {\n      if (savedSearchCondition) {\n        this.savedSearchCondition = [...savedSearchCondition];\n        this.mainPage.page.currentPage = 1;\n      }\n      this.findList();\n    }\n  },\n  created() {\n    this.dateTime = [\n    `${this.moment(new Date()).format('YYYY-MM-DD')} 00:00:00`,\n    `${this.moment(new Date().getTime() + (90 * 3600 * 24 * 1000)).format('YYYY-MM-DD')} 23:59:59`\n    ];\n    this.findList();\n  }\n};\n\n</script>\n<style lang=\"less\" scoped>\n.maintenancePlan {\n    width: calc(100% - 20px);\n    line-height: normal;\n    background-color: white;\n    overflow: auto !important;\n\n    .pTextClass1{\n        background: orange;\n        border-radius: 14px;\n    }\n    .pTextClass2{\n        background: #4caf50;\n        border-radius: 14px;\n    }\n    .pTextClass3{\n        background: #2196f3;\n        border-radius: 14px;\n    }\n    .pTextClass4{\n        background: rgb(172, 170, 170);\n        border-radius: 14px;\n    }\n    .pTextClass5{\n        background: rgb(225, 120, 230);\n        border-radius: 14px;\n    }\n    .pTextClass1,\n    .pTextClass2,\n    .pTextClass3,\n    .pTextClass4{\n        color: #fff;\n        margin: 5px;\n        padding: 0 5px;\n    }\n  }\n  .tableShow{\n    margin-left:10px;\n    /deep/ .vxe-table.virtual--x .col--ellipsis .vxe-cell {\n      max-height: 48px;\n    }\n    /deep/ .vxe-table .vxe-body--column.col--ellipsis:not(.col--actived) .vxe-cell {\n      overflow-y: auto;\n      max-height: 48px;\n    }\n    /deep/ .vxe-table .vxe-body--column.col--ellipsis:not(.col--actived) .vxe-cell::-webkit-scrollbar {\n      display: none;\n    }\n  }\n  .el-header {\n    height: 41px !important;\n    line-height: 40px;\n    width: 100%;\n    border-bottom: 1px solid #ddd;\n}\n\n.search-fixed{\n  text-align: center;\n  display: grid;\n  grid-template-columns: 1fr 80px 1fr;\n  grid-template-rows: repeat(1, 44px);\n  column-gap: 20px;\n  &>div>span{\n      display: inline-block;\n      min-width: 80px;\n      margin-right:20px;\n  }\n  .width-special{\n      display: inline-block;\n      text-align: left;\n  }\n}\n// 以下宽度用于让日期范围选择同search-box中的下拉框对齐\n@media screen and (min-width: 1440px) {\n  .width-special {\n    width: 370px;\n  }\n\n}\n@media screen and (min-width: 1680px) and (max-width: 1920px) {\n  .width-special {\n      width: 430px;\n    }\n}\n@media screen and (min-width: 1920px) {\n  .width-special {\n      width: 510px;\n    }\n}\n.searchDiv{\n  position: relative;\n  text-align: left;\n  padding: 5px;\n  span{\n    margin: 5px;\n  }\n  .legendWra {\n    position: absolute;\n    right: 20px;\n    top: 5px;\n    display: flex;\n\n    .itemLegend {\n      display: flex;\n      align-items: center;\n      margin-left: 12px;\n      .sign {\n        width: 30px;\n        height: 15px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=34126be4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=34126be4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34126be4\",\n  null\n  \n)\n\nexport default component.exports","/*\r\n * @Description: 消息通知的方法，包括提示成功信息、警告信息和错误信息\r\n * @Version: 1.0\r\n * @Author: ZJM\r\n * @LastEditors: ZJM\r\n * @LastEditTime: 2020-05-20 10:15:27\r\n */\r\nimport { Notification } from 'element-ui';\r\n\r\n/**\r\n * @description: 提示成功通知\r\n * @param {string} title 通知标题\r\n * @param {string} msg 通知内容\r\n * @return: void\r\n */\r\nexport function showSuccessNotify(title, msg) {\r\n  Notification.success({\r\n    title: title,\r\n    message: msg,\r\n    duration: 2000,\r\n    position: 'bottom-right',\r\n    showClose: true\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 提示消息通知\r\n * @param {string} title 通知标题\r\n * @param {string} msg 通知内容\r\n * @return: void\r\n */\r\nexport function showInfoNotify(title, msg) {\r\n  Notification.info({\r\n    title: title,\r\n    message: msg,\r\n    duration: 2000,\r\n    position: 'bottom-right',\r\n    showClose: true\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 提示警告通知\r\n * @param {string} title 通知标题\r\n * @param {string} msg 通知内容\r\n * @return: void\r\n */\r\nexport function showWarningNotify(title, msg) {\r\n  Notification.warning({\r\n    title: title,\r\n    message: msg,\r\n    duration: 2000,\r\n    position: 'bottom-right',\r\n    showClose: true\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 提示错误通知\r\n * @param {string} title 通知标题\r\n * @param {string} msg 通知内容\r\n * @return: void\r\n */\r\nexport function showErrorNotify(title, msg) {\r\n  Notification.error({\r\n    title: title,\r\n    message: msg,\r\n    duration: 2000,\r\n    position: 'bottom-right',\r\n    showClose: true\r\n  });\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=34126be4&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=34126be4&lang=less&scoped=true&\"","/*\r\n * @Descripttion: 多页面可用的封装通用接口\r\n * @version:\r\n * @Author: ZJM\r\n * @Date: 2020-04-28 15:05:45\r\n * @LastEditors: ZJM\r\n * @LastEditTime: 2022-07-26 10:33:39\r\n */\r\n// 导入数据序列化\r\n\r\nimport { instance } from '@/utils/request';\r\n\r\n/**\r\n * @description: 车间-产线-设备树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function deviceWorkshopLineDeviceGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('deviceGroup/getAllGroupAndDevice.action')\r\n      .then(res => {\r\n        // var resData = { ...res.data.rows };\r\n        for (var i = 0; i < res.data.rows.length; i++) {\r\n          if (res.data.rows[i].code) {\r\n            res.data.rows[i].id = res.data.rows[i].code;\r\n          }\r\n        }\r\n        // setTimeout(() => {\r\n        // console.log('666', res.data.rows);\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n        // }, 300);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 车间-产线-设备树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function deviceWorkshopLineDeviceGetTreeFuncOpenApi() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('open-api/TvBoard/device/getAllGroupAndDevice.action')\r\n      .then(res => {\r\n        // var resData = { ...res.data.rows };\r\n        for (var i = 0; i < res.data.rows.length; i++) {\r\n          if (res.data.rows[i].code) {\r\n            res.data.rows[i].id = res.data.rows[i].code;\r\n          }\r\n        }\r\n        // setTimeout(() => {\r\n        // console.log('666', res.data.rows);\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n        // }, 300);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 车间分组树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function deviceWorkshopTypeGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('deviceWorkshopType/getTree.action')\r\n      .then(res => {\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 车间-产线分组树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function workshopAndLineGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('deviceGroup/getListGroupAndProductionLine.action')\r\n      .then(res => {\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 设备类型树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function deviceGroupGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('deviceGroup/getTree.action?')\r\n      .then(res => {\r\n        res.data.rows = dataFormatter(res.data.rows);\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 物料类型树形【chlidren】\r\n * @param 无\r\n * @return:无\r\n * @author: ZJM\r\n */\r\nexport function materialTypeGetTreeFunc() {\r\n  return new Promise((resolve, reject) => {\r\n    instance.post('materialsType/getTree.action?')\r\n      .then(res => {\r\n        if (res.data.rows) {\r\n          res.data.rows = dataFormatter(res.data.rows);\r\n        } else {\r\n          res.data.rows = [];\r\n        }\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * @description: 返回数据格式化\r\n * @param data rows数据\r\n * @return: 格式化后数据\r\n * @author: ZJM\r\n */\r\nexport function dataFormatter(data) {\r\n  var treeArray = data;\r\n  for (var x in treeArray) {\r\n    treeArray[x].value = treeArray[x].id;\r\n    treeArray[x].label = treeArray[x].name;\r\n  }\r\n  var r = [];\r\n  var tmpMap = {};\r\n  for (var i = 0, l = treeArray.length; i < l; i++) {\r\n    tmpMap[treeArray[i].id] = treeArray[i];\r\n  }\r\n  for (i = 0, l = treeArray.length; i < l; i++) {\r\n    var key = tmpMap[treeArray[i].pId];\r\n    if (key) {\r\n      if (!key.children) {\r\n        key.children = [];\r\n        key.children.push(treeArray[i]);\r\n      } else {\r\n        key.children.push(treeArray[i]);\r\n      }\r\n    } else {\r\n      r.push(treeArray[i]);\r\n    }\r\n  }\r\n  return r;\r\n};\r\n\r\nexport function tableHeightFunc() {\r\n  return document.documentElement.clientHeight;\r\n};\r\n\r\n// 数据克隆\r\nexport function deepClone(obj) {\r\n  const objClone = Array.isArray(obj) ? [] : {};\r\n  if (obj && typeof obj === 'object') {\r\n    for (var key in obj) {\r\n      // eslint-disable-next-line no-prototype-builtins\r\n      if (obj.hasOwnProperty(key)) {\r\n        // 判断ojb子元素是否为对象，如果是，递归复制\r\n        if (obj[key] && typeof obj[key] === 'object') {\r\n          objClone[key] = this.deepClone(obj[key]);\r\n        } else {\r\n          // 如果不是，简单复制\r\n          objClone[key] = obj[key];\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return objClone;\r\n};\r\n\r\n/**\r\n * @description: 将自定义配置混入默认表头设置\r\n * @param {array} customSetting 后端返回的自定义列配置\r\n * @param {array} defaultColumns 前端写的默认列配置\r\n * @return {type} array\r\n * @author: cyb\r\n */\r\nexport function mixDefaultAndCustomColumns(customSetting, defaultColumns) {\r\n  const mixedColumns = [];\r\n  if (Array.isArray(customSetting) && Array.isArray(defaultColumns)) {\r\n    // 当自定义配置存在时\r\n    if (customSetting.length > 0) {\r\n      for (const item of customSetting) {\r\n        // 找到默认的列\r\n        const defaultColumn = defaultColumns.find(\r\n          column => column.field === item.field\r\n        );\r\n\r\n        if (defaultColumn) {\r\n          // 在默认列中混入自定义配置\r\n          const mixedColumn = Object.assign({}, defaultColumn, {\r\n            minWidth: item.width,\r\n            visible: item.visible,\r\n            required: item.required\r\n          });\r\n\r\n          mixedColumns.push(mixedColumn);\r\n        }\r\n      }\r\n\r\n      // 如果第一列是checkbox，则加入\r\n      if (defaultColumns[1].type && defaultColumns[1].type === 'checkbox') {\r\n        mixedColumns.unshift(defaultColumns[1]);\r\n      }\r\n      // 如果第一列是checkbox，则加入\r\n      if (defaultColumns[0].type && defaultColumns[0].type === 'radio') {\r\n        mixedColumns.unshift(defaultColumns[0]);\r\n      }\r\n      // 如果第一列是checkbox，则加入\r\n      if (defaultColumns[0].type && defaultColumns[0].type === 'checkbox') {\r\n        mixedColumns.unshift(defaultColumns[0]);\r\n      }\r\n\r\n      console.log('7788', customSetting, defaultColumns, mixedColumns);\r\n      for (var i = 0; i < defaultColumns.length; i++) {\r\n        if (defaultColumns[i].eType) {\r\n          var flag = 0;\r\n          for (var j = 0; j < customSetting.length; j++) {\r\n            if (defaultColumns[i].field === customSetting[j].field) {\r\n              flag += 1;\r\n            }\r\n          }\r\n          if (flag === 0) {\r\n            mixedColumns.push(defaultColumns[i]);\r\n          }\r\n        }\r\n      }\r\n\r\n      const length = defaultColumns.length;\r\n      // 如果最后一列是操作，则加入\r\n      if (\r\n        defaultColumns[length - 1].title &&\r\n        defaultColumns[length - 1].title === '操作'\r\n      ) {\r\n        mixedColumns.push(defaultColumns[length - 1]);\r\n      }\r\n      console.log('9999', mixedColumns);\r\n      return mixedColumns;\r\n    } else {\r\n      return defaultColumns;\r\n    }\r\n  } else {\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * 复杂查询通用方法\r\n */\r\nexport function searchCondetionFunc(conditionArr1 = [], groupOperator = 1, conditionArr2 = []) {\r\n  const conditionJson = {\r\n    conditionJson1: conditionArr1,\r\n    operatorGroup: groupOperator,\r\n    conditionJson2: conditionArr2\r\n  };\r\n  return conditionJson;\r\n}\r\n\r\n/**\r\n * xlsx 导出所需的数据\r\n * @param { Array } filterKeys\r\n * @param { Array } jsonData\r\n */\r\n\r\n// Format and filter json data using filterKeys array\r\nexport function formatJson(filterKeys, jsonData) {\r\n  return jsonData.map((data, index) => filterKeys.map(key => {\r\n    if (data[key] == null || data[key] === '') {\r\n      return '-';\r\n    } else {\r\n      return data[key];\r\n    }\r\n  }));\r\n}\r\n\r\n// 格式转换\r\nexport function getTimeFunc(param) {\r\n  var date = new Date(param);\r\n  var y = date.getFullYear(); // 获取年份\r\n  var m = date.getMonth() + 1; // 获取月份\r\n  var d = date.getDate(); // 获取当月最后一日\r\n  m = m < 10 ? '0' + m : m; // 月份补 0\r\n  d = d < 10 ? '0' + d : d; // 日数补 0\r\n\r\n  return [y, m, d].join('-');\r\n}\r\n\r\nexport function getTodayFirstDay(param) {\r\n  var date = new Date(param);\r\n  var y = date.getFullYear(); // 获取年份\r\n  var m = date.getMonth() + 1; // 获取月份\r\n  var d = date.getDate(); // 获取当月最后一日\r\n  m = m < 10 ? '0' + m : m; // 月份补 0\r\n  d = d < 10 ? '0' + d : d; // 日数补 0\r\n\r\n  return [y, m, d].join('-') + ' 00:00:00';\r\n}\r\n\r\n// 当日最晚时间\r\nexport function getTodayLastDay(param) {\r\n  var date = new Date(param);\r\n  var y = date.getFullYear(); // 获取年份\r\n  var m = date.getMonth() + 1; // 获取月份\r\n  var d = date.getDate(); // 获取当月最后一日\r\n  m = m < 10 ? '0' + m : m; // 月份补 0\r\n  d = d < 10 ? '0' + d : d; // 日数补 0\r\n\r\n  return [y, m, d].join('-') + ' 23:59:59';\r\n}\r\n"],"sourceRoot":""}