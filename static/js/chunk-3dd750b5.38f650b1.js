(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dd750b5"],{8293:function(t,e,n){},ba95:function(t,e,n){"use strict";var a=n("8293"),r=n.n(a);r.a},e413:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"kanban"},[n("Header",{attrs:{titleName:"设备稼动率看板"}}),n("search-bar",{attrs:{searchData:t.searchData,searchOptions:t.searchOptions},on:{search:t.search,getGroupSucceed:t.loadData}}),n("div",{staticClass:"kanbanContent"},[n("div",{staticClass:"top_content"},[n("card-module",{attrs:{title:"稼动率",isExport:!1,cardBg:"cardBg_large",titleBg:"cardTitle_large",width:"100%",height:"100%",titleWidth:"70%"}},[n("stereo-bar",{attrs:{refName:"yieldChart",height:"calc((100vh - 15rem) / 2 - 20px)",unit:"%",chartData:t.yieldData}})],1)],1),n("div",{staticClass:"bottom_content"},[n("card-module",{attrs:{title:t.yiledKey,isExport:!1,cardBg:"cardBg_large",titleBg:"cardTitle_large",width:"100%",height:"100%",titleWidth:"70%"}},[n("stereo-bar",{attrs:{refName:"output",height:"calc((100vh - 15rem) / 2 - 20px)",chartData:t.outputData}})],1)],1)])],1)},r=[],o=(n("4160"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("159b"),n("96cf"),n("1da1")),i=n("99f6"),c=n("78fe"),u=n("e9c43"),s=n("5995"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:t.refName,staticClass:"lineChart",style:{width:t.width,height:t.height}})},d=[],f=800,h=f/20,g={name:"StereoBar",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},refName:{type:String,default:"chart"},chartName:{type:String,default:"计划产量"},chartData:{type:Object,default:function(){return{colors:["#73fcff","#86eef1","#5ad6d9","#3dc8ca"]}}},unit:{type:String,default:""}},data:function(){return{data:[],loading:!1,chart:null,colorGroup:{type:"linear",x:0,x2:1,y:0,y2:0,colorStops:[{offset:0,color:this.chartData.colors[0]},{offset:.5,color:this.chartData.colors[1]},{offset:.5,color:this.chartData.colors[2]},{offset:1,color:this.chartData.colors[3]}]}}},watch:{chartData:{handler:function(){this.drawChart()},deep:!0}},methods:{drawChart:function(){var t=this,e={tooltip:{trigger:"axis",formatter:"{b} : {c}",axisPointer:{type:"shadow"}},grid:{left:"5%",right:"5%",top:"10%",bottom:"8%"},xAxis:{data:this.chartData.xData,axisLine:{lineStyle:{color:"#3eb2e8"}},axisLabel:{show:!0,margin:10,textStyle:{color:"#fff"}}},yAxis:{axisLine:{show:!1},axisLabel:{show:!0,textStyle:{color:"#fff"}},splitLine:{lineStyle:{color:"#4784e8",opacity:.6}}},series:[{type:"bar",barWidth:h,itemStyle:{normal:{color:function(e){return t.colorGroup}}},label:{show:!1,position:[h/2,-(h+20)],color:"#ffffff",fontSize:14,fontStyle:"bold",align:"center"},data:this.chartData.seriesData},{z:2,type:"pictorialBar",data:this.chartData.seriesData,symbol:"diamond",symbolOffset:[0,"50%"],symbolSize:[h,.5*h],itemStyle:{normal:{color:function(e){return t.colorGroup}}}},{z:3,type:"pictorialBar",symbolPosition:"end",data:this.chartData.seriesData,symbol:"diamond",symbolOffset:[0,"-50%"],symbolSize:[h,.5*h],itemStyle:{normal:{borderWidth:0,color:function(e){return t.colorGroup.colorStops[0].color}}},label:{show:!0,position:"top",color:"#ffffff",fontSize:14,fontStyle:"bold",align:"center",formatter:function(e){return e.value+t.unit}}}]};this.chart.setOption(e),window.addEventListener("resize",(function(){t.chart.resize()}))},init:function(){}},mounted:function(){var t=this;this.chart=this.$echarts.init(this.$refs[this.refName]),setTimeout((function(){t.drawChart()}),500)}},p=g,m=n("2877"),v=Object(m["a"])(p,l,d,!1,null,"58b583a6",null),w=v.exports,y=n("582a"),b=n("ef53"),D=n("f82c"),x=n("7598"),C={name:"kanban_xw_DTplato",components:{CardModule:c["a"],searchBar:u["a"],Header:s["a"],StereoBar:w},data:function(){return{timers:"",yieldDeviceName:"裁切检测包装机25305-1",title:"",groupId:0,time:"",dataTime:"",tableHeight:180,searchData:{groupValue:[1,6,7,"00000165_00000001"],date:[Object(b["b"])(15)+" 00:00:00",Object(b["b"])(0)+" 23:59:59"],timeKeyEnum:"DAY"},searchOptions:[{type:"cascader",key:"groupValue",options:[]},{type:"daterange",key:"date",options:[{label:"日",value:"DAY"},{label:"周",value:"WEEK"},{label:"月",value:"MONTH"}]}],tableColumns:[],actualTableData:[],OKTableData:[],NGTableData:[],yieldTableData:[],kanbanConfig:{title:"",key:"",time:15e3},yieldXData:[],planYield:[],coatingData:{},barChartInfo:{current:1,size:4},maintainAnalyse:{current:1,size:4},timer:null,yiledKey:"产量",outputData:{seriesData:[],xData:[],colors:["#73fcff","#86eef1","#5ad6d9","#3dc8ca"]},yieldData:{seriesData:[],xData:[],colors:["#E4CE16","#E2CF15","#C1B01A","#B8A91E"]}}},mounted:function(){var t=this;document.documentElement.style.fontSize=this.fontSize()+"px",window.onresize=function(){document.documentElement.style.fontSize=t.fontSize()+"px"},this.loadData(),this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){t.loadData()}),36e5)},created:function(){var t=this;i["m"][this.getUrlKeyMain("cid",window.location.href)]&&(t.kanbanConfig=i["m"][this.getUrlKeyMain("cid",window.location.href)]),this.getGroupLineDevice()},destroyed:function(){this.timer&&clearInterval(this.timer)},methods:{getGroupLineDevice:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={isProductionDevice:1},e.next=4,Object(x["n"])(n,{secretKey:t.kanbanConfig.key});case 4:for(a=e.sent,r=0;r<a.rows.length;r++)a.rows[r].code&&(a.rows[r].id=a.rows[r].code);a.rows=Object(D["a"])(a.rows),t.searchOptions[0].options=a.rows,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},fontSize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(e){var n=e/1920;return t*n}},showLogo:function(){return"logo_"+this.kanbanConfig.logo},getUrlKeyMain:function(t,e){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||["",""])[1].replace(/\+/g,"%20"))||null},getYieldChartData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o,i,c,u,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=t.searchData,a=n.timeKeyEnum,r=n.date,o=n.groupValue,i={queryDateTypeEnum:a,startTime:r[0],endTime:r[1]},o&&(c=o[o.length-1],i.deviceCode=c),e.next=6,Object(x["v"])(i,{secretKey:t.kanbanConfig.key});case 6:u=e.sent,u.code===y["M"].OPERATION_SUCCESS&&(s=[],l=[],u.rows.forEach((function(t){s.push(t.time.substr(5,5)),l.push(t.value)})),t.yieldData.seriesData=l,t.yieldData.xData=s),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getProductivityChartData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o,i,c,u,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=t.searchData,a=n.timeKeyEnum,r=n.date,o=n.groupValue,i={queryDateTypeEnum:a,startTime:r[0],endTime:r[1]},o&&(c=o[o.length-1],i.deviceCode=c),e.next=6,Object(x["u"])(i,{secretKey:t.kanbanConfig.key});case 6:u=e.sent,u.code===y["M"].OPERATION_SUCCESS&&(s=[],l=[],u.rows.forEach((function(t){s.push(t.time.substr(5,5)),l.push(t.value)})),t.outputData.seriesData=l,t.outputData.xData=s,console.log(t.outputData)),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getYieldConfig:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={},t.getUrlKeyMain("cid",window.location.href)&&(n.secretKey=t.kanbanConfig.key),e.next=5,Object(x["p"])({configurationTypeEnum:"PRODUCTION_CONFIGURATION"},n);case 5:a=e.sent,"0000"===a.code&&(t.yiledKey=(null===(r=a.rows)||void 0===r?void 0:r.processConfiguration)||"产量"),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:return e.prev=11,t.getProductivityChartData(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,9,11,14]])})))()},search:function(){this.loadData()},loadData:function(){this.getYieldChartData(),this.getYieldConfig()}}},O=C,S=(n("ba95"),Object(m["a"])(O,a,r,!1,null,"02234bde",null));e["default"]=S.exports},ef53:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"h",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l}));n("a15b");function a(){var t=(new Date).getFullYear(),e=(new Date).getMonth()+1,n=(new Date).getDate();return e=e<10?"0"+e:e,n=n<10?"0"+n:n,[t,e,n].join("-")+" 00:00:00"}function r(t){var e=new Date(t),n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return a=a<10?"0"+a:a,r=r<10?"0"+r:r,[n,a,r].join("-")+" 00:00:00"}function o(){var t=(new Date).getFullYear(),e=(new Date).getMonth()+1,n=(new Date).getDate();return e=e<10?"0"+e:e,n=n<10?"0"+n:n,[t,e,n].join("-")+" 23:59:59"}function i(t){var e=new Date(t),n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return a=a<10?"0"+a:a,r=r<10?"0"+r:r,[n,a,r].join("-")+" 23:59:59"}function c(t){var e=new Date((new Date).getTime()-864e5*t),n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return a=a<10?"0"+a:a,r=r<10?"0"+r:r,[n,a,r].join("-")}function u(t,e){var n=new Date(e-864e5*t),a=n.getFullYear(),r=n.getMonth()+1,o=n.getDate();return r=r<10?"0"+r:r,o=o<10?"0"+o:o,[a,r,o].join("-")}function s(){var t=new Date;t.setDate(1);var e=t.getFullYear(),n=t.getMonth()+1;n=n>10?n:"0"+n;var a=t.getDate();return a=a<10?"0"+a:a,e+"-"+n+"-"+a}function l(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1;n=n>10?n:"0"+n;var a=new Date(e,n,1);console.log(a);var r=864e5,o=new Date(a-r),i=o.getDate();return console.log(i),i=i<10?"0"+i:i,e+"-"+n+"-"+i}},f82c:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"m",(function(){return u})),n.d(e,"c",(function(){return s})),n.d(e,"j",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return g})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return m})),n.d(e,"h",(function(){return v})),n.d(e,"i",(function(){return w}));n("7db0"),n("a15b"),n("d81d"),n("b0c0"),n("d3b7");var a=n("b85c"),r=n("53ca"),o=n("b775");function i(){return new Promise((function(t,e){o["i"].post("deviceGroup/getAllGroupAndDevice.action").then((function(e){for(var n=0;n<e.data.rows.length;n++)e.data.rows[n].code&&(e.data.rows[n].id=e.data.rows[n].code);e.data.rows=d(e.data.rows),t(e.data)})).catch((function(t){e(t.data)}))}))}function c(){return new Promise((function(t,e){o["i"].post("deviceWorkshopType/getTree.action").then((function(e){e.data.rows=d(e.data.rows),t(e.data)})).catch((function(t){e(t.data)}))}))}function u(){return new Promise((function(t,e){o["i"].post("deviceGroup/getListGroupAndProductionLine.action").then((function(e){e.data.rows=d(e.data.rows),t(e.data)})).catch((function(t){e(t.data)}))}))}function s(){return new Promise((function(t,e){o["i"].post("deviceGroup/getTree.action?").then((function(e){e.data.rows=d(e.data.rows),t(e.data)})).catch((function(t){e(t.data)}))}))}function l(){return new Promise((function(t,e){o["i"].post("materialsType/getTree.action?").then((function(e){e.data.rows?e.data.rows=d(e.data.rows):e.data.rows=[],t(e.data)})).catch((function(t){e(t.data)}))}))}function d(t){var e=t;for(var n in e)e[n].value=e[n].id,e[n].label=e[n].name;for(var a=[],r={},o=0,i=e.length;o<i;o++)r[e[o].id]=e[o];for(o=0,i=e.length;o<i;o++){var c=r[e[o].pId];c?(c.children||(c.children=[]),c.children.push(e[o])):a.push(e[o])}return a}function f(t){var e=Array.isArray(t)?[]:{};if(t&&"object"===Object(r["a"])(t))for(var n in t)t.hasOwnProperty(n)&&(t[n]&&"object"===Object(r["a"])(t[n])?e[n]=this.deepClone(t[n]):e[n]=t[n]);return e}function h(t,e){var n=[];if(Array.isArray(t)&&Array.isArray(e)){if(t.length>0){var r,o=Object(a["a"])(t);try{var i=function(){var t=r.value,a=e.find((function(e){return e.field===t.field}));if(a){var o=Object.assign({},a,{minWidth:t.width,visible:t.visible,required:t.required});n.push(o)}};for(o.s();!(r=o.n()).done;)i()}catch(d){o.e(d)}finally{o.f()}e[1].type&&"checkbox"===e[1].type&&n.unshift(e[1]),e[0].type&&"radio"===e[0].type&&n.unshift(e[0]),e[0].type&&"checkbox"===e[0].type&&n.unshift(e[0]),console.log("7788",t,e,n);for(var c=0;c<e.length;c++)if(e[c].eType){for(var u=0,s=0;s<t.length;s++)e[c].field===t[s].field&&(u+=1);0===u&&n.push(e[c])}var l=e.length;return e[l-1].title&&"操作"===e[l-1].title&&n.push(e[l-1]),console.log("9999",n),n}return e}return[]}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={conditionJson1:t,operatorGroup:e,conditionJson2:n};return a}function p(t,e){return e.map((function(e,n){return t.map((function(t){return null==e[t]||""===e[t]?"-":e[t]}))}))}function m(t){var e=new Date(t),n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return a=a<10?"0"+a:a,r=r<10?"0"+r:r,[n,a,r].join("-")}function v(t){var e=new Date(t),n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return a=a<10?"0"+a:a,r=r<10?"0"+r:r,[n,a,r].join("-")+" 00:00:00"}function w(t){var e=new Date(t),n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return a=a<10?"0"+a:a,r=r<10?"0"+r:r,[n,a,r].join("-")+" 23:59:59"}}}]);
//# sourceMappingURL=chunk-3dd750b5.38f650b1.js.map